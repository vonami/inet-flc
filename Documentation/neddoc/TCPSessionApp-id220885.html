<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<h2 class="comptitle">Simple Module <i>TCPSessionApp</i>
</h2>
<p><b>File: <a href="file-id220862.html">Applications/TCPApp/TCPSessionApp.ned</a></b></p>
<p><b>C++ definition: <a href="../doxy/class_t_c_p_session_app.html" target="_top">click here</a></b></p>
<p>Single-connection <a href="TCP-id271256.html">TCP</a> application: it opens a connection, sends
the given number of bytes, and closes. Sending may be one-off,
or may be controlled by a "script" which is a series of
(time, number of bytes) pairs. May act either as client or as server,
and works with TCPVirtualBytesSendQueue/RcvQueue as sendQueue/receiveQueue
setting for <a href="TCP-id271256.html">TCP</a>.
Compatible with both IPv4 and <a href="IPv6-id232445.html">IPv6</a>.</p>

<p><b>Opening the connection</b></p>

<p>Regarding the type of opening the connection, the application may
be either a client or a server. When active=false, the application
will listen on the given local port, and wait for an incoming connection.
When active=true, the application will bind to given local address:port,
and connect to the connectAddress:connectPort. To use an ephemeral port
as local port, set the port parameter to -1.</p>

<p>Even when in server mode (active=false), the application will only
serve one incoming connection. Further connect attempts will be
refused by <a href="TCP-id271256.html">TCP</a> (it will send RST) for lack of LISTENing connections.</p>

<p>The time of opening the connection is in the tOpen parameter.</p>

<p><b>Sending data</b></p>

<p>Regardless of the type of OPEN, the application can be made to send
data. One way of specifying sending is via the tSend, sendBytes
parameters, the other way is sendScript. With the former, sendBytes
bytes will be sent at tSend. With sendScript, the format is
"&lt;time&gt; &lt;numBytes&gt;;&lt;time&gt; &lt;numBytes&gt;;..."</p>

<p><b>Closing the connection</b></p>

<p>The application will issue a TCP CLOSE at time tClose. If tClose=-1, no
CLOSE will be issued.</p>

<h3 class="subtitle">Usage diagram:</h3>
<p>The following diagram shows usage relationships between modules,
   networks and channels. Unresolved module (and channel) types are missing from the diagram.
   Click <a href="full-usage-diagram.html">here</a> to see the full picture.</p>
<img src="diag-id220885.gif" ismap usemap="#usage-diagram"><map name="usage-diagram"><area shape="rect" href="TCPSessionApp-id220885.html" title="simple TCPSessionApp" alt="TCPSessionApp" coords="7,16,124,40">
</map><h3 class="subtitle">Parameters:</h3>
<table class="paramtable">
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td width="150">address</td>
<td width="100"><i>string</i></td>
<td></td>
</tr>
<tr>
<td width="150">port</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
<tr>
<td width="150">active</td>
<td width="100"><i>bool</i></td>
<td></td>
</tr>
<tr>
<td width="150">connectAddress</td>
<td width="100"><i>string</i></td>
<td></td>
</tr>
<tr>
<td width="150">connectPort</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
<tr>
<td width="150">tOpen</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
<tr>
<td width="150">tSend</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
<tr>
<td width="150">sendBytes</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
<tr>
<td width="150">sendScript</td>
<td width="100"><i>string</i></td>
<td></td>
</tr>
<tr>
<td width="150">tClose</td>
<td width="100"><i>numeric const</i></td>
<td></td>
</tr>
</table>
<h3 class="subtitle">Gates:</h3>
<table class="paramtable">
<tr>
<th>Name</th>
<th>Direction</th>
<th>Description</th>
</tr>
<tr>
<td width="150">tcpIn</td>
<td width="100"><i>input</i></td>
<td></td>
</tr>
<tr>
<td width="150">tcpOut</td>
<td width="100"><i>output</i></td>
<td></td>
</tr>
</table>
<h3 class="subtitle">Source code:</h3>
<pre class="src"><span class="src-keyword">simple</span> TCPSessionApp
    <span class="src-keyword">parameters</span>:
        address: <span class="src-keyword">string</span>,
        port: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>,
        active: <span class="src-keyword">bool</span>,
        connectAddress: <span class="src-keyword">string</span>,
        connectPort: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>,
        tOpen: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>,
        tSend: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>,
        sendBytes: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>,
        sendScript: <span class="src-keyword">string</span>,
        tClose: <span class="src-keyword">numeric</span> <span class="src-keyword">const</span>;
    <span class="src-keyword">gates</span>:
        <span class="src-keyword">in:</span> tcpIn;
        <span class="src-keyword">out:</span> tcpOut;
<span class="src-keyword">endsimple</span></pre>
</body>
</html>
