<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: OSPF::Area Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="namespace_o_s_p_f.html">OSPF</a>::<a class="el" href="class_o_s_p_f_1_1_area.html">Area</a></div>
<h1>OSPF::Area Class Reference</h1><code>#include &lt;OSPFArea.h&gt;</code>
<p>
<a href="class_o_s_p_f_1_1_area-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a0">Area</a> (<a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> id=<a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a1">~Area</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a2">SetAreaID</a> (<a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> areaId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a3">GetAreaID</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a4">AddAddressRange</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> addressRange, bool advertise)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a5">GetAddressRangeCount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a6">GetAddressRange</a> (unsigned int index) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a7">AddHostRoute</a> (<a class="el" href="struct_o_s_p_f_1_1_host_route_parameters.html">HostRouteParameters</a> &amp;hostRouteParameters)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a8">SetTransitCapability</a> (bool transit)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a9">GetTransitCapability</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a10">SetExternalRoutingCapability</a> (bool flooded)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a11">GetExternalRoutingCapability</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a12">SetStubDefaultCost</a> (<a class="el" href="namespace_o_s_p_f.html#a0">Metric</a> cost)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a0">Metric</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a13">GetStubDefaultCost</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a14">SetSPFTreeRoot</a> (<a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *root)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a15">GetSPFTreeRoot</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a16">GetSPFTreeRoot</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a17">SetRouter</a> (<a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *router)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a18">GetRouter</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a19">GetRouter</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a20">GetRouterLSACount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a21">GetRouterLSA</a> (unsigned long i)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a22">GetRouterLSA</a> (unsigned long i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a23">GetNetworkLSACount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a24">GetNetworkLSA</a> (unsigned long i)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a25">GetNetworkLSA</a> (unsigned long i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a26">GetSummaryLSACount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a27">GetSummaryLSA</a> (unsigned long i)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a28">GetSummaryLSA</a> (unsigned long i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a29">ContainsAddress</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> address) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a30">HasAddressRange</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> addressRange) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a31">GetContainingAddressRange</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> addressRange, bool *advertise=NULL) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a32">AddInterface</a> (<a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a33">GetInterface</a> (unsigned char ifIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a34">GetInterface</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> address)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a35">HasVirtualLink</a> (<a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> withTransitArea) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a36">FindVirtualLink</a> (<a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a> routerID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a37">InstallRouterLSA</a> (<a class="el" href="class_o_s_p_f_router_l_s_a.html">OSPFRouterLSA</a> *lsa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a38">InstallNetworkLSA</a> (<a class="el" href="class_o_s_p_f_network_l_s_a.html">OSPFNetworkLSA</a> *lsa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a39">InstallSummaryLSA</a> (<a class="el" href="class_o_s_p_f_summary_l_s_a.html">OSPFSummaryLSA</a> *lsa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a40">FindRouterLSA</a> (<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a> linkStateID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a41">FindRouterLSA</a> (<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a> linkStateID) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a42">FindNetworkLSA</a> (<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a> linkStateID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a43">FindNetworkLSA</a> (<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a> linkStateID) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a44">FindSummaryLSA</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a45">FindSummaryLSA</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a46">AgeDatabase</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a47">AnyNeighborInStates</a> (int states) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a48">RemoveFromAllRetransmissionLists</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a49">IsOnAnyRetransmissionList</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *lsa, <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf=NULL, <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *neighbor=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a51">IsLocalAddress</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> address) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a52">OriginateRouterLSA</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a53">OriginateNetworkLSA</a> (const <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a54">OriginateSummaryLSA</a> (const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *entry, const std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, bool, <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a> &gt; &amp;originatedLSAs, <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&amp;lsaToReoriginate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a55">CalculateShortestPathTree</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;newRoutingTable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a56">CalculateInterAreaRoutes</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;newRoutingTable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a57">ReCheckSummaryLSAs</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;newRoutingTable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a58">info</a> (char *buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#a59">detailedInfo</a> (void) const </td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d0">OriginateSummaryLSA</a> (const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> *summaryLSA)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d1">HasLink</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *fromLSA, <a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *toLSA) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_next_hop.html">NextHop</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *destination, <a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *parent) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_next_hop.html">NextHop</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d3">CalculateNextHops</a> (<a class="el" href="class_link.html">Link</a> &amp;destination, <a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *parent) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d4">GetUniqueLinkStateID</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> destination, <a class="el" href="namespace_o_s_p_f.html#a0">Metric</a> destinationCost, <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&amp;lsaToReoriginate) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d5">FindSameOrWorseCostRoute</a> (const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * &gt; &amp;newRoutingTable, const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> &amp;currentLSA, unsigned short currentCost, bool &amp;destinationInRoutingTable, std::list&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * &gt; &amp;sameOrWorseCost) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#d6">CreateRoutingTableEntryFromSummaryLSA</a> (const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> &amp;summaryLSA, unsigned short entryCost, const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> &amp;borderRouterEntry) const </td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r0">areaID</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>,<br>
 bool, <a class="el" href="class_o_s_p_f_1_1_i_pv4_address_range___less.html">IPv4AddressRange_Less</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r1">advertiseAddressRanges</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_host_route_parameters.html">HostRouteParameters</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>, <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>, <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *,<br>
 <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a0">Metric</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r13">stubDefaultCost</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="OSPF::Area::Area"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OSPF::Area::Area           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>id</em> = <code><a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a></code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00008                              :
00009     <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a> (<span class="keywordtype">id</span>),
00010     <a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a> (<span class="keyword">false</span>),
00011     <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a> (<span class="keyword">true</span>),
00012     <a class="code" href="class_o_s_p_f_1_1_area.html#r13">stubDefaultCost</a> (1),
00013     <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a> (NULL),
00014     <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a> (NULL)
00015 {
00016 }

</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="OSPF::Area::~Area"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OSPF::Area::~<a class="el" href="class_o_s_p_f_1_1_area.html">Area</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00019 {
00020     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00021     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; interfaceNum; i++) {
00022         <span class="keyword">delete</span> (<a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]);
00023     }
00024     <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.size ();
00025     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> j = 0; j &lt; lsaCount; j++) {
00026         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[j];
00027     }
00028     <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.clear ();
00029     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.size ();
00030     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> k = 0; k &lt; lsaCount; k++) {
00031         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[k];
00032     }
00033     <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.clear ();
00034     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size ();
00035     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> m = 0; m &lt; lsaCount; m++) {
00036         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[m];
00037     }
00038     <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.clear ();
00039 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="OSPF::Area::AddAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::AddAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>addressRange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>advertise</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00040 { <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.push_back (addressRange); <a class="code" href="class_o_s_p_f_1_1_area.html#r1">advertiseAddressRanges</a>[addressRange] = advertise; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="OSPF::Area::AddHostRoute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::AddHostRoute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_host_route_parameters.html">HostRouteParameters</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hostRouteParameters</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00043 { <a class="code" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a>.push_back (hostRouteParameters); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="OSPF::Area::AddInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::AddInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>intf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00042 {
00043     intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a58">SetArea</a> (<span class="keyword">this</span>);
00044     <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.push_back (intf);
00045 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="OSPF::Area::AgeDatabase"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::AgeDatabase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00328 {
00329     <span class="keywordtype">long</span>            lsaCount            = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.size ();
00330     <span class="keywordtype">bool</span>            rebuildRoutingTable = <span class="keyword">false</span>;
00331     <span class="keywordtype">long</span>            i;
00332 
00333     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00334         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>   lsAge          = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i]-&gt;getHeader ().getLsAge ();
00335         <span class="keywordtype">bool</span>             selfOriginated = (<a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i]-&gt;getHeader ().getAdvertisingRouter ().getInt () == <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00336         <span class="keywordtype">bool</span>             unreachable    = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;DestinationIsUnreachable (routerLSAs[i]);
00337         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* lsa            = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i];
00338 
00339         <span class="keywordflow">if</span> ((selfOriginated &amp;&amp; (lsAge &lt; (LS_REFRESH_TIME - 1))) || (!selfOriginated &amp;&amp; (lsAge &lt; (MAX_AGE - 1)))) {
00340             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (lsAge + 1);
00341             <span class="keywordflow">if</span> ((lsAge + 1) % CHECK_AGE == 0) {
00342                 <span class="keywordflow">if</span> (!lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html#a4">ValidateLSChecksum</a> ()) {
00343                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Invalid LS checksum. Memory error detected!\n"</span>;
00344                 }
00345             }
00346             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00347         }
00348         <span class="keywordflow">if</span> (selfOriginated &amp;&amp; (lsAge == (LS_REFRESH_TIME - 1))) {
00349             <span class="keywordflow">if</span> (unreachable) {
00350                 lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00351                 <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00352                 lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00353             } <span class="keywordflow">else</span> {
00354                 <span class="keywordtype">long</span> sequenceNumber = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00355                 <span class="keywordflow">if</span> (sequenceNumber == MAX_SEQUENCE_NUMBER) {
00356                     lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00357                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00358                     lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00359                 } <span class="keywordflow">else</span> {
00360                     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a52">OriginateRouterLSA</a> ();
00361 
00362                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (sequenceNumber + 1);
00363                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00364                     rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html#a5">Update</a> (newLSA);
00365                     <span class="keyword">delete</span> newLSA;
00366 
00367                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00368                 }
00369             }
00370         }
00371         <span class="keywordflow">if</span> (!selfOriginated &amp;&amp; (lsAge == MAX_AGE - 1)) {
00372             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00373             <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00374             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00375         }
00376         <span class="keywordflow">if</span> (lsAge == MAX_AGE) {
00377             <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00378 
00379             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00380             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00381 
00382             <span class="keywordflow">if</span> (!IsOnAnyRetransmissionList (lsaKey) &amp;&amp;
00383                 !AnyNeighborInStates (OSPF::Neighbor::ExchangeState | OSPF::Neighbor::LoadingState))
00384             {
00385                 <span class="keywordflow">if</span> (!selfOriginated || unreachable) {
00386                     <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.erase (lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
00387                     <span class="keyword">delete</span> lsa;
00388                     <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i] = NULL;
00389                     rebuildRoutingTable = <span class="keyword">true</span>;
00390                 } <span class="keywordflow">else</span> {
00391                     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* newLSA              = <a class="code" href="class_o_s_p_f_1_1_area.html#a52">OriginateRouterLSA</a> ();
00392                     <span class="keywordtype">long</span>             sequenceNumber      = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00393 
00394                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
00395                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00396                     rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html#a5">Update</a> (newLSA);
00397                     <span class="keyword">delete</span> newLSA;
00398 
00399                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00400                 }
00401             }
00402         }
00403     }
00404 
00405     std::vector&lt;RouterLSA*&gt;::iterator routerIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.begin ();
00406     <span class="keywordflow">while</span> (routerIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.end ()) {
00407         <span class="keywordflow">if</span> ((*routerIt) == NULL) {
00408             routerIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.erase (routerIt);
00409         } <span class="keywordflow">else</span> {
00410             routerIt++;
00411         }
00412     }
00413 
00414     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.size ();
00415     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00416         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>    lsAge          = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i]-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> ();
00417         <span class="keywordtype">bool</span>              unreachable    = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;DestinationIsUnreachable (networkLSAs[i]);
00418         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* lsa            = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i];
00419         <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>*  localIntf      = <a class="code" href="class_o_s_p_f_1_1_area.html#a33">GetInterface</a> (IPv4AddressFromULong (lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()));
00420         <span class="keywordtype">bool</span>              selfOriginated = <span class="keyword">false</span>;
00421 
00422         <span class="keywordflow">if</span> ((localIntf != NULL) &amp;&amp;
00423             (localIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w21">OSPF::Interface::DesignatedRouterState</a>) &amp;&amp;
00424             (localIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a55">GetNeighborCount</a> () &gt; 0) &amp;&amp;
00425             (localIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a10">AnyNeighborInStates</a> (OSPF::Neighbor::FullState)))
00426         {
00427             selfOriginated = <span class="keyword">true</span>;
00428         }
00429 
00430         <span class="keywordflow">if</span> ((selfOriginated &amp;&amp; (lsAge &lt; (LS_REFRESH_TIME - 1))) || (!selfOriginated &amp;&amp; (lsAge &lt; (MAX_AGE - 1)))) {
00431             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (lsAge + 1);
00432             <span class="keywordflow">if</span> ((lsAge + 1) % CHECK_AGE == 0) {
00433                 <span class="keywordflow">if</span> (!lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html#a4">ValidateLSChecksum</a> ()) {
00434                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Invalid LS checksum. Memory error detected!\n"</span>;
00435                 }
00436             }
00437             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00438         }
00439         <span class="keywordflow">if</span> (selfOriginated &amp;&amp; (lsAge == (LS_REFRESH_TIME - 1))) {
00440             <span class="keywordflow">if</span> (unreachable) {
00441                 lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00442                 <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00443                 lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00444             } <span class="keywordflow">else</span> {
00445                 <span class="keywordtype">long</span> sequenceNumber = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00446                 <span class="keywordflow">if</span> (sequenceNumber == MAX_SEQUENCE_NUMBER) {
00447                     lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00448                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00449                     lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00450                 } <span class="keywordflow">else</span> {
00451                     <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a53">OriginateNetworkLSA</a> (localIntf);
00452 
00453                     <span class="keywordflow">if</span> (newLSA != NULL) {
00454                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (sequenceNumber + 1);
00455                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00456                         rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html#a5">Update</a> (newLSA);
00457                         <span class="keyword">delete</span> newLSA;
00458                     } <span class="keywordflow">else</span> {    <span class="comment">// no neighbors on the network -&gt; old NetworkLSA must be flushed</span>
00459                         lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00460                         lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00461                     }
00462 
00463                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00464                 }
00465             }
00466         }
00467         <span class="keywordflow">if</span> (!selfOriginated &amp;&amp; (lsAge == MAX_AGE - 1)) {
00468             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00469             <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00470             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00471         }
00472         <span class="keywordflow">if</span> (lsAge == MAX_AGE) {
00473             <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00474 
00475             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00476             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00477 
00478             <span class="keywordflow">if</span> (!IsOnAnyRetransmissionList (lsaKey) &amp;&amp;
00479                 !AnyNeighborInStates (OSPF::Neighbor::ExchangeState | OSPF::Neighbor::LoadingState))
00480             {
00481                 <span class="keywordflow">if</span> (!selfOriginated || unreachable) {
00482                     <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.erase (lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
00483                     <span class="keyword">delete</span> lsa;
00484                     <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i] = NULL;
00485                     rebuildRoutingTable = <span class="keyword">true</span>;
00486                 } <span class="keywordflow">else</span> {
00487                     <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* newLSA              = <a class="code" href="class_o_s_p_f_1_1_area.html#a53">OriginateNetworkLSA</a> (localIntf);
00488                     <span class="keywordtype">long</span>              sequenceNumber      = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00489 
00490                     <span class="keywordflow">if</span> (newLSA != NULL) {
00491                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
00492                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00493                         rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html#a5">Update</a> (newLSA);
00494                         <span class="keyword">delete</span> newLSA;
00495 
00496                         <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00497                     } <span class="keywordflow">else</span> {    <span class="comment">// no neighbors on the network -&gt; old NetworkLSA must be deleted</span>
00498                         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i];
00499                     }
00500                 }
00501             }
00502         }
00503     }
00504 
00505     std::vector&lt;NetworkLSA*&gt;::iterator networkIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.begin ();
00506     <span class="keywordflow">while</span> (networkIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.end ()) {
00507         <span class="keywordflow">if</span> ((*networkIt) == NULL) {
00508             networkIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.erase (networkIt);
00509         } <span class="keywordflow">else</span> {
00510             networkIt++;
00511         }
00512     }
00513 
00514     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size ();
00515     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00516         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>    lsAge          = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i]-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> ();
00517         <span class="keywordtype">bool</span>              selfOriginated = (<a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i]-&gt;getHeader ().getAdvertisingRouter ().getInt () == <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00518         <span class="keywordtype">bool</span>              unreachable    = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;DestinationIsUnreachable (summaryLSAs[i]);
00519         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* lsa            = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i];
00520 
00521         <span class="keywordflow">if</span> ((selfOriginated &amp;&amp; (lsAge &lt; (LS_REFRESH_TIME - 1))) || (!selfOriginated &amp;&amp; (lsAge &lt; (MAX_AGE - 1)))) {
00522             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (lsAge + 1);
00523             <span class="keywordflow">if</span> ((lsAge + 1) % CHECK_AGE == 0) {
00524                 <span class="keywordflow">if</span> (!lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html#a6">ValidateLSChecksum</a> ()) {
00525                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Invalid LS checksum. Memory error detected!\n"</span>;
00526                 }
00527             }
00528             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00529         }
00530         <span class="keywordflow">if</span> (selfOriginated &amp;&amp; (lsAge == (LS_REFRESH_TIME - 1))) {
00531             <span class="keywordflow">if</span> (unreachable) {
00532                 lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00533                 <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00534                 lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00535             } <span class="keywordflow">else</span> {
00536                 <span class="keywordtype">long</span> sequenceNumber = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00537                 <span class="keywordflow">if</span> (sequenceNumber == MAX_SEQUENCE_NUMBER) {
00538                     lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00539                     <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00540                     lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00541                 } <span class="keywordflow">else</span> {
00542                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a54">OriginateSummaryLSA</a> (lsa);
00543 
00544                     <span class="keywordflow">if</span> (newLSA != NULL) {
00545                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (sequenceNumber + 1);
00546                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00547                         rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html#a7">Update</a> (newLSA);
00548                         <span class="keyword">delete</span> newLSA;
00549 
00550                         <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00551                     } <span class="keywordflow">else</span> {
00552                         lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00553                         <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00554                         lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00555                     }
00556                 }
00557             }
00558         }
00559         <span class="keywordflow">if</span> (!selfOriginated &amp;&amp; (lsAge == MAX_AGE - 1)) {
00560             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00561             <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00562             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00563         }
00564         <span class="keywordflow">if</span> (lsAge == MAX_AGE) {
00565             <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00566 
00567             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00568             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00569 
00570             <span class="keywordflow">if</span> (!IsOnAnyRetransmissionList (lsaKey) &amp;&amp;
00571                 !AnyNeighborInStates (OSPF::Neighbor::ExchangeState | OSPF::Neighbor::LoadingState))
00572             {
00573                 <span class="keywordflow">if</span> (!selfOriginated || unreachable) {
00574                     <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.erase (lsaKey);
00575                     <span class="keyword">delete</span> lsa;
00576                     <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i] = NULL;
00577                     rebuildRoutingTable = <span class="keyword">true</span>;
00578                 } <span class="keywordflow">else</span> {
00579                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a54">OriginateSummaryLSA</a> (lsa);
00580                     <span class="keywordflow">if</span> (newLSA != NULL) {
00581                         <span class="keywordtype">long</span> sequenceNumber = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00582 
00583                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
00584                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00585                         rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html#a7">Update</a> (newLSA);
00586                         <span class="keyword">delete</span> newLSA;
00587 
00588                         <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (lsa);
00589                     } <span class="keywordflow">else</span> {
00590                         <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.erase (lsaKey);
00591                         <span class="keyword">delete</span> lsa;
00592                         <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i] = NULL;
00593                         rebuildRoutingTable = <span class="keyword">true</span>;
00594                     }
00595                 }
00596             }
00597         }
00598     }
00599 
00600     std::vector&lt;SummaryLSA*&gt;::iterator summaryIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.begin ();
00601     <span class="keywordflow">while</span> (summaryIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.end ()) {
00602         <span class="keywordflow">if</span> ((*summaryIt) == NULL) {
00603             summaryIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.erase (summaryIt);
00604         } <span class="keywordflow">else</span> {
00605             summaryIt++;
00606         }
00607     }
00608 
00609     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00610     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> m = 0; m &lt; interfaceCount; m++) {
00611         <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[m]-&gt;AgeTransmittedLSALists ();
00612     }
00613 
00614     <span class="keywordflow">if</span> (rebuildRoutingTable) {
00615         <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;RebuildRoutingTable ();
00616     }
00617 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="OSPF::Area::AnyNeighborInStates"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::AnyNeighborInStates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>states</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00620 {
00621     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00622     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; interfaceCount; i++) {
00623         <span class="keywordflow">if</span> (associatedInterfaces[i]-&gt;AnyNeighborInStates (states)) {
00624             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00625         }
00626     }
00627     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00628 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="OSPF::Area::CalculateInterAreaRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::CalculateInterAreaRoutes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>newRoutingTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd>RFC 2328 Section 16.2. </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>This function does a lot of lookup in the input newRoutingTable. Restructuring the input vector into some kind of hash would quite probably speed up execution. </dd></dl>
<div class="fragment"><pre class="fragment">02194 {
02195     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0;
02196     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> j = 0;
02197     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size ();
02198 
02199     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
02200         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* currentLSA        = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i];
02201         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    currentHeader     = currentLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
02202 
02203         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     routeCost         = currentLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a9">getRouteCost</a> ();
02204         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>    lsAge             = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> ();
02205         <a class="code" href="namespace_o_s_p_f.html#a1">RouterID</a>          originatingRouter = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
02206         <span class="keywordtype">bool</span>              selfOriginated    = (originatingRouter == <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
02207 
02208         <span class="keywordflow">if</span> ((routeCost == LS_INFINITY) || (lsAge == MAX_AGE) || (selfOriginated)) { <span class="comment">// (1) and (2)</span>
02209             <span class="keywordflow">continue</span>;
02210         }
02211 
02212         <span class="keywordtype">char</span>                   lsType     = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> ();
02213         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>          routeCount = newRoutingTable.size ();
02214         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destination;
02215 
02216         destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
02217         destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (currentLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
02218 
02219         <span class="keywordflow">if</span> ((lsType == SummaryLSA_NetworksType) &amp;&amp; (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;HasAddressRange (destination))) { <span class="comment">// (3)</span>
02220             <span class="keywordtype">bool</span> foundIntraAreaRoute = <span class="keyword">false</span>;
02221 
02222             <span class="comment">// look for an "Active" IntraArea route</span>
02223             <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {
02224                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = newRoutingTable[j];
02225 
02226                 <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) &amp;&amp;
02227                     (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) &amp;&amp;
02228                     ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp;
02229                       routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()   &amp;
02230                       <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)       ) == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp;
02231                                                                                                destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)))
02232                 {
02233                     foundIntraAreaRoute = <span class="keyword">true</span>;
02234                     <span class="keywordflow">break</span>;
02235                 }
02236             }
02237             <span class="keywordflow">if</span> (foundIntraAreaRoute) {
02238                 <span class="keywordflow">continue</span>;
02239             }
02240         }
02241 
02242         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* borderRouterEntry = NULL;
02243 
02244         <span class="comment">// The routingEntry describes a route to an other area -&gt; look for the border router originating it</span>
02245         <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {     <span class="comment">// (4) N == destination, BR == borderRouterEntry</span>
02246             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = newRoutingTable[j];
02247 
02248             <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () == <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>) &amp;&amp;
02249                 (((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
02250                  ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0)) &amp;&amp;
02251                 (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == originatingRouter))
02252             {
02253                 borderRouterEntry = routingEntry;
02254                 <span class="keywordflow">break</span>;
02255             }
02256         }
02257         <span class="keywordflow">if</span> (borderRouterEntry == NULL) {
02258             <span class="keywordflow">continue</span>;
02259         } <span class="keywordflow">else</span> {    <span class="comment">// (5)</span>
02260             <span class="comment">/* "Else, this LSA describes an inter-area path to destination N,</span>
02261 <span class="comment">             * whose cost is the distance to BR plus the cost specified in the LSA.</span>
02262 <span class="comment">             * Call the cost of this inter-area path IAC."</span>
02263 <span class="comment">             */</span>
02264             <span class="keywordtype">bool</span>                                destinationInRoutingTable = <span class="keyword">true</span>;
02265             <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>                      currentCost               = routeCost + borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
02266             std::list&lt;OSPF::RoutingTableEntry*&gt; sameOrWorseCost;
02267 
02268             <span class="keywordflow">if</span> (FindSameOrWorseCostRoute (newRoutingTable,
02269                                           *currentLSA,
02270                                           currentCost,
02271                                           destinationInRoutingTable,
02272                                           sameOrWorseCost))
02273             {
02274                 <span class="keywordflow">continue</span>;
02275             }
02276 
02277             <span class="keywordflow">if</span> (destinationInRoutingTable &amp;&amp; (sameOrWorseCost.size () &gt; 0)) {
02278                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* equalEntry = NULL;
02279 
02280                 <span class="comment">/* Look for an equal cost entry in the sameOrWorseCost list, and</span>
02281 <span class="comment">                 * also clear the more expensive entries from the newRoutingTable.</span>
02282 <span class="comment">                 */</span>
02283                 <span class="keywordflow">for</span> (std::list&lt;OSPF::RoutingTableEntry*&gt;::iterator it = sameOrWorseCost.begin (); it != sameOrWorseCost.end (); it++) {
02284                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* checkedEntry = (*it);
02285 
02286                     <span class="keywordflow">if</span> (checkedEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &gt; currentCost) {
02287                         <span class="keywordflow">for</span> (std::vector&lt;OSPF::RoutingTableEntry*&gt;::iterator entryIt = newRoutingTable.begin (); entryIt != newRoutingTable.end (); entryIt++) {
02288                             <span class="keywordflow">if</span> (checkedEntry == (*entryIt)) {
02289                                 newRoutingTable.erase (entryIt);
02290                                 <span class="keywordflow">break</span>;
02291                             }
02292                         }
02293                     } <span class="keywordflow">else</span> {    <span class="comment">// EntryCost == currentCost</span>
02294                         equalEntry = checkedEntry;  <span class="comment">// should be only one - if there are more they are ignored</span>
02295                     }
02296                 }
02297 
02298                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nextHopCount = borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a25">GetNextHopCount</a> ();
02299 
02300                 <span class="keywordflow">if</span> (equalEntry != NULL) {
02301                     <span class="comment">/* Add the next hops of the border router advertising this destination</span>
02302 <span class="comment">                     * to the equal entry.</span>
02303 <span class="comment">                     */</span>
02304                     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> j = 0; j &lt; nextHopCount; j++) {
02305                         equalEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j));
02306                     }
02307                 } <span class="keywordflow">else</span> {
02308                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* newEntry = <a class="code" href="class_o_s_p_f_1_1_area.html#d6">CreateRoutingTableEntryFromSummaryLSA</a> (*currentLSA, currentCost, *borderRouterEntry);
02309                     ASSERT (newEntry != NULL);
02310                     newRoutingTable.push_back (newEntry);
02311                 }
02312             } <span class="keywordflow">else</span> {
02313                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* newEntry = <a class="code" href="class_o_s_p_f_1_1_area.html#d6">CreateRoutingTableEntryFromSummaryLSA</a> (*currentLSA, currentCost, *borderRouterEntry);
02314                 ASSERT (newEntry != NULL);
02315                 newRoutingTable.push_back (newEntry);
02316             }
02317         }
02318     }
02319 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="OSPF::Area::CalculateNextHops"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_next_hop.html">OSPF::NextHop</a> &gt; * OSPF::Area::CalculateNextHops           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_link.html">Link</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parent</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01926 {
01927     std::vector&lt;OSPF::NextHop&gt;* hops = <span class="keyword">new</span> std::vector&lt;OSPF::NextHop&gt;;
01928     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                i;
01929 
01930     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerLSA = check_and_cast&lt;OSPF::RouterLSA*&gt; (parent);
01931     <span class="keywordflow">if</span> (routerLSA != spfTreeRoot) {
01932         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a5">GetNextHopCount</a> ();
01933         <span class="keywordflow">for</span> (i = 0; i &lt; nextHopCount; i++) {
01934             hops-&gt;push_back (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (i));
01935         }
01936         <span class="keywordflow">return</span> hops;
01937     } <span class="keywordflow">else</span> {
01938         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
01939         <span class="keywordflow">for</span> (i = 0; i &lt; interfaceNum; i++) {
01940             <a class="code" href="class_o_s_p_f_1_1_interface.html#w23">OSPF::Interface::OSPFInterfaceType</a> intfType = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetType ();
01941 
01942             <span class="keywordflow">if</span> ((intfType == OSPF::Interface::PointToPoint) ||
01943                 ((intfType == OSPF::Interface::Virtual) &amp;&amp;
01944                  (associatedInterfaces[i]-&gt;GetState () &gt; OSPF::Interface::LoopbackState)))
01945             {
01946                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = (<a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetNeighborCount () &gt; 0) ? <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetNeighbor (0) : NULL;
01947                 <span class="keywordflow">if</span> (neighbor != NULL) {
01948                     <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a> neighborAddress = neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> ();
01949                     <span class="keywordflow">if</span> (((neighborAddress != OSPF::NullIPv4Address) &amp;&amp;
01950                          (ULongFromIPv4Address (neighborAddress) == destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())) ||
01951                         ((neighborAddress == OSPF::NullIPv4Address) &amp;&amp;
01952                          (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (associatedInterfaces[i]-&gt;GetAddressRange ().address) == destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()) &amp;&amp;
01953                          (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (associatedInterfaces[i]-&gt;GetAddressRange ().mask) == destination.<a class="code" href="class_link.html#a9">getLinkData</a> ())))
01954                     {
01955                         NextHop nextHop;
01956                         nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01957                         nextHop.hopAddress        = neighborAddress;
01958                         nextHop.advertisingRouter = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01959                         hops-&gt;push_back (nextHop);
01960                         <span class="keywordflow">break</span>;
01961                     }
01962                 }
01963             }
01964             <span class="keywordflow">if</span> ((intfType == OSPF::Interface::Broadcast) ||
01965                 (intfType == OSPF::Interface::NBMA))
01966             {
01967                 <span class="keywordflow">if</span> ((destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (associatedInterfaces[i]-&gt;GetAddressRange ().address &amp; associatedInterfaces[i]-&gt;GetAddressRange ().mask)) &amp;&amp;
01968                     (destination.<a class="code" href="class_link.html#a9">getLinkData</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (associatedInterfaces[i]-&gt;GetAddressRange ().mask)))
01969                 {
01970                     NextHop nextHop;
01971                     nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01972                     nextHop.hopAddress        = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01973                     nextHop.advertisingRouter = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01974                     hops-&gt;push_back (nextHop);
01975                     <span class="keywordflow">break</span>;
01976                 }
01977             }
01978             <span class="keywordflow">if</span> (intfType == OSPF::Interface::PointToMultiPoint) {
01979                 <span class="keywordflow">if</span> (destination.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a13">StubLink</a>) {
01980                     <span class="keywordflow">if</span> (destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (associatedInterfaces[i]-&gt;GetAddressRange ().address)) {
01981                         <span class="comment">// The link contains the router's own interface address and a full mask,</span>
01982                         <span class="comment">// so we insert a next hop pointing to the interface itself. Kind of pointless, but</span>
01983                         <span class="comment">// not much else we could do...</span>
01984                         <span class="comment">// TODO: check what other OSPF implementations do in this situation</span>
01985                         NextHop nextHop;
01986                         nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01987                         nextHop.hopAddress        = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetAddressRange ().address;
01988                         nextHop.advertisingRouter = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01989                         hops-&gt;push_back (nextHop);
01990                         <span class="keywordflow">break</span>;
01991                     }
01992                 }
01993                 <span class="keywordflow">if</span> (destination.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a11">PointToPointLink</a>) {
01994                     <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetNeighborByID (destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01995                     <span class="keywordflow">if</span> (neighbor != NULL) {
01996                         NextHop nextHop;
01997                         nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01998                         nextHop.hopAddress        = neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> ();
01999                         nextHop.advertisingRouter = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
02000                         hops-&gt;push_back (nextHop);
02001                         <span class="keywordflow">break</span>;
02002                     }
02003                 }
02004             }
02005             <span class="comment">// next hops for virtual links are generated later, after examining transit areas' SummaryLSAs</span>
02006         }
02007 
02008         <span class="keywordflow">if</span> (hops-&gt;size () == 0) {
02009             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> hostRouteCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a>.size ();
02010             <span class="keywordflow">for</span> (i = 0; i &lt; hostRouteCount; i++) {
02011                 <span class="keywordflow">if</span> ((destination.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (hostRoutes[i].address)) &amp;&amp;
02012                     (destination.<a class="code" href="class_link.html#a9">getLinkData</a> () == 0xFFFFFFFF))
02013                 {
02014                     NextHop nextHop;
02015                     nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a>[i].ifIndex;
02016                     nextHop.hopAddress        = <a class="code" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a>[i].address;
02017                     nextHop.advertisingRouter = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
02018                     hops-&gt;push_back (nextHop);
02019                     <span class="keywordflow">break</span>;
02020                 }
02021             }
02022         }
02023     }
02024 
02025     <span class="keywordflow">return</span> hops;
02026 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="OSPF::Area::CalculateNextHops"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="struct_o_s_p_f_1_1_next_hop.html">OSPF::NextHop</a> &gt; * OSPF::Area::CalculateNextHops           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parent</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01798 {
01799     std::vector&lt;OSPF::NextHop&gt;* hops = <span class="keyword">new</span> std::vector&lt;OSPF::NextHop&gt;;
01800     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>               i, j;
01801 
01802     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (parent);
01803     <span class="keywordflow">if</span> (routerLSA != NULL) {
01804         <span class="keywordflow">if</span> (routerLSA != spfTreeRoot) {
01805             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a5">GetNextHopCount</a> ();
01806             <span class="keywordflow">for</span> (i = 0; i &lt; nextHopCount; i++) {
01807                 hops-&gt;push_back (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (i));
01808             }
01809             <span class="keywordflow">return</span> hops;
01810         } <span class="keywordflow">else</span> {
01811             <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* destinationRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (destination);
01812             <span class="keywordflow">if</span> (destinationRouterLSA != NULL) {
01813                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> interfaceNum   = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
01814                 <span class="keywordflow">for</span> (i = 0; i &lt; interfaceNum; i++) {
01815                     <a class="code" href="class_o_s_p_f_1_1_interface.html#w23">OSPF::Interface::OSPFInterfaceType</a> intfType = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetType ();
01816                     <span class="keywordflow">if</span> ((intfType == OSPF::Interface::PointToPoint) ||
01817                         ((intfType == OSPF::Interface::Virtual) &amp;&amp;
01818                          (associatedInterfaces[i]-&gt;GetState () &gt; OSPF::Interface::LoopbackState)))
01819                     {
01820                         <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* ptpNeighbor = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetNeighbor (0);
01821                         <span class="keywordflow">if</span> (ptpNeighbor != NULL) {
01822                             <span class="keywordflow">if</span> (ptpNeighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a30">GetNeighborID</a> () == destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) {
01823                                 NextHop nextHop;
01824                                 nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01825                                 nextHop.hopAddress        = ptpNeighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> ();
01826                                 nextHop.advertisingRouter = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01827                                 hops-&gt;push_back (nextHop);
01828                                 <span class="keywordflow">break</span>;
01829                             }
01830                         }
01831                     }
01832                     <span class="keywordflow">if</span> (intfType == OSPF::Interface::PointToMultiPoint) {
01833                         <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* ptmpNeighbor = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetNeighborByID (destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
01834                         <span class="keywordflow">if</span> (ptmpNeighbor != NULL) {
01835                             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   linkCount = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
01836                             OSPF::RouterID rootID    = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01837                             <span class="keywordflow">for</span> (j = 0; j &lt; linkCount; j++) {
01838                                 <a class="code" href="class_link.html">Link</a>&amp; link = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (j);
01839                                 <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == rootID) {
01840                                     NextHop nextHop;
01841                                     nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01842                                     nextHop.hopAddress        = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (link.<a class="code" href="class_link.html#a9">getLinkData</a> ());
01843                                     nextHop.advertisingRouter = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01844                                     hops-&gt;push_back (nextHop);
01845                                 }
01846                             }
01847                             <span class="keywordflow">break</span>;
01848                         }
01849                     }
01850                 }
01851             } <span class="keywordflow">else</span> {
01852                 <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* destinationNetworkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (destination);
01853                 <span class="keywordflow">if</span> (destinationNetworkLSA != NULL) {
01854                     <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a> networkDesignatedRouter = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (destinationNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
01855                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     interfaceNum            = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
01856                     <span class="keywordflow">for</span> (i = 0; i &lt; interfaceNum; i++) {
01857                         <a class="code" href="class_o_s_p_f_1_1_interface.html#w23">OSPF::Interface::OSPFInterfaceType</a> intfType = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetType ();
01858                         <span class="keywordflow">if</span> (((intfType == OSPF::Interface::Broadcast) ||
01859                              (intfType == OSPF::Interface::NBMA)) &amp;&amp;
01860                             (associatedInterfaces[i]-&gt;GetDesignatedRouter ().ipInterfaceAddress == networkDesignatedRouter))
01861                         {
01862                             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> range = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetAddressRange ();
01863                             NextHop                nextHop;
01864 
01865                             nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;GetIfIndex ();
01866                             nextHop.hopAddress        = (range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>);
01867                             nextHop.advertisingRouter = destinationNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01868                             hops-&gt;push_back (nextHop);
01869                         }
01870                     }
01871                 }
01872             }
01873         }
01874     } <span class="keywordflow">else</span> {
01875         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* networkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (parent);
01876         <span class="keywordflow">if</span> (networkLSA != NULL) {
01877             <span class="keywordflow">if</span> (networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a10">GetParent</a> () != <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a>) {
01878                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a5">GetNextHopCount</a> ();
01879                 <span class="keywordflow">for</span> (i = 0; i &lt; nextHopCount; i++) {
01880                     hops-&gt;push_back (networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (i));
01881                 }
01882                 <span class="keywordflow">return</span> hops;
01883             } <span class="keywordflow">else</span> {
01884                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> parentLinkStateID = parent-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01885 
01886                 <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* destinationRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (destination);
01887                 <span class="keywordflow">if</span> (destinationRouterLSA != NULL) {
01888                     OSPF::RouterID destinationRouterID = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01889                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   linkCount           = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
01890                     <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
01891                         <a class="code" href="class_link.html">Link</a>&amp;   link = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
01892                         NextHop nextHop;
01893 
01894                         <span class="keywordflow">if</span> (((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>) &amp;&amp;
01895                              (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == parentLinkStateID)) ||
01896                             ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a13">StubLink</a>) &amp;&amp;
01897                              ((link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; link.<a class="code" href="class_link.html#a9">getLinkData</a> ()) == (parentLinkStateID &amp; networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))))
01898                         {
01899                             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> interfaceNum   = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
01900                             <span class="keywordflow">for</span> (j = 0; j &lt; interfaceNum; j++) {
01901                                 <a class="code" href="class_o_s_p_f_1_1_interface.html#w23">OSPF::Interface::OSPFInterfaceType</a> intfType = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[j]-&gt;GetType ();
01902                                 <span class="keywordflow">if</span> (((intfType == OSPF::Interface::Broadcast) ||
01903                                      (intfType == OSPF::Interface::NBMA)) &amp;&amp;
01904                                     (associatedInterfaces[j]-&gt;GetDesignatedRouter ().ipInterfaceAddress == IPv4AddressFromULong (parentLinkStateID)))
01905                                 {
01906                                     <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* nextHopNeighbor = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[j]-&gt;GetNeighborByID (destinationRouterID);
01907                                     <span class="keywordflow">if</span> (nextHopNeighbor != NULL) {
01908                                         nextHop.ifIndex           = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[j]-&gt;GetIfIndex ();
01909                                         nextHop.hopAddress        = nextHopNeighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> ();
01910                                         nextHop.advertisingRouter = destinationRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01911                                         hops-&gt;push_back (nextHop);
01912                                     }
01913                                 }
01914                             }
01915                         }
01916                     }
01917                 }
01918             }
01919         }
01920     }
01921 
01922     <span class="keywordflow">return</span> hops;
01923 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="OSPF::Area::CalculateShortestPathTree"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::CalculateShortestPathTree           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>newRoutingTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01321 {
01322     OSPF::RouterID          routerID = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01323     <span class="keywordtype">bool</span>                    finished = <span class="keyword">false</span>;
01324     std::vector&lt;OSPFLSA*&gt;   treeVertices;
01325     <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>*                justAddedVertex;
01326     std::vector&lt;OSPFLSA*&gt;   candidateVertices;
01327     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            i, j, k;
01328     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            lsaCount;
01329 
01330     <span class="keywordflow">if</span> (spfTreeRoot == NULL) {
01331         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a52">OriginateRouterLSA</a> ();
01332 
01333         <a class="code" href="class_o_s_p_f_1_1_area.html#a37">InstallRouterLSA</a> (newLSA);
01334 
01335         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a40">FindRouterLSA</a> (routerID);
01336 
01337         <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a> = routerLSA;
01338         <a class="code" href="class_o_s_p_f_1_1_area.html#a50">FloodLSA</a> (newLSA);
01339         <span class="keyword">delete</span> newLSA;
01340     }
01341     <span class="keywordflow">if</span> (spfTreeRoot == NULL) {
01342         <span class="keywordflow">return</span>;
01343     }
01344 
01345     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.size ();
01346     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
01347         <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i]-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a4">ClearNextHops</a> ();
01348     }
01349     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.size ();
01350     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
01351         <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i]-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a4">ClearNextHops</a> ();
01352     }
01353     <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (0);
01354     treeVertices.push_back (spfTreeRoot);
01355     justAddedVertex = <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a>;          <span class="comment">// (1)</span>
01356 
01357     <span class="keywordflow">do</span> {
01358         <a class="code" href="_o_s_p_f_packet__m_8h.html#a54">LSAType</a> vertexType = static_cast&lt;LSAType&gt; (justAddedVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> ());
01359 
01360         <span class="keywordflow">if</span> ((vertexType == RouterLSAType)) {
01361             <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerVertex = check_and_cast&lt;OSPF::RouterLSA*&gt; (justAddedVertex);
01362             <span class="keywordflow">if</span> (routerVertex-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a6">getV_VirtualLinkEndpoint</a> ()) {    <span class="comment">// (2)</span>
01363                 <a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a> = <span class="keyword">true</span>;
01364             }
01365 
01366             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> linkCount = routerVertex-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
01367             <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
01368                 <a class="code" href="class_link.html">Link</a>&amp;    link     = routerVertex-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
01369                 <a class="code" href="_o_s_p_f_packet__m_8h.html#a55">LinkType</a> linkType = static_cast&lt;LinkType&gt; (link.<a class="code" href="class_link.html#a11">getType</a> ());
01370                 <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>* joiningVertex;
01371                 <a class="code" href="_o_s_p_f_packet__m_8h.html#a54">LSAType</a>  joiningVertexType;
01372 
01373                 <span class="keywordflow">if</span> (linkType == StubLink) {     <span class="comment">// (2) (a)</span>
01374                     <span class="keywordflow">continue</span>;
01375                 }
01376 
01377                 <span class="keywordflow">if</span> (linkType == TransitLink) {
01378                     joiningVertex     = <a class="code" href="class_o_s_p_f_1_1_area.html#a42">FindNetworkLSA</a> (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01379                     joiningVertexType = <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a7">NetworkLSAType</a>;
01380                 } <span class="keywordflow">else</span> {
01381                     joiningVertex     = <a class="code" href="class_o_s_p_f_1_1_area.html#a40">FindRouterLSA</a> (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01382                     joiningVertexType = <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a6">RouterLSAType</a>;
01383                 }
01384 
01385                 <span class="keywordflow">if</span> ((joiningVertex == NULL) ||
01386                     (joiningVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a3">MAX_AGE</a>) ||
01387                     (!<a class="code" href="class_o_s_p_f_1_1_area.html#d1">HasLink</a> (joiningVertex, justAddedVertex)))  <span class="comment">// (from, to)     (2) (b)</span>
01388                 {
01389                     <span class="keywordflow">continue</span>;
01390                 }
01391 
01392                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> treeSize      = treeVertices.size ();
01393                 <span class="keywordtype">bool</span>         alreadyOnTree = <span class="keyword">false</span>;
01394 
01395                 <span class="keywordflow">for</span> (j = 0; j &lt; treeSize; j++) {
01396                     <span class="keywordflow">if</span> (treeVertices[j] == joiningVertex) {
01397                         alreadyOnTree = <span class="keyword">true</span>;
01398                         <span class="keywordflow">break</span>;
01399                     }
01400                 }
01401                 <span class="keywordflow">if</span> (alreadyOnTree) {    <span class="comment">// (2) (c)</span>
01402                     <span class="keywordflow">continue</span>;
01403                 }
01404 
01405                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> linkStateCost  = routerVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> () + link.<a class="code" href="class_link.html#a15">getLinkCost</a> ();
01406                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  candidateCount = candidateVertices.size ();
01407                 <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>*      candidate      = NULL;
01408 
01409                 <span class="keywordflow">for</span> (j = 0; j &lt; candidateCount; j++) {
01410                     <span class="keywordflow">if</span> (candidateVertices[j] == joiningVertex) {
01411                         candidate = candidateVertices[j];
01412                     }
01413                 }
01414                 <span class="keywordflow">if</span> (candidate != NULL) {    <span class="comment">// (2) (d)</span>
01415                     <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* routingInfo       = check_and_cast&lt;OSPF::RoutingInfo*&gt; (candidate);
01416                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>      candidateDistance = routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ();
01417 
01418                     <span class="keywordflow">if</span> (linkStateCost &gt; candidateDistance) {
01419                         <span class="keywordflow">continue</span>;
01420                     }
01421                     <span class="keywordflow">if</span> (linkStateCost &lt; candidateDistance) {
01422                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (linkStateCost);
01423                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a4">ClearNextHops</a> ();
01424                     }
01425                     std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (joiningVertex, justAddedVertex); <span class="comment">// (destination, parent)</span>
01426                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01427                     <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01428                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a3">AddNextHop</a> ((*newNextHops)[k]);
01429                     }
01430                     <span class="keyword">delete</span> newNextHops;
01431                 } <span class="keywordflow">else</span> {
01432                     <span class="keywordflow">if</span> (joiningVertexType == RouterLSAType) {
01433                         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* joiningRouterVertex = check_and_cast&lt;OSPF::RouterLSA*&gt; (joiningVertex);
01434                         joiningRouterVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (linkStateCost);
01435                         std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (joiningVertex, justAddedVertex); <span class="comment">// (destination, parent)</span>
01436                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01437                         <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01438                             joiningRouterVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a3">AddNextHop</a> ((*newNextHops)[k]);
01439                         }
01440                         <span class="keyword">delete</span> newNextHops;
01441                         <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* vertexRoutingInfo = check_and_cast&lt;OSPF::RoutingInfo*&gt; (joiningRouterVertex);
01442                         vertexRoutingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a9">SetParent</a> (justAddedVertex);
01443 
01444                         candidateVertices.push_back (joiningRouterVertex);
01445                     } <span class="keywordflow">else</span> {
01446                         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* joiningNetworkVertex = check_and_cast&lt;OSPF::NetworkLSA*&gt; (joiningVertex);
01447                         joiningNetworkVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (linkStateCost);
01448                         std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (joiningVertex, justAddedVertex); <span class="comment">// (destination, parent)</span>
01449                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01450                         <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01451                             joiningNetworkVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a3">AddNextHop</a> ((*newNextHops)[k]);
01452                         }
01453                         <span class="keyword">delete</span> newNextHops;
01454                         <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* vertexRoutingInfo = check_and_cast&lt;OSPF::RoutingInfo*&gt; (joiningNetworkVertex);
01455                         vertexRoutingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a9">SetParent</a> (justAddedVertex);
01456 
01457                         candidateVertices.push_back (joiningNetworkVertex);
01458                     }
01459                 }
01460             }
01461         }
01462 
01463         <span class="keywordflow">if</span> ((vertexType == NetworkLSAType)) {
01464             <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* networkVertex = check_and_cast&lt;OSPF::NetworkLSA*&gt; (justAddedVertex);
01465             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>      routerCount   = networkVertex-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a10">getAttachedRoutersArraySize</a> ();
01466 
01467             <span class="keywordflow">for</span> (i = 0; i &lt; routerCount; i++) {     <span class="comment">// (2)</span>
01468                 <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* joiningVertex = <a class="code" href="class_o_s_p_f_1_1_area.html#a40">FindRouterLSA</a> (networkVertex-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a11">getAttachedRouters</a> (i).<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01469                 <span class="keywordflow">if</span> ((joiningVertex == NULL) ||
01470                     (joiningVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> () == <a class="code" href="_o_s_p_fcommon_8h.html#a3">MAX_AGE</a>) ||
01471                     (!<a class="code" href="class_o_s_p_f_1_1_area.html#d1">HasLink</a> (joiningVertex, justAddedVertex)))  <span class="comment">// (from, to)     (2) (b)</span>
01472                 {
01473                     <span class="keywordflow">continue</span>;
01474                 }
01475 
01476                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> treeSize      = treeVertices.size ();
01477                 <span class="keywordtype">bool</span>         alreadyOnTree = <span class="keyword">false</span>;
01478 
01479                 <span class="keywordflow">for</span> (j = 0; j &lt; treeSize; j++) {
01480                     <span class="keywordflow">if</span> (treeVertices[j] == joiningVertex) {
01481                         alreadyOnTree = <span class="keyword">true</span>;
01482                         <span class="keywordflow">break</span>;
01483                     }
01484                 }
01485                 <span class="keywordflow">if</span> (alreadyOnTree) {    <span class="comment">// (2) (c)</span>
01486                     <span class="keywordflow">continue</span>;
01487                 }
01488 
01489                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> linkStateCost  = networkVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ();   <span class="comment">// link cost from network to router is always 0</span>
01490                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  candidateCount = candidateVertices.size ();
01491                 <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>*      candidate      = NULL;
01492 
01493                 <span class="keywordflow">for</span> (j = 0; j &lt; candidateCount; j++) {
01494                     <span class="keywordflow">if</span> (candidateVertices[j] == joiningVertex) {
01495                         candidate = candidateVertices[j];
01496                     }
01497                 }
01498                 <span class="keywordflow">if</span> (candidate != NULL) {    <span class="comment">// (2) (d)</span>
01499                     <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* routingInfo       = check_and_cast&lt;OSPF::RoutingInfo*&gt; (candidate);
01500                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>      candidateDistance = routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ();
01501 
01502                     <span class="keywordflow">if</span> (linkStateCost &gt; candidateDistance) {
01503                         <span class="keywordflow">continue</span>;
01504                     }
01505                     <span class="keywordflow">if</span> (linkStateCost &lt; candidateDistance) {
01506                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (linkStateCost);
01507                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a4">ClearNextHops</a> ();
01508                     }
01509                     std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (joiningVertex, justAddedVertex); <span class="comment">// (destination, parent)</span>
01510                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01511                     <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01512                         routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a3">AddNextHop</a> ((*newNextHops)[k]);
01513                     }
01514                     <span class="keyword">delete</span> newNextHops;
01515                 } <span class="keywordflow">else</span> {
01516                     joiningVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a7">SetDistance</a> (linkStateCost);
01517                     std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (joiningVertex, justAddedVertex); <span class="comment">// (destination, parent)</span>
01518                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01519                     <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01520                         joiningVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a3">AddNextHop</a> ((*newNextHops)[k]);
01521                     }
01522                     <span class="keyword">delete</span> newNextHops;
01523                     <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* vertexRoutingInfo = check_and_cast&lt;OSPF::RoutingInfo*&gt; (joiningVertex);
01524                     vertexRoutingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a9">SetParent</a> (justAddedVertex);
01525 
01526                     candidateVertices.push_back (joiningVertex);
01527                 }
01528             }
01529         }
01530 
01531         <span class="keywordflow">if</span> (candidateVertices.empty ()) {  <span class="comment">// (3)</span>
01532             finished = <span class="keyword">true</span>;
01533         } <span class="keywordflow">else</span> {
01534             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  candidateCount = candidateVertices.size ();
01535             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> minDistance = <a class="code" href="_o_s_p_fcommon_8h.html#a6">LS_INFINITY</a>;
01536             <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>*      closestVertex = candidateVertices[0];
01537 
01538             <span class="keywordflow">for</span> (i = 0; i &lt; candidateCount; i++) {
01539                 <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* routingInfo     = check_and_cast&lt;OSPF::RoutingInfo*&gt; (candidateVertices[i]);
01540                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>      currentDistance = routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ();
01541 
01542                 <span class="keywordflow">if</span> (currentDistance &lt; minDistance) {
01543                     closestVertex = candidateVertices[i];
01544                     minDistance = currentDistance;
01545                 } <span class="keywordflow">else</span> {
01546                     <span class="keywordflow">if</span> (currentDistance == minDistance) {
01547                         <span class="keywordflow">if</span> ((closestVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a6">RouterLSAType</a>) &amp;&amp;
01548                             (candidateVertices[i]-&gt;getHeader ().getLsType () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a7">NetworkLSAType</a>))
01549                         {
01550                             closestVertex = candidateVertices[i];
01551                         }
01552                     }
01553                 }
01554             }
01555 
01556             treeVertices.push_back (closestVertex);
01557 
01558             <span class="keywordflow">for</span> (std::vector&lt;OSPFLSA*&gt;::iterator it = candidateVertices.begin (); it != candidateVertices.end (); it++) {
01559                 <span class="keywordflow">if</span> ((*it) == closestVertex) {
01560                     candidateVertices.erase (it);
01561                     <span class="keywordflow">break</span>;
01562                 }
01563             }
01564 
01565             <span class="keywordflow">if</span> (closestVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a6">RouterLSAType</a>) {
01566                 <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerLSA = check_and_cast&lt;OSPF::RouterLSA*&gt; (closestVertex);
01567                 <span class="keywordflow">if</span> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a10">getB_AreaBorderRouter</a> () || routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a8">getE_ASBoundaryRouter</a> ()) {
01568                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>*                        entry           = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
01569                     OSPF::RouterID                                  destinationID   = routerLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01570                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                                    nextHopCount    = routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a5">GetNextHopCount</a> ();
01571                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w0">OSPF::RoutingTableEntry::RoutingDestinationType</a> destinationType = <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>;
01572 
01573                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (destinationID);
01574                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (routerLSA);
01575                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (areaID);
01576                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (OSPF::RoutingTableEntry::IntraArea);
01577                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ());
01578                     <span class="keywordflow">if</span> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a10">getB_AreaBorderRouter</a> ()) {
01579                         destinationType |= <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>;
01580                     }
01581                     <span class="keywordflow">if</span> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a8">getE_ASBoundaryRouter</a> ()) {
01582                         destinationType |= <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>;
01583                     }
01584                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (destinationType);
01585                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
01586                     <span class="keywordflow">for</span> (i = 0; i &lt; nextHopCount; i++) {
01587                         entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (i));
01588                     }
01589 
01590                     newRoutingTable.push_back (entry);
01591 
01592                     <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* backbone;
01593                     <span class="keywordflow">if</span> (areaID != OSPF::BackboneAreaID) {
01594                         backbone = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetArea (OSPF::BackboneAreaID);
01595                     } <span class="keywordflow">else</span> {
01596                         backbone = <span class="keyword">this</span>;
01597                     }
01598                     <span class="keywordflow">if</span> (backbone != NULL) {
01599                         <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* virtualIntf = backbone-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a36">FindVirtualLink</a> (destinationID);
01600                         <span class="keywordflow">if</span> ((virtualIntf != NULL) &amp;&amp; (virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a27">GetTransitAreaID</a> () == <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>)) {
01601                             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> range;
01602                             range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#a33">GetInterface</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (0).ifIndex)-&gt;GetAddressRange ().<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>;
01603                             range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (0xFFFFFFFF);
01604                             virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a48">SetAddressRange</a> (range);
01605                             virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a20">SetIfIndex</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (0).ifIndex);
01606                             virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a28">SetOutputCost</a> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ());
01607                             <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* virtualNeighbor = virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a56">GetNeighbor</a> (0);
01608                             <span class="keywordflow">if</span> (virtualNeighbor != NULL) {
01609                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     linkCount   = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
01610                                 <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* toRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (justAddedVertex);
01611                                 <span class="keywordflow">if</span> (toRouterLSA != NULL) {
01612                                     <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
01613                                         <a class="code" href="class_link.html">Link</a>&amp; link = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
01614 
01615                                         <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a11">PointToPointLink</a>) &amp;&amp;
01616                                             (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == toRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) &amp;&amp;
01617                                             (virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () &lt; <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w17">OSPF::Interface::WaitingState</a>))
01618                                         {
01619                                             virtualNeighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a33">SetAddress</a> (IPv4AddressFromULong (link.<a class="code" href="class_link.html#a9">getLinkData</a> ()));
01620                                             virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a2">ProcessEvent</a> (OSPF::Interface::InterfaceUp);
01621                                             <span class="keywordflow">break</span>;
01622                                         }
01623                                     }
01624                                 } <span class="keywordflow">else</span> {
01625                                     <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* toNetworkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (justAddedVertex);
01626                                     <span class="keywordflow">if</span> (toNetworkLSA != NULL) {
01627                                         <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
01628                                             <a class="code" href="class_link.html">Link</a>&amp; link = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
01629 
01630                                             <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>) &amp;&amp;
01631                                                 (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == toNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) &amp;&amp;
01632                                                 (virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () &lt; <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w17">OSPF::Interface::WaitingState</a>))
01633                                             {
01634                                                 virtualNeighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a33">SetAddress</a> (IPv4AddressFromULong (link.<a class="code" href="class_link.html#a9">getLinkData</a> ()));
01635                                                 virtualIntf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a2">ProcessEvent</a> (OSPF::Interface::InterfaceUp);
01636                                                 <span class="keywordflow">break</span>;
01637                                             }
01638                                         }
01639                                     }
01640                                 }
01641                             }
01642                         }
01643                     }
01644                 }
01645             }
01646 
01647             <span class="keywordflow">if</span> (closestVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a7">NetworkLSAType</a>) {
01648                 <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>*        networkLSA    = check_and_cast&lt;OSPF::NetworkLSA*&gt; (closestVertex);
01649                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            destinationID = (networkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a>().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01650                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>             nextHopCount  = networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a5">GetNextHopCount</a> ();
01651                 <span class="keywordtype">bool</span>                     overWrite     = <span class="keyword">false</span>;
01652                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry         = NULL;
01653                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            routeCount    = newRoutingTable.size ();
01654                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            longestMatch  = 0;
01655 
01656                 <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
01657                     <span class="keywordflow">if</span> (newRoutingTable[i]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) {
01658                         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = newRoutingTable[i];
01659                         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryAddress = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01660                         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryMask    = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01661 
01662                         <span class="keywordflow">if</span> ((entryAddress &amp; entryMask) == (destinationID &amp; entryMask)) {
01663                             <span class="keywordflow">if</span> ((destinationID &amp; entryMask) &gt; longestMatch) {
01664                                 longestMatch = (destinationID &amp; entryMask);
01665                                 entry        = routingEntry;
01666                             }
01667                         }
01668                     }
01669                 }
01670                 <span class="keywordflow">if</span> (entry != NULL) {
01671                     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>* entryOrigin = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a22">GetLinkStateOrigin</a> ();
01672                     <span class="keywordflow">if</span> ((entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () != networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ()) ||
01673                         (entryOrigin-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &gt;= networkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a>().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()))
01674                     {
01675                         overWrite = <span class="keyword">true</span>;
01676                     }
01677                 }
01678 
01679                 <span class="keywordflow">if</span> ((entry == NULL) || (overWrite)) {
01680                     <span class="keywordflow">if</span> (entry == NULL) {
01681                         entry = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
01682                     }
01683 
01684                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (destinationID);
01685                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ());
01686                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (networkLSA);
01687                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (areaID);
01688                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (OSPF::RoutingTableEntry::IntraArea);
01689                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> ());
01690                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
01691                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (networkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
01692                     <span class="keywordflow">for</span> (i = 0; i &lt; nextHopCount; i++) {
01693                         entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (networkLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a6">GetNextHop</a> (i));
01694                     }
01695 
01696                     <span class="keywordflow">if</span> (!overWrite) {
01697                         newRoutingTable.push_back (entry);
01698                     }
01699                 }
01700             }
01701 
01702             justAddedVertex = closestVertex;
01703         }
01704     } <span class="keywordflow">while</span> (!finished);
01705 
01706     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> treeSize      = treeVertices.size ();
01707     <span class="keywordflow">for</span> (i = 0; i &lt; treeSize; i++) {
01708         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerVertex = dynamic_cast&lt;OSPF::RouterLSA*&gt; (treeVertices[i]);
01709         <span class="keywordflow">if</span> (routerVertex == NULL) {
01710             <span class="keywordflow">continue</span>;
01711         }
01712 
01713         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> linkCount = routerVertex-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
01714         <span class="keywordflow">for</span> (j = 0; j &lt; linkCount; j++) {
01715             <a class="code" href="class_link.html">Link</a>&amp;    link     = routerVertex-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (j);
01716             <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a11">getType</a> () != <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a13">StubLink</a>) {
01717                 <span class="keywordflow">continue</span>;
01718             }
01719 
01720             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            distance      = routerVertex-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a8">GetDistance</a> () + link.<a class="code" href="class_link.html#a15">getLinkCost</a> ();
01721             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            destinationID = (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; link.<a class="code" href="class_link.html#a9">getLinkData</a> ());
01722             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry         = NULL;
01723             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            routeCount    = newRoutingTable.size ();
01724             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            longestMatch  = 0;
01725 
01726             <span class="keywordflow">for</span> (k = 0; k &lt; routeCount; k++) {
01727                 <span class="keywordflow">if</span> (newRoutingTable[k]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) {
01728                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = newRoutingTable[k];
01729                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryAddress = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01730                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryMask    = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01731 
01732                     <span class="keywordflow">if</span> ((entryAddress &amp; entryMask) == (destinationID &amp; entryMask)) {
01733                         <span class="keywordflow">if</span> ((destinationID &amp; entryMask) &gt; longestMatch) {
01734                             longestMatch = (destinationID &amp; entryMask);
01735                             entry        = routingEntry;
01736                         }
01737                     }
01738                 }
01739             }
01740 
01741             <span class="keywordflow">if</span> (entry != NULL) {
01742                 <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a> entryCost = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
01743 
01744                 <span class="keywordflow">if</span> (distance &gt; entryCost) {
01745                     <span class="keywordflow">continue</span>;
01746                 }
01747                 <span class="keywordflow">if</span> (distance &lt; entryCost) {
01748                     <span class="comment">//FIXME remove</span>
01749                     <span class="comment">//if (parentRouter-&gt;GetRouterID () == 0xC0A80302) {</span>
01750                     <span class="comment">//    EV &lt;&lt; "CHEAPER STUB LINK FOUND TO " &lt;&lt; IPAddress (destinationID).str () &lt;&lt; "\n";</span>
01751                     <span class="comment">//}</span>
01752                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (distance);
01753                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a24">ClearNextHops</a> ();
01754                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (routerVertex);
01755                 }
01756                 <span class="keywordflow">if</span> (distance == entryCost) {
01757                     <span class="comment">// no const version from check_and_cast</span>
01758                     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerOrigin = check_and_cast&lt;OSPF::RouterLSA*&gt; (const_cast&lt;OSPFLSA*&gt; (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a22">GetLinkStateOrigin</a> ()));
01759                     <span class="keywordflow">if</span> (routerOrigin-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &lt; routerVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) {
01760                         entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (routerVertex);
01761                     }
01762                 }
01763                 std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (link, routerVertex); <span class="comment">// (destination, parent)</span>
01764                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01765                 <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01766                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> ((*newNextHops)[k]);
01767                 }
01768                 <span class="keyword">delete</span> newNextHops;
01769             } <span class="keywordflow">else</span> {
01770                 <span class="comment">//FIXME remove</span>
01771                 <span class="comment">//if (parentRouter-&gt;GetRouterID () == 0xC0A80302) {</span>
01772                 <span class="comment">//    EV &lt;&lt; "STUB LINK FOUND TO " &lt;&lt; IPAddress (destinationID).str () &lt;&lt; "\n";</span>
01773                 <span class="comment">//}</span>
01774                 entry = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
01775 
01776                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (destinationID);
01777                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (link.<a class="code" href="class_link.html#a9">getLinkData</a> ());
01778                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (routerVertex);
01779                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (areaID);
01780                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (OSPF::RoutingTableEntry::IntraArea);
01781                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (distance);
01782                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
01783                 entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (routerVertex-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
01784                 std::vector&lt;OSPF::NextHop&gt;* newNextHops = <a class="code" href="class_o_s_p_f_1_1_area.html#d2">CalculateNextHops</a> (link, routerVertex); <span class="comment">// (destination, parent)</span>
01785                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = newNextHops-&gt;size ();
01786                 <span class="keywordflow">for</span> (k = 0; k &lt; nextHopCount; k++) {
01787                     entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> ((*newNextHops)[k]);
01788                 }
01789                 <span class="keyword">delete</span> newNextHops;
01790 
01791                 newRoutingTable.push_back (entry);
01792             }
01793         }
01794     }
01795 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="OSPF::Area::ContainsAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::ContainsAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00101 {
00102     <span class="keywordtype">int</span> addressRangeNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.size ();
00103     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; addressRangeNum; i++) {
00104         <span class="keywordflow">if</span> ((areaAddressRanges[i].address &amp; areaAddressRanges[i].mask) == (address &amp; areaAddressRanges[i].mask)) {
00105             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00106         }
00107     }
00108     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00109 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="OSPF::Area::CreateRoutingTableEntryFromSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * OSPF::Area::CreateRoutingTableEntryFromSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>summaryLSA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>entryCost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>borderRouterEntry</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a new <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> based on the input <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>, with the input cost and the borderRouterEntry's next hops. <div class="fragment"><pre class="fragment">02156 {
02157     <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destination;
02158 
02159     destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (summaryLSA.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
02160     destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (summaryLSA.<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
02161 
02162     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* newEntry = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
02163 
02164     <span class="keywordflow">if</span> (summaryLSA.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>) {
02165         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (ULongFromIPv4Address (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>));
02166         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (ULongFromIPv4Address (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>));
02167         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
02168     } <span class="keywordflow">else</span> {
02169         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (ULongFromIPv4Address (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>));
02170         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (0xFFFFFFFF);
02171         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::ASBoundaryRouterDestination);
02172     }
02173     newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (areaID);
02174     newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (OSPF::RoutingTableEntry::InterArea);
02175     newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (entryCost);
02176     newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (summaryLSA.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
02177     newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (&amp;summaryLSA);
02178 
02179     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount = borderRouterEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a25">GetNextHopCount</a> ();
02180     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; nextHopCount; j++) {
02181         newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (borderRouterEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j));
02182     }
02183 
02184     <span class="keywordflow">return</span> newEntry;
02185 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="OSPF::Area::detailedInfo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::string OSPF::Area::detailedInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00056 {
00057     std::stringstream out;
00058     <span class="keywordtype">char</span> addressString[16];
00059     <span class="keywordtype">int</span> i;
00060     out &lt;&lt; <span class="stringliteral">"\n    areaID: "</span> &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, 16, areaID) &lt;&lt; <span class="stringliteral">", "</span>;
00061     out &lt;&lt; <span class="stringliteral">"transitCapability: "</span> &lt;&lt; (<a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a> ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>) &lt;&lt; <span class="stringliteral">", "</span>;
00062     out &lt;&lt; <span class="stringliteral">"externalRoutingCapability: "</span> &lt;&lt; (<a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a> ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>) &lt;&lt; <span class="stringliteral">", "</span>;
00063     out &lt;&lt; <span class="stringliteral">"stubDefaultCost: "</span> &lt;&lt; <a class="code" href="class_o_s_p_f_1_1_area.html#r13">stubDefaultCost</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00064     <span class="keywordtype">int</span> addressRangeNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.size ();
00065     <span class="keywordflow">for</span> (i = 0; i &lt; addressRangeNum; i++) {
00066         out &lt;&lt; <span class="stringliteral">"    addressRanges["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"]: "</span>;
00067         out &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, 16, areaAddressRanges[i].address);
00068         out &lt;&lt; <span class="stringliteral">"/"</span> &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, 16, areaAddressRanges[i].mask) &lt;&lt; <span class="stringliteral">"\n"</span>;
00069     }
00070     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00071     <span class="keywordflow">for</span> (i = 0; i &lt; interfaceNum; i++) {
00072         out &lt;&lt; <span class="stringliteral">"    interface["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"]: addressRange: "</span>;
00073         out &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, 16, associatedInterfaces[i]-&gt;GetAddressRange ().address);
00074         out &lt;&lt; <span class="stringliteral">"/"</span> &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, 16, associatedInterfaces[i]-&gt;GetAddressRange ().mask) &lt;&lt; <span class="stringliteral">"\n"</span>;
00075     }
00076 
00077     out &lt;&lt; <span class="stringliteral">"\n"</span>;
00078     out &lt;&lt; <span class="stringliteral">"    Database:\n"</span>;
00079     out &lt;&lt; <span class="stringliteral">"      RouterLSAs:\n"</span>;
00080     <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.size ();
00081     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00082         out &lt;&lt; <span class="stringliteral">"        "</span> &lt;&lt; *<a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i] &lt;&lt; <span class="stringliteral">"\n"</span>;
00083     }
00084     out &lt;&lt; <span class="stringliteral">"      NetworkLSAs:\n"</span>;
00085     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.size ();
00086     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00087         out &lt;&lt; <span class="stringliteral">"        "</span> &lt;&lt; *<a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i] &lt;&lt; <span class="stringliteral">"\n"</span>;
00088     }
00089     out &lt;&lt; <span class="stringliteral">"      SummaryLSAs:\n"</span>;
00090     lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size ();
00091     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
00092         out &lt;&lt; <span class="stringliteral">"        "</span> &lt;&lt; *<a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i] &lt;&lt; <span class="stringliteral">"\n"</span>;
00093     }
00094 
00095     out &lt;&lt; <span class="stringliteral">"--------------------------------------------------------------------------------"</span>;
00096 
00097     <span class="keywordflow">return</span> out.str();
00098 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="OSPF::Area::FindNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a> * OSPF::Area::FindNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>linkStateID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00298 {
00299     std::map&lt;OSPF::LinkStateID, OSPF::NetworkLSA*&gt;::const_iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.find (linkStateID);
00300     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.end ()) {
00301         <span class="keywordflow">return</span> lsaIt-&gt;second;
00302     } <span class="keywordflow">else</span> {
00303         <span class="keywordflow">return</span> NULL;
00304     }
00305 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="OSPF::Area::FindNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a> * OSPF::Area::FindNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>linkStateID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00288 {
00289     std::map&lt;OSPF::LinkStateID, OSPF::NetworkLSA*&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.find (linkStateID);
00290     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.end ()) {
00291         <span class="keywordflow">return</span> lsaIt-&gt;second;
00292     } <span class="keywordflow">else</span> {
00293         <span class="keywordflow">return</span> NULL;
00294     }
00295 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="OSPF::Area::FindRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a> * OSPF::Area::FindRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>linkStateID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00278 {
00279     std::map&lt;OSPF::LinkStateID, OSPF::RouterLSA*&gt;::const_iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.find (linkStateID);
00280     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.end ()) {
00281         <span class="keywordflow">return</span> lsaIt-&gt;second;
00282     } <span class="keywordflow">else</span> {
00283         <span class="keywordflow">return</span> NULL;
00284     }
00285 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="OSPF::Area::FindRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a> * OSPF::Area::FindRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>linkStateID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00268 {
00269     std::map&lt;OSPF::LinkStateID, OSPF::RouterLSA*&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.find (linkStateID);
00270     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.end ()) {
00271         <span class="keywordflow">return</span> lsaIt-&gt;second;
00272     } <span class="keywordflow">else</span> {
00273         <span class="keywordflow">return</span> NULL;
00274     }
00275 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="OSPF::Area::FindSameOrWorseCostRoute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::FindSameOrWorseCostRoute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>newRoutingTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>summaryLSA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>currentCost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>destinationInRoutingTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::list&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sameOrWorseCost</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Browse through the newRoutingTable looking for entries describing the same destination as the currentLSA. If a cheaper route is found then skip this LSA (return true), else note those which are of equal or worse cost than the currentCost. <div class="fragment"><pre class="fragment">02095 {
02096     destinationInRoutingTable = <span class="keyword">false</span>;
02097     sameOrWorseCost.clear ();
02098 
02099     <span class="keywordtype">long</span>                   routeCount = newRoutingTable.size ();
02100     <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destination;
02101 
02102     destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (summaryLSA.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
02103     destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (summaryLSA.<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
02104 
02105     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> j = 0; j &lt; routeCount; j++) {
02106         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry  = newRoutingTable[j];
02107         <span class="keywordtype">bool</span>                     foundMatching = <span class="keyword">false</span>;
02108 
02109         <span class="keywordflow">if</span> (summaryLSA.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>) {
02110             <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) &amp;&amp;
02111                 (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>) == routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))
02112             {
02113                 foundMatching = <span class="keyword">true</span>;
02114             }
02115         } <span class="keywordflow">else</span> {
02116             <span class="keywordflow">if</span> ((((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
02117                  ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0)) &amp;&amp;
02118                 (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>) == routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))
02119             {
02120                 foundMatching = <span class="keyword">true</span>;
02121             }
02122         }
02123 
02124         <span class="keywordflow">if</span> (foundMatching) {
02125             destinationInRoutingTable = <span class="keyword">true</span>;
02126 
02127             <span class="comment">/* If the matching entry is an IntraArea route (intra-area paths are</span>
02128 <span class="comment">                * always preferred to other paths of any cost), or it's a cheaper InterArea</span>
02129 <span class="comment">                * route, then skip this LSA.</span>
02130 <span class="comment">                */</span>
02131             <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) ||
02132                 ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w2">OSPF::RoutingTableEntry::InterArea</a>) &amp;&amp;
02133                  (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &lt; currentCost)))
02134             {
02135                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
02136             } <span class="keywordflow">else</span> {
02137                 <span class="comment">// if it's an other InterArea path</span>
02138                 <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w2">OSPF::RoutingTableEntry::InterArea</a>) &amp;&amp;
02139                     (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &gt;= currentCost))
02140                 {
02141                     sameOrWorseCost.push_back (routingEntry);
02142                 }   <span class="comment">// else it's external -&gt; same as if not in the table</span>
02143             }
02144         }
02145     }
02146     <span class="keywordflow">return</span> <span class="keyword">false</span>;
02147 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="OSPF::Area::FindSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> * OSPF::Area::FindSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00318 {
00319     std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::const_iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
00320     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
00321         <span class="keywordflow">return</span> lsaIt-&gt;second;
00322     } <span class="keywordflow">else</span> {
00323         <span class="keywordflow">return</span> NULL;
00324     }
00325 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="OSPF::Area::FindSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> * OSPF::Area::FindSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00308 {
00309     std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
00310     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
00311         <span class="keywordflow">return</span> lsaIt-&gt;second;
00312     } <span class="keywordflow">else</span> {
00313         <span class="keywordflow">return</span> NULL;
00314     }
00315 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="OSPF::Area::FindVirtualLink"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> * OSPF::Area::FindVirtualLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>routerID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00191 {
00192     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00193     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; interfaceNum; i++) {
00194         <span class="keywordflow">if</span> ((associatedInterfaces[i]-&gt;GetType () == OSPF::Interface::Virtual) &amp;&amp;
00195             (associatedInterfaces[i]-&gt;GetNeighborByID (routerID) != NULL))
00196         {
00197             <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i];
00198         }
00199     }
00200     <span class="keywordflow">return</span> NULL;
00201 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="OSPF::Area::FloodLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::FloodLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>intf</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>neighbor</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00650 {
00651     <span class="keywordtype">bool</span> floodedBackOut  = <span class="keyword">false</span>;
00652     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00653 
00654     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; interfaceCount; i++) {
00655         <span class="keywordflow">if</span> (associatedInterfaces[i]-&gt;FloodLSA (lsa, intf, neighbor)) {
00656             floodedBackOut = <span class="keyword">true</span>;
00657         }
00658     }
00659 
00660     <span class="keywordflow">return</span> floodedBackOut;
00661 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="OSPF::Area::GetAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> OSPF::Area::GetAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>index</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00042 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>[index]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="OSPF::Area::GetAddressRangeCount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int OSPF::Area::GetAddressRangeCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00041 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="OSPF::Area::GetAreaID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> OSPF::Area::GetAreaID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00039 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="OSPF::Area::GetContainingAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> OSPF::Area::GetContainingAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>addressRange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool *&nbsp;</td>
          <td class="mdname" nowrap> <em>advertise</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00125 {
00126     <span class="keywordtype">int</span> addressRangeNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.size ();
00127     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; addressRangeNum; i++) {
00128         <span class="keywordflow">if</span> ((areaAddressRanges[i].address &amp; areaAddressRanges[i].mask) == (addressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; areaAddressRanges[i].<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) {
00129             <span class="keywordflow">if</span> (advertise != NULL) {
00130                 std::map&lt;OSPF::IPv4AddressRange, bool, OSPF::IPv4AddressRange_Less&gt;::const_iterator rangeIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r1">advertiseAddressRanges</a>.find (areaAddressRanges[i]);
00131                 <span class="keywordflow">if</span> (rangeIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r1">advertiseAddressRanges</a>.end ()) {
00132                     *advertise = rangeIt-&gt;second;
00133                 } <span class="keywordflow">else</span> {
00134                     *advertise = <span class="keyword">true</span>;
00135                 }
00136             }
00137             <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>[i];
00138         }
00139     }
00140     <span class="keywordflow">if</span> (advertise != NULL) {
00141         *advertise =  <span class="keyword">false</span>;
00142     }
00143     <span class="keywordflow">return</span> <a class="code" href="namespace_o_s_p_f.html#a10">NullIPv4AddressRange</a>;
00144 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="OSPF::Area::GetExternalRoutingCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::GetExternalRoutingCapability           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00047 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="OSPF::Area::GetInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> * OSPF::Area::GetInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00160 {
00161     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00162     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; interfaceNum; i++) {
00163         <span class="keywordflow">if</span> ((associatedInterfaces[i]-&gt;GetType () != OSPF::Interface::Virtual) &amp;&amp;
00164             (associatedInterfaces[i]-&gt;GetAddressRange ().address == address))
00165         {
00166             <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i];
00167         }
00168     }
00169     <span class="keywordflow">return</span> NULL;
00170 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="OSPF::Area::GetInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> * OSPF::Area::GetInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ifIndex</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00147 {
00148     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00149     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; interfaceNum; i++) {
00150         <span class="keywordflow">if</span> ((associatedInterfaces[i]-&gt;GetType () != OSPF::Interface::Virtual) &amp;&amp;
00151             (associatedInterfaces[i]-&gt;GetIfIndex () == ifIndex))
00152         {
00153             <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i];
00154         }
00155     }
00156     <span class="keywordflow">return</span> NULL;
00157 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="OSPF::Area::GetNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a>* OSPF::Area::GetNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00063 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="OSPF::Area::GetNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a>* OSPF::Area::GetNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00062 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="OSPF::Area::GetNetworkLSACount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Area::GetNetworkLSACount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00061 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="OSPF::Area::GetRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>* OSPF::Area::GetRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00056 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="OSPF::Area::GetRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>* OSPF::Area::GetRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00055 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="OSPF::Area::GetRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>* OSPF::Area::GetRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00060 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="OSPF::Area::GetRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>* OSPF::Area::GetRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00059 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="OSPF::Area::GetRouterLSACount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Area::GetRouterLSACount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00058 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="OSPF::Area::GetSPFTreeRoot"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>* OSPF::Area::GetSPFTreeRoot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00052 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="OSPF::Area::GetSPFTreeRoot"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>* OSPF::Area::GetSPFTreeRoot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00051 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="OSPF::Area::GetStubDefaultCost"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a0">Metric</a> OSPF::Area::GetStubDefaultCost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00049 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r13">stubDefaultCost</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="OSPF::Area::GetSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>* OSPF::Area::GetSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00066 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="OSPF::Area::GetSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>* OSPF::Area::GetSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00065 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="OSPF::Area::GetSummaryLSACount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Area::GetSummaryLSACount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00064 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="OSPF::Area::GetTransitCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::GetTransitCapability           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00045 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="OSPF::Area::GetUniqueLinkStateID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">OSPF::LinkStateID</a> OSPF::Area::GetUniqueLinkStateID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a0">OSPF::Metric</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destinationCost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lsaToReoriginate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a link state ID for the input destination. If this router hasn't originated a Summary LSA for the input destination then the function returs the destination address as link state ID. If it has originated a Summary LSA for the input destination then the function checks which LSA would contain the longer netmask. If the two masks are equal then this means thet we're updating an LSA already in the database, so the function returns the destination address as link state ID. If the input destination netmask is longer then the one already in the database, then the returned link state ID is the input destination address ORed together with the inverse of the input destination mask. If the input destination netmask is shorter, then the Summary LSA already in the database has to be replaced by the current destination. In this case the lsaToReoriginate parameter is filled with a copy of the Summary LSA in the database with it's mask replaced by the destination mask and the cost replaced by the input destination cost; the returned link state ID is the input destination address ORed together with the inverse of the mask stored in the Summary LSA in the database. This means that if the lsaToReoriginate parameter is not NULL on return then another lookup in the database is needed with the same LSAKey as used here (input destination address and the router's own routerID) and the resulting Summary LSA's link state ID should be changed to the one returned by this function. <div class="fragment"><pre class="fragment">00978 {
00979     <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
00980         <span class="keyword">delete</span> lsaToReoriginate;
00981         lsaToReoriginate = NULL;
00982     }
00983 
00984     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00985 
00986     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>);
00987     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
00988 
00989     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* foundLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a44">FindSummaryLSA</a> (lsaKey);
00990 
00991     <span class="keywordflow">if</span> (foundLSA == NULL) {
00992         <span class="keywordflow">return</span> lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>;
00993     } <span class="keywordflow">else</span> {
00994         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a> existingMask = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (foundLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
00995 
00996         <span class="keywordflow">if</span> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> == existingMask) {
00997             <span class="keywordflow">return</span> lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>;
00998         } <span class="keywordflow">else</span> {
00999             <span class="keywordflow">if</span> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> &gt;= existingMask) {
01000                 <span class="keywordflow">return</span> (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> | (~(<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>))));
01001             } <span class="keywordflow">else</span> {
01002                 <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> (*foundLSA);
01003 
01004                 <span class="keywordtype">long</span> sequenceNumber = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
01005 
01006                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01007                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
01008                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a8">setNetworkMask</a> (ULongFromIPv4Address (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>));
01009                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (destinationCost);
01010                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01011 
01012                 lsaToReoriginate = summaryLSA;
01013 
01014                 <span class="keywordflow">return</span> (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> | (~(<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (existingMask))));
01015             }
01016         }
01017     }
01018 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="OSPF::Area::HasAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::HasAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>addressRange</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00112 {
00113     <span class="keywordtype">int</span> addressRangeNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r2">areaAddressRanges</a>.size ();
00114     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; addressRangeNum; i++) {
00115         <span class="keywordflow">if</span> ((areaAddressRanges[i].address == addressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>) &amp;&amp;
00116             (areaAddressRanges[i].mask == addressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>))
00117         {
00118             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00119         }
00120     }
00121     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00122 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="OSPF::Area::HasLink"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::HasLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fromLSA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>toLSA</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">02029 {
02030     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
02031 
02032     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* fromRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (fromLSA);
02033     <span class="keywordflow">if</span> (fromRouterLSA != NULL) {
02034         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     linkCount   = fromRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
02035         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* toRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (toLSA);
02036         <span class="keywordflow">if</span> (toRouterLSA != NULL) {
02037             <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
02038                 <a class="code" href="class_link.html">Link</a>&amp;    link     = fromRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
02039                 <a class="code" href="_o_s_p_f_packet__m_8h.html#a55">LinkType</a> linkType = static_cast&lt;LinkType&gt; (link.<a class="code" href="class_link.html#a11">getType</a> ());
02040 
02041                 <span class="keywordflow">if</span> (((linkType == PointToPointLink) ||
02042                      (linkType == VirtualLink)) &amp;&amp;
02043                     (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == toRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()))
02044                 {
02045                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
02046                 }
02047             }
02048         } <span class="keywordflow">else</span> {
02049             <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* toNetworkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (toLSA);
02050             <span class="keywordflow">if</span> (toNetworkLSA != NULL) {
02051                 <span class="keywordflow">for</span> (i = 0; i &lt; linkCount; i++) {
02052                     <a class="code" href="class_link.html">Link</a>&amp;    link     = fromRouterLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
02053 
02054                     <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>) &amp;&amp;
02055                         (link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == toNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()))
02056                     {
02057                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
02058                     }
02059                     <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a13">StubLink</a>) &amp;&amp;
02060                         ((link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; link.<a class="code" href="class_link.html#a9">getLinkData</a> ()) == (toNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; toNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())))
02061                     {
02062                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
02063                     }
02064                 }
02065             }
02066         }
02067     } <span class="keywordflow">else</span> {
02068         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* fromNetworkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (fromLSA);
02069         <span class="keywordflow">if</span> (fromNetworkLSA != NULL) {
02070             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     routerCount   = fromNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a10">getAttachedRoutersArraySize</a> ();
02071             <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* toRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (toLSA);
02072             <span class="keywordflow">if</span> (toRouterLSA != NULL) {
02073                 <span class="keywordflow">for</span> (i = 0; i &lt; routerCount; i++) {
02074                     <span class="keywordflow">if</span> (fromNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a11">getAttachedRouters</a> (i).<a class="code" href="class_i_p_address.html#a5">getInt</a> () == toRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) {
02075                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
02076                     }
02077                 }
02078             }
02079         }
02080     }
02081 
02082     <span class="keywordflow">return</span> <span class="keyword">false</span>;
02083 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="OSPF::Area::HasVirtualLink"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::HasVirtualLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>withTransitArea</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00173 {
00174     <span class="keywordflow">if</span> ((areaID != OSPF::BackboneAreaID) || (withTransitArea == OSPF::BackboneAreaID)) {
00175         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00176     }
00177 
00178     <span class="keywordtype">int</span> interfaceNum = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00179     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; interfaceNum; i++) {
00180         <span class="keywordflow">if</span> ((associatedInterfaces[i]-&gt;GetType () == OSPF::Interface::Virtual) &amp;&amp;
00181             (associatedInterfaces[i]-&gt;GetTransitAreaID () == withTransitArea))
00182         {
00183             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00184         }
00185     }
00186     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00187 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="OSPF::Area::info"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::info           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buffer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00048 {
00049     std::stringstream out;
00050     <span class="keywordtype">char</span> areaString[16];
00051     out &lt;&lt; <span class="stringliteral">"areaID: "</span> &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (areaString, 16, areaID);
00052     strcpy(buffer, out.str().c_str());
00053 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="OSPF::Area::InstallNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::InstallNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_network_l_s_a.html">OSPFNetworkLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00224 {
00225     OSPF::LinkStateID linkStateID = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00226     std::map&lt;OSPF::LinkStateID, OSPF::NetworkLSA*&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.find (linkStateID);
00227     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>.end ()) {
00228         <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00229 
00230         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00231         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00232 
00233         <a class="code" href="class_o_s_p_f_1_1_area.html#a48">RemoveFromAllRetransmissionLists</a> (lsaKey);
00234         <span class="keywordflow">return</span> lsaIt-&gt;second-&gt;Update (lsa);
00235     } <span class="keywordflow">else</span> {
00236         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* lsaCopy = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a> (*lsa);
00237         <a class="code" href="class_o_s_p_f_1_1_area.html#r7">networkLSAsByID</a>[linkStateID] = lsaCopy;
00238         <a class="code" href="class_o_s_p_f_1_1_area.html#r8">networkLSAs</a>.push_back (lsaCopy);
00239         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00240     }
00241 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="OSPF::Area::InstallRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::InstallRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_router_l_s_a.html">OSPFRouterLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00204 {
00205     OSPF::LinkStateID linkStateID = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00206     std::map&lt;OSPF::LinkStateID, OSPF::RouterLSA*&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.find (linkStateID);
00207     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>.end ()) {
00208         <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00209 
00210         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00211         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00212 
00213         <a class="code" href="class_o_s_p_f_1_1_area.html#a48">RemoveFromAllRetransmissionLists</a> (lsaKey);
00214         <span class="keywordflow">return</span> lsaIt-&gt;second-&gt;Update (lsa);
00215     } <span class="keywordflow">else</span> {
00216         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* lsaCopy = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a> (*lsa);
00217         <a class="code" href="class_o_s_p_f_1_1_area.html#r5">routerLSAsByID</a>[linkStateID] = lsaCopy;
00218         <a class="code" href="class_o_s_p_f_1_1_area.html#r6">routerLSAs</a>.push_back (lsaCopy);
00219         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00220     }
00221 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="OSPF::Area::InstallSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::InstallSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_summary_l_s_a.html">OSPFSummaryLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00244 {
00245     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00246 
00247     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00248     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00249 
00250     std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
00251     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
00252         <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00253 
00254         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00255         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00256 
00257         <a class="code" href="class_o_s_p_f_1_1_area.html#a48">RemoveFromAllRetransmissionLists</a> (lsaKey);
00258         <span class="keywordflow">return</span> lsaIt-&gt;second-&gt;Update (lsa);
00259     } <span class="keywordflow">else</span> {
00260         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* lsaCopy = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> (*lsa);
00261         <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>[lsaKey] = lsaCopy;
00262         <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.push_back (lsaCopy);
00263         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00264     }
00265 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="OSPF::Area::IsLocalAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::IsLocalAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00664 {
00665     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00666     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; interfaceCount; i++) {
00667         <span class="keywordflow">if</span> (associatedInterfaces[i]-&gt;GetAddressRange ().address == address) {
00668             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00669         }
00670     }
00671     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00672 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="OSPF::Area::IsOnAnyRetransmissionList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Area::IsOnAnyRetransmissionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00639 {
00640     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00641     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; interfaceCount; i++) {
00642         <span class="keywordflow">if</span> (associatedInterfaces[i]-&gt;IsOnAnyRetransmissionList (lsaKey)) {
00643             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00644         }
00645     }
00646     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00647 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="OSPF::Area::OriginateNetworkLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a> * OSPF::Area::OriginateNetworkLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>intf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00916 {
00917     <span class="keywordflow">if</span> (intf-&gt;AnyNeighborInStates (OSPF::Neighbor::FullState)) {
00918         <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* networkLSA      = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>;
00919         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;   lsaHeader        = networkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
00920         <span class="keywordtype">long</span>             neighborCount    = intf-&gt;GetNeighborCount ();
00921         <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>      lsOptions;
00922 
00923         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
00924         memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
00925         lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
00926         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
00927         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (NetworkLSAType);
00928         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (ULongFromIPv4Address (intf-&gt;GetAddressRange ().address));
00929         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00930         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
00931 
00932         networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a8">setNetworkMask</a> (ULongFromIPv4Address (intf-&gt;GetAddressRange ().mask));
00933 
00934         <span class="keywordflow">for</span> (<span class="keywordtype">long</span> j = 0; j &lt; neighborCount; j++) {
00935             <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = intf-&gt;GetNeighbor (j);
00936             <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#w28w24">OSPF::Neighbor::FullState</a>) {
00937                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> netIndex = networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a10">getAttachedRoutersArraySize</a> ();
00938                 networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a9">setAttachedRoutersArraySize</a> (netIndex + 1);
00939                 networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a13">setAttachedRouters</a> (netIndex, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a30">GetNeighborID</a> ());
00940             }
00941         }
00942         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> netIndex = networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a10">getAttachedRoutersArraySize</a> ();
00943         networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a9">setAttachedRoutersArraySize</a> (netIndex + 1);
00944         networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a13">setAttachedRouters</a> (netIndex, <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00945 
00946         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00947 
00948         <span class="keywordflow">return</span> networkLSA;
00949     } <span class="keywordflow">else</span> {
00950         <span class="keywordflow">return</span> NULL;
00951     }
00952 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="OSPF::Area::OriginateRouterLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a> * OSPF::Area::OriginateRouterLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00675 {
00676     <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* routerLSA      = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>;
00677     <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;   lsaHeader      = routerLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
00678     <span class="keywordtype">long</span>             interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00679     <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>      lsOptions;
00680     <span class="keywordtype">long</span>             i;
00681 
00682     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
00683     memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
00684     lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
00685     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
00686     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (RouterLSAType);
00687     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00688     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
00689     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
00690 
00691     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a11">setB_AreaBorderRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetAreaCount () &gt; 1);
00692     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a9">setE_ASBoundaryRouter</a> ((externalRoutingCapability &amp;&amp; <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetASBoundaryRouter ()) ? <span class="keyword">true</span> : <span class="keyword">false</span>);
00693     <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* backbone = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetArea (OSPF::BackboneAreaID);
00694     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a7">setV_VirtualLinkEndpoint</a> ((backbone == NULL) ? <span class="keyword">false</span> : backbone-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a35">HasVirtualLink</a> (areaID));
00695 
00696     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (0);
00697     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (0);
00698     <span class="keywordflow">for</span> (i = 0; i &lt; interfaceCount; i++) {
00699         <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i];
00700 
00701         <span class="keywordflow">if</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w15">OSPF::Interface::DownState</a>) {
00702             <span class="keywordflow">continue</span>;
00703         }
00704         <span class="keywordflow">if</span> ((intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w16">OSPF::Interface::LoopbackState</a>) &amp;&amp;
00705             ((intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a19">GetType</a> () != <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w10">OSPF::Interface::PointToPoint</a>) ||
00706              (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address != OSPF::NullIPv4Address)))
00707         {
00708             <a class="code" href="class_link.html">Link</a> stubLink;
00709             stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00710             stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00711             stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (0xFFFFFFFF);
00712             stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (0);
00713             stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00714             stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00715 
00716             <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00717             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00718             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00719             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00720         }
00721         <span class="keywordflow">if</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () &gt; <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w16">OSPF::Interface::LoopbackState</a>) {
00722             <span class="keywordflow">switch</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a19">GetType</a> ()) {
00723                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w10">OSPF::Interface::PointToPoint</a>:
00724                     {
00725                         <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a55">GetNeighborCount</a> () &gt; 0) ? intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a56">GetNeighbor</a> (0) : NULL;
00726                         <span class="keywordflow">if</span> (neighbor != NULL) {
00727                             <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#w28w24">OSPF::Neighbor::FullState</a>) {
00728                                 <a class="code" href="class_link.html">Link</a> link;
00729                                 link.<a class="code" href="class_link.html#a12">setType</a> (PointToPointLink);
00730                                 link.<a class="code" href="class_link.html#a8">setLinkID</a> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a30">GetNeighborID</a> ());
00731                                 <span class="keywordflow">if</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address != OSPF::NullIPv4Address) {
00732                                     link.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00733                                 } <span class="keywordflow">else</span> {
00734                                     link.<a class="code" href="class_link.html#a10">setLinkData</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a21">GetIfIndex</a> ());
00735                                 }
00736                                 link.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00737                                 link.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00738                                 link.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00739 
00740                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00741                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00742                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00743                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, link);
00744                             }
00745                             <span class="keywordflow">if</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w18">OSPF::Interface::PointToPointState</a>) {
00746                                 <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> () != OSPF::NullIPv4Address) {
00747                                     <a class="code" href="class_link.html">Link</a> stubLink;
00748                                     stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00749                                     stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a34">GetAddress</a> ()));
00750                                     stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (0xFFFFFFFF);
00751                                     stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00752                                     stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00753                                     stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00754 
00755                                     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00756                                     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00757                                     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00758                                     routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00759                                 } <span class="keywordflow">else</span> {
00760                                     <span class="keywordflow">if</span> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask) != 0xFFFFFFFF) {
00761                                         <a class="code" href="class_link.html">Link</a> stubLink;
00762                                         stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00763                                         stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address &amp;
00764                                                                                   intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00765                                         stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00766                                         stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00767                                         stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00768                                         stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00769 
00770                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00771                                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00772                                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00773                                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00774                                     }
00775                                 }
00776                             }
00777                         }
00778                     }
00779                     <span class="keywordflow">break</span>;
00780                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w11">OSPF::Interface::Broadcast</a>:
00781                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w12">OSPF::Interface::NBMA</a>:
00782                     {
00783                         <span class="keywordflow">if</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_interface.html#w24w17">OSPF::Interface::WaitingState</a>) {
00784                             <a class="code" href="class_link.html">Link</a> stubLink;
00785                             stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00786                             stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address &amp;
00787                                                                       intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00788                             stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00789                             stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00790                             stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00791                             stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00792 
00793                             <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00794                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00795                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00796                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00797                         } <span class="keywordflow">else</span> {
00798                             <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* dRouter = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a7">GetNeighborByAddress</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a53">GetDesignatedRouter</a> ().ipInterfaceAddress);
00799                             <span class="keywordflow">if</span> (((dRouter != NULL) &amp;&amp; (dRouter-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#w28w24">OSPF::Neighbor::FullState</a>)) ||
00800                                 ((intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a53">GetDesignatedRouter</a> ().routerID == <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ()) &amp;&amp;
00801                                  (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a10">AnyNeighborInStates</a> (OSPF::Neighbor::FullState))))
00802                             {
00803                                 <a class="code" href="class_link.html">Link</a> link;
00804                                 link.<a class="code" href="class_link.html#a12">setType</a> (TransitLink);
00805                                 link.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a53">GetDesignatedRouter</a> ().ipInterfaceAddress));
00806                                 link.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00807                                 link.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00808                                 link.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00809                                 link.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00810 
00811                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00812                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00813                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00814                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, link);
00815                             } <span class="keywordflow">else</span> {
00816                                 <a class="code" href="class_link.html">Link</a> stubLink;
00817                                 stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00818                                 stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address &amp;
00819                                                                           intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00820                                 stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().mask));
00821                                 stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00822                                 stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00823                                 stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00824 
00825                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00826                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00827                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00828                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00829                             }
00830                         }
00831                     }
00832                     <span class="keywordflow">break</span>;
00833                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w14">OSPF::Interface::Virtual</a>:
00834                     {
00835                         <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a55">GetNeighborCount</a> () &gt; 0) ? intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a56">GetNeighbor</a> (0) : NULL;
00836                         <span class="keywordflow">if</span> ((neighbor != NULL) &amp;&amp; (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#w28w24">OSPF::Neighbor::FullState</a>)) {
00837                             <a class="code" href="class_link.html">Link</a> link;
00838                             link.<a class="code" href="class_link.html#a12">setType</a> (VirtualLink);
00839                             link.<a class="code" href="class_link.html#a8">setLinkID</a> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a30">GetNeighborID</a> ());
00840                             link.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00841                             link.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00842                             link.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00843                             link.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00844 
00845                             <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00846                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00847                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00848                             routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, link);
00849                         }
00850                     }
00851                     <span class="keywordflow">break</span>;
00852                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w13">OSPF::Interface::PointToMultiPoint</a>:
00853                     {
00854                         <a class="code" href="class_link.html">Link</a> stubLink;
00855                         stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00856                         stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00857                         stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (0xFFFFFFFF);
00858                         stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (0);
00859                         stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00860                         stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00861 
00862                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00863                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00864                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00865                         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00866 
00867                         <span class="keywordtype">long</span> neighborCount = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a55">GetNeighborCount</a> ();
00868                         <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; neighborCount; i++) {
00869                             <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a56">GetNeighbor</a> (i);
00870                             <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5">GetState</a> () == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#w28w24">OSPF::Neighbor::FullState</a>) {
00871                                 <a class="code" href="class_link.html">Link</a> link;
00872                                 link.<a class="code" href="class_link.html#a12">setType</a> (PointToPointLink);
00873                                 link.<a class="code" href="class_link.html#a8">setLinkID</a> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a30">GetNeighborID</a> ());
00874                                 link.<a class="code" href="class_link.html#a10">setLinkData</a> (ULongFromIPv4Address (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a49">GetAddressRange</a> ().address));
00875                                 link.<a class="code" href="class_link.html#a16">setLinkCost</a> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a29">GetOutputCost</a> ());
00876                                 link.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00877                                 link.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00878 
00879                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00880                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00881                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00882                                 routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00883                             }
00884                         }
00885                     }
00886                     <span class="keywordflow">break</span>;
00887                 <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
00888             }
00889         }
00890     }
00891 
00892     <span class="keywordtype">long</span> hostRouteCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r4">hostRoutes</a>.size ();
00893     <span class="keywordflow">for</span> (i = 0; i &lt; hostRouteCount; i++) {
00894         <a class="code" href="class_link.html">Link</a> stubLink;
00895         stubLink.<a class="code" href="class_link.html#a12">setType</a> (StubLink);
00896         stubLink.<a class="code" href="class_link.html#a8">setLinkID</a> (ULongFromIPv4Address (hostRoutes[i].address));
00897         stubLink.<a class="code" href="class_link.html#a10">setLinkData</a> (0xFFFFFFFF);
00898         stubLink.<a class="code" href="class_link.html#a16">setLinkCost</a> (hostRoutes[i].linkCost);
00899         stubLink.<a class="code" href="class_link.html#a14">setNumberOfTOS</a> (0);
00900         stubLink.<a class="code" href="class_link.html#a17">setTosDataArraySize</a> (0);
00901 
00902         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> linkIndex = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00903         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a14">setLinksArraySize</a> (linkIndex + 1);
00904         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a13">setNumberOfLinks</a> (linkIndex + 1);
00905         routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a18">setLinks</a> (linkIndex, stubLink);
00906     }
00907 
00908     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00909 
00910     routerLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
00911 
00912     <span class="keywordflow">return</span> routerLSA;
00913 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="OSPF::Area::OriginateSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> * OSPF::Area::OriginateSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>summaryLSA</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01279 {
01280     <span class="keyword">const</span> std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt; emptyMap;
01281     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>*                                             dontReoriginate = NULL;
01282 
01283     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp; lsaHeader   = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01284     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   entryCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRoutingTableEntryCount ();
01285 
01286     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; entryCount; i++) {
01287         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRoutingTableEntry (i);
01288 
01289         <span class="keywordflow">if</span> ((lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a9">SummaryLSA_ASBoundaryRoutersType</a>) &amp;&amp;
01290             ((((entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
01291               ((entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0)) &amp;&amp;
01292              ((entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) &amp;&amp;
01293               (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> () == summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ()))))
01294         {
01295             <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* returnLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a54">OriginateSummaryLSA</a> (entry, emptyMap, dontReoriginate);
01296             <span class="keywordflow">if</span> (dontReoriginate != NULL) {
01297                 <span class="keyword">delete</span> dontReoriginate;
01298             }
01299             <span class="keywordflow">return</span> returnLSA;
01300         }
01301 
01302         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lsaMask = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01303 
01304         <span class="keywordflow">if</span> ((lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>) &amp;&amp;
01305             (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) &amp;&amp;
01306             (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == lsaMask) &amp;&amp;
01307             (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; lsaMask == lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; lsaMask))
01308         {
01309             <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* returnLSA = <a class="code" href="class_o_s_p_f_1_1_area.html#a54">OriginateSummaryLSA</a> (entry, emptyMap, dontReoriginate);
01310             <span class="keywordflow">if</span> (dontReoriginate != NULL) {
01311                 <span class="keyword">delete</span> dontReoriginate;
01312             }
01313             <span class="keywordflow">return</span> returnLSA;
01314         }
01315     }
01316 
01317     <span class="keywordflow">return</span> NULL;
01318 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="OSPF::Area::OriginateSummaryLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> * OSPF::Area::OriginateSummaryLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, bool, <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>originatedLSAs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lsaToReoriginate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01023 {
01024     <span class="keywordflow">if</span> (((entry-&gt;GetDestinationType () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
01025         (entry-&gt;GetPathType () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w3">OSPF::RoutingTableEntry::Type1External</a>) ||
01026         (entry-&gt;GetPathType () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w4">OSPF::RoutingTableEntry::Type2External</a>) ||
01027         (entry-&gt;GetArea () == <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>))
01028     {
01029         <span class="keywordflow">return</span> NULL;
01030     }
01031 
01032     <span class="keywordtype">bool</span>         allNextHopsInThisArea = <span class="keyword">true</span>;
01033     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextHopCount          = entry-&gt;GetNextHopCount ();
01034 
01035     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nextHopCount; i++) {
01036         <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* nextHopInterface = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetNonVirtualInterface (entry-&gt;GetNextHop (i).ifIndex);
01037         <span class="keywordflow">if</span> ((nextHopInterface != NULL) &amp;&amp; (nextHopInterface-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a25">GetAreaID</a> () != <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>)) {
01038             allNextHopsInThisArea = <span class="keyword">false</span>;
01039             <span class="keywordflow">break</span>;
01040         }
01041     }
01042     <span class="keywordflow">if</span> ((allNextHopsInThisArea) || (entry-&gt;GetCost () &gt;= <a class="code" href="_o_s_p_fcommon_8h.html#a6">LS_INFINITY</a>)){
01043         <span class="keywordflow">return</span> NULL;
01044     }
01045 
01046     <span class="keywordflow">if</span> ((entry-&gt;GetDestinationType () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0) {
01047         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* preferredEntry = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetPreferredEntry (*(entry-&gt;GetLinkStateOrigin ()), <span class="keyword">false</span>);
01048         <span class="keywordflow">if</span> ((preferredEntry != NULL) &amp;&amp; (*preferredEntry == *entry) &amp;&amp; (externalRoutingCapability)) {
01049             <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA    = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>;
01050             <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader     = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01051             <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>       lsOptions;
01052 
01053             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01054             memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
01055             lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
01056             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
01057             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (SummaryLSA_ASBoundaryRoutersType);
01058             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (entry-&gt;GetDestinationID ().getInt ());
01059             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
01060             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01061 
01062             summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a8">setNetworkMask</a> (entry-&gt;GetAddressMask ());
01063             summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (entry-&gt;GetCost ());
01064             summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a11">setTosDataArraySize</a> (0);
01065 
01066             lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01067 
01068             summaryLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
01069 
01070             <span class="keywordflow">return</span> summaryLSA;
01071         }
01072     } <span class="keywordflow">else</span> {    <span class="comment">// entry-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination</span>
01073         <span class="keywordflow">if</span> (entry-&gt;GetPathType () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w2">OSPF::RoutingTableEntry::InterArea</a>) {
01074             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destinationRange;
01075 
01076             destinationRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (entry-&gt;GetDestinationID ().getInt ());
01077             destinationRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (entry-&gt;GetAddressMask ().getInt ());
01078 
01079             OSPF::LinkStateID newLinkStateID = <a class="code" href="class_o_s_p_f_1_1_area.html#d4">GetUniqueLinkStateID</a> (destinationRange, entry-&gt;GetCost (), lsaToReoriginate);
01080 
01081             <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01082                 <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
01083 
01084                 lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = entry-&gt;GetDestinationID ().getInt ();
01085                 lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01086 
01087                 std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
01088                 <span class="keywordflow">if</span> (lsaIt == <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
01089                     <span class="keyword">delete</span> (lsaToReoriginate);
01090                     lsaToReoriginate = NULL;
01091                     <span class="keywordflow">return</span> NULL;
01092                 } <span class="keywordflow">else</span> {
01093                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> (*(lsaIt-&gt;second));
01094                     <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader  = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01095 
01096                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01097                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01098                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01099                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01100 
01101                     <span class="keywordflow">return</span> summaryLSA;
01102                 }
01103             } <span class="keywordflow">else</span> {
01104                 <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA    = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>;
01105                 <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader     = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01106                 <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>       lsOptions;
01107 
01108                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01109                 memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
01110                 lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
01111                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
01112                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (SummaryLSA_NetworksType);
01113                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01114                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
01115                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01116 
01117                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a8">setNetworkMask</a> (entry-&gt;GetAddressMask ());
01118                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (entry-&gt;GetCost ());
01119                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a11">setTosDataArraySize</a> (0);
01120 
01121                 lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01122 
01123                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
01124 
01125                 <span class="keywordflow">return</span> summaryLSA;
01126             }
01127         } <span class="keywordflow">else</span> {    <span class="comment">// entry-&gt;GetPathType () == OSPF::RoutingTableEntry::IntraArea</span>
01128             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destinationAddressRange;
01129 
01130             destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (entry-&gt;GetDestinationID ().getInt ());
01131             destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (entry-&gt;GetAddressMask ().getInt ());
01132 
01133             <span class="keywordtype">bool</span> doAdvertise = <span class="keyword">false</span>;
01134             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> containingAddressRange = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetContainingAddressRange (destinationAddressRange, &amp;doAdvertise);
01135             <span class="keywordflow">if</span> (((entry-&gt;GetArea () == OSPF::BackboneAreaID) &amp;&amp;         <span class="comment">// the backbone's configured ranges should be ignored</span>
01136                  (<a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a>)) ||                                <span class="comment">// when originating Summary LSAs into transit areas</span>
01137                 (containingAddressRange == OSPF::NullIPv4AddressRange))
01138             {
01139                 OSPF::LinkStateID newLinkStateID = <a class="code" href="class_o_s_p_f_1_1_area.html#d4">GetUniqueLinkStateID</a> (destinationAddressRange, entry-&gt;GetCost (), lsaToReoriginate);
01140 
01141                 <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01142                     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
01143 
01144                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = entry-&gt;GetDestinationID ().getInt ();
01145                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01146 
01147                     std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
01148                     <span class="keywordflow">if</span> (lsaIt == <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
01149                         <span class="keyword">delete</span> (lsaToReoriginate);
01150                         lsaToReoriginate = NULL;
01151                         <span class="keywordflow">return</span> NULL;
01152                     } <span class="keywordflow">else</span> {
01153                         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> (*(lsaIt-&gt;second));
01154                         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader  = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01155 
01156                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01157                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01158                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01159                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01160 
01161                         <span class="keywordflow">return</span> summaryLSA;
01162                     }
01163                 } <span class="keywordflow">else</span> {
01164                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA    = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>;
01165                     <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader     = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01166                     <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>       lsOptions;
01167 
01168                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01169                     memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
01170                     lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
01171                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
01172                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (SummaryLSA_NetworksType);
01173                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01174                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
01175                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01176 
01177                     summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a8">setNetworkMask</a> (entry-&gt;GetAddressMask ());
01178                     summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (entry-&gt;GetCost ());
01179                     summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a11">setTosDataArraySize</a> (0);
01180 
01181                     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01182 
01183                     summaryLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
01184 
01185                     <span class="keywordflow">return</span> summaryLSA;
01186                 }
01187             } <span class="keywordflow">else</span> {
01188                 <span class="keywordflow">if</span> (doAdvertise) {
01189                     <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a>        maxRangeCost = 0;
01190                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> entryCount   = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRoutingTableEntryCount ();
01191 
01192                     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; entryCount; i++) {
01193                         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRoutingTableEntry (i);
01194 
01195                         <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) &amp;&amp;
01196                             (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) &amp;&amp;
01197                             ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (containingAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) ==
01198                              <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (containingAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; containingAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) &amp;&amp;
01199                             (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &gt; maxRangeCost))
01200                         {
01201                             maxRangeCost = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
01202                         }
01203                     }
01204 
01205                     OSPF::LinkStateID newLinkStateID = <a class="code" href="class_o_s_p_f_1_1_area.html#d4">GetUniqueLinkStateID</a> (containingAddressRange, maxRangeCost, lsaToReoriginate);
01206                     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>  lsaKey;
01207 
01208                     <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01209                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsaToReoriginate-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01210                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01211 
01212                         std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt;::const_iterator originatedIt = originatedLSAs.find (lsaKey);
01213                         <span class="keywordflow">if</span> (originatedIt != originatedLSAs.end ()) {
01214                             <span class="keyword">delete</span> (lsaToReoriginate);
01215                             lsaToReoriginate = NULL;
01216                             <span class="keywordflow">return</span> NULL;
01217                         }
01218 
01219                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = entry-&gt;GetDestinationID ().getInt ();
01220                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01221 
01222                         std::map&lt;OSPF::LSAKeyType, OSPF::SummaryLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.find (lsaKey);
01223                         <span class="keywordflow">if</span> (lsaIt == <a class="code" href="class_o_s_p_f_1_1_area.html#r9">summaryLSAsByID</a>.end ()) {
01224                             <span class="keyword">delete</span> (lsaToReoriginate);
01225                             lsaToReoriginate = NULL;
01226                             <span class="keywordflow">return</span> NULL;
01227                         }
01228 
01229                         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a> (*(lsaIt-&gt;second));
01230                         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader  = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01231 
01232                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01233                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01234                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01235                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01236 
01237                         <span class="keywordflow">return</span> summaryLSA;
01238                     } <span class="keywordflow">else</span> {
01239                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = newLinkStateID;
01240                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ();
01241 
01242                         std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt;::const_iterator originatedIt = originatedLSAs.find (lsaKey);
01243                         <span class="keywordflow">if</span> (originatedIt != originatedLSAs.end ()) {
01244                             <span class="keywordflow">return</span> NULL;
01245                         }
01246 
01247                         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA    = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>;
01248                         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    lsaHeader     = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01249                         <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>       lsOptions;
01250 
01251                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01252                         memset (&amp;lsOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
01253                         lsOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a>;
01254                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsOptions);
01255                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (SummaryLSA_NetworksType);
01256                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (newLinkStateID);
01257                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (<a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
01258                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01259 
01260                         summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a8">setNetworkMask</a> (entry-&gt;GetAddressMask ());
01261                         summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (entry-&gt;GetCost ());
01262                         summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a11">setTosDataArraySize</a> (0);
01263 
01264                         lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01265 
01266                         summaryLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
01267 
01268                         <span class="keywordflow">return</span> summaryLSA;
01269                     }
01270                 }
01271             }
01272         }
01273     }
01274 
01275     <span class="keywordflow">return</span> NULL;
01276 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="OSPF::Area::ReCheckSummaryLSAs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::ReCheckSummaryLSAs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>newRoutingTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">02322 {
02323     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0;
02324     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> j = 0;
02325     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>.size ();
02326 
02327     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
02328         <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* currentLSA        = <a class="code" href="class_o_s_p_f_1_1_area.html#r10">summaryLSAs</a>[i];
02329         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;    currentHeader     = currentLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
02330 
02331         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     routeCost         = currentLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a9">getRouteCost</a> ();
02332         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>    lsAge             = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> ();
02333         <a class="code" href="namespace_o_s_p_f.html#a1">RouterID</a>          originatingRouter = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
02334         <span class="keywordtype">bool</span>              selfOriginated    = (originatingRouter == <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a>-&gt;GetRouterID ());
02335 
02336         <span class="keywordflow">if</span> ((routeCost == LS_INFINITY) || (lsAge == MAX_AGE) || (selfOriginated)) { <span class="comment">// (1) and (2)</span>
02337             <span class="keywordflow">continue</span>;
02338         }
02339 
02340         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            routeCount       = newRoutingTable.size ();
02341         <span class="keywordtype">char</span>                     lsType           = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> ();
02342         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* destinationEntry = NULL;
02343         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>   destination;
02344 
02345         destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ());
02346         destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (currentLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
02347 
02348         <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {  <span class="comment">// (3)</span>
02349             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry  = newRoutingTable[j];
02350             <span class="keywordtype">bool</span>                     foundMatching = <span class="keyword">false</span>;
02351 
02352             <span class="keywordflow">if</span> (lsType == SummaryLSA_NetworksType) {
02353                 <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) &amp;&amp;
02354                     (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>) == routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))
02355                 {
02356                     foundMatching = <span class="keyword">true</span>;
02357                 }
02358             } <span class="keywordflow">else</span> {
02359                 <span class="keywordflow">if</span> ((((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
02360                      ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0)) &amp;&amp;
02361                     (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>) == routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))
02362                 {
02363                     foundMatching = <span class="keyword">true</span>;
02364                 }
02365             }
02366 
02367             <span class="keywordflow">if</span> (foundMatching) {
02368                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5">OSPF::RoutingTableEntry::RoutingPathType</a> pathType = routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> ();
02369 
02370                 <span class="keywordflow">if</span> ((pathType == OSPF::RoutingTableEntry::Type1External) ||
02371                     (pathType == OSPF::RoutingTableEntry::Type2External) ||
02372                     (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () != OSPF::BackboneAreaID))
02373                 {
02374                     <span class="keywordflow">break</span>;
02375                 } <span class="keywordflow">else</span> {
02376                     destinationEntry = routingEntry;
02377                     <span class="keywordflow">break</span>;
02378                 }
02379             }
02380         }
02381         <span class="keywordflow">if</span> (destinationEntry == NULL) {
02382             <span class="keywordflow">continue</span>;
02383         }
02384 
02385         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* borderRouterEntry = NULL;
02386         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>           currentCost       = routeCost;
02387 
02388         <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {     <span class="comment">// (4) BR == borderRouterEntry</span>
02389             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = newRoutingTable[j];
02390 
02391             <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () == <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a>) &amp;&amp;
02392                 (((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s1">OSPF::RoutingTableEntry::AreaBorderRouterDestination</a>) != 0) ||
02393                  ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0)) &amp;&amp;
02394                 (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == originatingRouter))
02395             {
02396                 borderRouterEntry = routingEntry;
02397                 currentCost += borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
02398                 <span class="keywordflow">break</span>;
02399             }
02400         }
02401         <span class="keywordflow">if</span> (borderRouterEntry == NULL) {
02402             <span class="keywordflow">continue</span>;
02403         } <span class="keywordflow">else</span> {    <span class="comment">// (5)</span>
02404             <span class="keywordflow">if</span> (currentCost &lt;= destinationEntry-&gt;GetCost ()) {
02405                 <span class="keywordflow">if</span> (currentCost &lt; destinationEntry-&gt;GetCost ()) {
02406                     destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a24">ClearNextHops</a> ();
02407                 }
02408 
02409                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nextHopCount = borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a25">GetNextHopCount</a> ();
02410 
02411                 <span class="keywordflow">for</span> (j = 0; j &lt; nextHopCount; j++) {
02412                     destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (borderRouterEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j));
02413                 }
02414             }
02415         }
02416     }
02417 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="OSPF::Area::RemoveFromAllRetransmissionLists"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::RemoveFromAllRetransmissionLists           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00631 {
00632     <span class="keywordtype">long</span> interfaceCount = <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>.size ();
00633     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; interfaceCount; i++) {
00634         <a class="code" href="class_o_s_p_f_1_1_area.html#r3">associatedInterfaces</a>[i]-&gt;RemoveFromAllRetransmissionLists (lsaKey);
00635     }
00636 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="OSPF::Area::SetAreaID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetAreaID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>areaId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00038 { <a class="code" href="class_o_s_p_f_1_1_area.html#r0">areaID</a> = areaId; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="OSPF::Area::SetExternalRoutingCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetExternalRoutingCapability           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>flooded</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00046 { <a class="code" href="class_o_s_p_f_1_1_area.html#r12">externalRoutingCapability</a> = flooded; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="OSPF::Area::SetRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>router</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00054 { <a class="code" href="class_o_s_p_f_1_1_area.html#r15">parentRouter</a> = router; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="OSPF::Area::SetSPFTreeRoot"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetSPFTreeRoot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>root</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00050 { <a class="code" href="class_o_s_p_f_1_1_area.html#r14">spfTreeRoot</a> = root; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="OSPF::Area::SetStubDefaultCost"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetStubDefaultCost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a0">Metric</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cost</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00048 { <a class="code" href="class_o_s_p_f_1_1_area.html#r13">stubDefaultCost</a> = cost; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="OSPF::Area::SetTransitCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Area::SetTransitCapability           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>transit</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00044 { <a class="code" href="class_o_s_p_f_1_1_area.html#r11">transitCapability</a> = transit; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="OSPF::Area::advertiseAddressRanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>, bool, <a class="el" href="class_o_s_p_f_1_1_i_pv4_address_range___less.html">IPv4AddressRange_Less</a>&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r1">OSPF::Area::advertiseAddressRanges</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="OSPF::Area::areaAddressRanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r2">OSPF::Area::areaAddressRanges</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="OSPF::Area::areaID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> <a class="el" href="class_o_s_p_f_1_1_area.html#r0">OSPF::Area::areaID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="OSPF::Area::associatedInterfaces"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r3">OSPF::Area::associatedInterfaces</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r12" doxytag="OSPF::Area::externalRoutingCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="class_o_s_p_f_1_1_area.html#r12">OSPF::Area::externalRoutingCapability</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="OSPF::Area::hostRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="struct_o_s_p_f_1_1_host_route_parameters.html">HostRouteParameters</a>&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r4">OSPF::Area::hostRoutes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r8" doxytag="OSPF::Area::networkLSAs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r8">OSPF::Area::networkLSAs</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r7" doxytag="OSPF::Area::networkLSAsByID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>, <a class="el" href="class_o_s_p_f_1_1_network_l_s_a.html">NetworkLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r7">OSPF::Area::networkLSAsByID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r15" doxytag="OSPF::Area::parentRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>* <a class="el" href="class_o_s_p_f_1_1_area.html#r15">OSPF::Area::parentRouter</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="OSPF::Area::routerLSAs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r6">OSPF::Area::routerLSAs</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="OSPF::Area::routerLSAsByID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>, <a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r5">OSPF::Area::routerLSAsByID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r14" doxytag="OSPF::Area::spfTreeRoot"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router_l_s_a.html">RouterLSA</a>* <a class="el" href="class_o_s_p_f_1_1_area.html#r14">OSPF::Area::spfTreeRoot</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r13" doxytag="OSPF::Area::stubDefaultCost"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a0">Metric</a> <a class="el" href="class_o_s_p_f_1_1_area.html#r13">OSPF::Area::stubDefaultCost</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r10" doxytag="OSPF::Area::summaryLSAs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r10">OSPF::Area::summaryLSAs</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r9" doxytag="OSPF::Area::summaryLSAsByID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>*, <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a>&gt; <a class="el" href="class_o_s_p_f_1_1_area.html#r9">OSPF::Area::summaryLSAsByID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r11" doxytag="OSPF::Area::transitCapability"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="class_o_s_p_f_1_1_area.html#r11">OSPF::Area::transitCapability</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_o_s_p_f_area_8h.html">OSPFArea.h</a><li><a class="el" href="_o_s_p_f_area_8cc.html">OSPFArea.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:33 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
