<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: OSPF::MessageHandler Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="namespace_o_s_p_f.html">OSPF</a>::<a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a></div>
<h1>OSPF::MessageHandler Class Reference</h1><code>#include &lt;MessageHandler.h&gt;</code>
<p>
<p>Inheritance diagram for OSPF::MessageHandler:
<p><center><img src="class_o_s_p_f_1_1_message_handler.png" usemap="#OSPF::MessageHandler_map" border="0" alt=""></center>
<map name="OSPF::MessageHandler_map">
<area href="class_o_s_p_f_1_1_i_message_handler.html" alt="OSPF::IMessageHandler" shape="rect" coords="0,0,151,24">
</map>
<a href="class_o_s_p_f_1_1_message_handler-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a0">MessageHandler</a> (<a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *containingRouter, cSimpleModule *containingModule)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a1">MessageReceived</a> (cMessage *message)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a2">HandleTimer</a> (<a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *timer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a3">ProcessPacket</a> (<a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *packet, <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *unused1=NULL, <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *unused2=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a4">SendPacket</a> (<a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *packet, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex, short ttl=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a5">ClearTimer</a> (<a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *timer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a6">StartTimer</a> (<a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *timer, simtime_t delay)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (const char *eventString, const <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *onInterface=NULL, const <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *forNeighbor=NULL) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a8">PrintHelloPacket</a> (const <a class="el" href="class_o_s_p_f_hello_packet.html">OSPFHelloPacket</a> *helloPacket, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a9">PrintDatabaseDescriptionPacket</a> (const <a class="el" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a> *ddPacket, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a10">PrintLinkStateRequestPacket</a> (const <a class="el" href="class_o_s_p_f_link_state_request_packet.html">OSPFLinkStateRequestPacket</a> *requestPacket, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a11">PrintLinkStateUpdatePacket</a> (const <a class="el" href="class_o_s_p_f_link_state_update_packet.html">OSPFLinkStateUpdatePacket</a> *updatePacket, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a12">PrintLinkStateAcknowledgementPacket</a> (const <a class="el" href="class_o_s_p_f_link_state_acknowledgement_packet.html">OSPFLinkStateAcknowledgementPacket</a> *ackPacket, <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> destination, int outputIfIndex) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#a13">AuthenticatePacket</a> (<a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *packet)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">cSimpleModule *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_hello_handler.html">HelloHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r1">helloHandler</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_database_description_handler.html">DatabaseDescriptionHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r2">ddHandler</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_request_handler.html">LinkStateRequestHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r3">lsRequestHandler</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_update_handler.html">LinkStateUpdateHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r4">lsUpdateHandler</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_acknowledgement_handler.html">LinkStateAcknowledgementHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_message_handler.html#r5">lsAckHandler</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="OSPF::MessageHandler::MessageHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OSPF::MessageHandler::MessageHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>containingRouter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>cSimpleModule *&nbsp;</td>
          <td class="mdname" nowrap> <em>containingModule</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00004                                                                                                  :
00005     <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html">OSPF::IMessageHandler</a> (containingRouter),
00006     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a> (containingModule),
00007     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r1">helloHandler</a> (containingRouter),
00008     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r2">ddHandler</a> (containingRouter),
00009     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r3">lsRequestHandler</a> (containingRouter),
00010     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r4">lsUpdateHandler</a> (containingRouter),
00011     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r5">lsAckHandler</a> (containingRouter)
00012 {
00013 }

</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a13" doxytag="OSPF::MessageHandler::AuthenticatePacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::MessageHandler::AuthenticatePacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>packet</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00047 { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="OSPF::MessageHandler::ClearTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::ClearTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00317 {
00318     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a>-&gt;cancelEvent (timer);
00319 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="OSPF::MessageHandler::HandleTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::HandleTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00032 {
00033     <span class="keywordflow">switch</span> (timer-&gt;<a class="code" href="class_o_s_p_f_timer.html#a7">getTimerKind</a> ()) {
00034         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a1">InterfaceHelloTimer</a>:
00035             {
00036                 <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf;
00037                 <span class="keywordflow">if</span> (! (intf = reinterpret_cast &lt;OSPF::Interface*&gt; (timer-&gt;contextPointer ()))) {
00038                     <span class="comment">// should not reach this point</span>
00039                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid InterfaceHelloTimer.\n"</span>;
00040                     <span class="keyword">delete</span> timer;
00041                 } <span class="keywordflow">else</span> {
00042                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Hello Timer expired"</span>, intf);
00043                     intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a2">ProcessEvent</a> (OSPF::Interface::HelloTimer);
00044                 }
00045             }
00046             <span class="keywordflow">break</span>;
00047         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a2">InterfaceWaitTimer</a>:
00048             {
00049                 <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf;
00050                 <span class="keywordflow">if</span> (! (intf = reinterpret_cast &lt;OSPF::Interface*&gt; (timer-&gt;contextPointer ()))) {
00051                     <span class="comment">// should not reach this point</span>
00052                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid InterfaceWaitTimer.\n"</span>;
00053                     <span class="keyword">delete</span> timer;
00054                 } <span class="keywordflow">else</span> {
00055                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Wait Timer expired"</span>, intf);
00056                     intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a2">ProcessEvent</a> (OSPF::Interface::WaitTimer);
00057                 }
00058             }
00059             <span class="keywordflow">break</span>;
00060         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a3">InterfaceAcknowledgementTimer</a>:
00061             {
00062                 <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf;
00063                 <span class="keywordflow">if</span> (! (intf = reinterpret_cast &lt;OSPF::Interface*&gt; (timer-&gt;contextPointer ()))) {
00064                     <span class="comment">// should not reach this point</span>
00065                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid InterfaceAcknowledgementTimer.\n"</span>;
00066                     <span class="keyword">delete</span> timer;
00067                 } <span class="keywordflow">else</span> {
00068                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Acknowledgement Timer expired"</span>, intf);
00069                     intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a2">ProcessEvent</a> (OSPF::Interface::AcknowledgementTimer);
00070                 }
00071             }
00072             <span class="keywordflow">break</span>;
00073         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a4">NeighborInactivityTimer</a>:
00074             {
00075                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor;
00076                 <span class="keywordflow">if</span> (! (neighbor = reinterpret_cast &lt;OSPF::Neighbor*&gt; (timer-&gt;contextPointer ()))) {
00077                     <span class="comment">// should not reach this point</span>
00078                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid NeighborInactivityTimer.\n"</span>;
00079                     <span class="keyword">delete</span> timer;
00080                 } <span class="keywordflow">else</span> {
00081                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Inactivity Timer expired"</span>, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a50">GetInterface</a> (), neighbor);
00082                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2">ProcessEvent</a> (OSPF::Neighbor::InactivityTimer);
00083                 }
00084             }
00085             <span class="keywordflow">break</span>;
00086         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a5">NeighborPollTimer</a>:
00087             {
00088                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor;
00089                 <span class="keywordflow">if</span> (! (neighbor = reinterpret_cast &lt;OSPF::Neighbor*&gt; (timer-&gt;contextPointer ()))) {
00090                     <span class="comment">// should not reach this point</span>
00091                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid NeighborInactivityTimer.\n"</span>;
00092                     <span class="keyword">delete</span> timer;
00093                 } <span class="keywordflow">else</span> {
00094                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Poll Timer expired"</span>, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a50">GetInterface</a> (), neighbor);
00095                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2">ProcessEvent</a> (OSPF::Neighbor::PollTimer);
00096                 }
00097             }
00098             <span class="keywordflow">break</span>;
00099         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a6">NeighborDDRetransmissionTimer</a>:
00100             {
00101                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor;
00102                 <span class="keywordflow">if</span> (! (neighbor = reinterpret_cast &lt;OSPF::Neighbor*&gt; (timer-&gt;contextPointer ()))) {
00103                     <span class="comment">// should not reach this point</span>
00104                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid NeighborDDRetransmissionTimer.\n"</span>;
00105                     <span class="keyword">delete</span> timer;
00106                 } <span class="keywordflow">else</span> {
00107                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Database Description Retransmission Timer expired"</span>, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a50">GetInterface</a> (), neighbor);
00108                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2">ProcessEvent</a> (OSPF::Neighbor::DDRetransmissionTimer);
00109                 }
00110             }
00111             <span class="keywordflow">break</span>;
00112         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a7">NeighborUpdateRetransmissionTimer</a>:
00113             {
00114                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor;
00115                 <span class="keywordflow">if</span> (! (neighbor = reinterpret_cast &lt;OSPF::Neighbor*&gt; (timer-&gt;contextPointer ()))) {
00116                     <span class="comment">// should not reach this point</span>
00117                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid NeighborUpdateRetransmissionTimer.\n"</span>;
00118                     <span class="keyword">delete</span> timer;
00119                 } <span class="keywordflow">else</span> {
00120                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Update Retransmission Timer expired"</span>, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a50">GetInterface</a> (), neighbor);
00121                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2">ProcessEvent</a> (OSPF::Neighbor::UpdateRetransmissionTimer);
00122                 }
00123             }
00124             <span class="keywordflow">break</span>;
00125         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a8">NeighborRequestRetransmissionTimer</a>:
00126             {
00127                 <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor;
00128                 <span class="keywordflow">if</span> (! (neighbor = reinterpret_cast &lt;OSPF::Neighbor*&gt; (timer-&gt;contextPointer ()))) {
00129                     <span class="comment">// should not reach this point</span>
00130                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Discarding invalid NeighborRequestRetransmissionTimer.\n"</span>;
00131                     <span class="keyword">delete</span> timer;
00132                 } <span class="keywordflow">else</span> {
00133                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Request Retransmission Timer expired"</span>, neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a50">GetInterface</a> (), neighbor);
00134                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2">ProcessEvent</a> (OSPF::Neighbor::RequestRetransmissionTimer);
00135                 }
00136             }
00137             <span class="keywordflow">break</span>;
00138         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_timer__m_8h.html#a12a9">DatabaseAgeTimer</a>:
00139             {
00140                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a7">PrintEvent</a> (<span class="stringliteral">"Ageing the database"</span>);
00141                 <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#p0">router</a>-&gt;AgeDatabase ();
00142             }
00143             <span class="keywordflow">break</span>;
00144         <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
00145     }
00146 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="OSPF::MessageHandler::MessageReceived"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::MessageReceived           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00016 {
00017     <span class="keywordflow">if</span> (message-&gt;isSelfMessage ()) {
00018         <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a2">HandleTimer</a> (check_and_cast&lt;OSPFTimer*&gt; (message));
00019     } <span class="keywordflow">else</span> {
00020         <a class="code" href="class_o_s_p_f_packet.html">OSPFPacket</a>* packet = check_and_cast&lt;OSPFPacket*&gt; (message);
00021         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Received packet: ("</span> &lt;&lt; packet-&gt;className () &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; packet-&gt;name() &lt;&lt; <span class="stringliteral">"\n"</span>;
00022         <span class="keywordflow">if</span> (packet-&gt;<a class="code" href="class_o_s_p_f_packet.html#a13">getRouterID</a> () == <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#p0">router</a>-&gt;GetRouterID ()) {
00023             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"This packet is from ourselves, discarding.\n"</span>;
00024             <span class="keyword">delete</span> message;
00025         } <span class="keywordflow">else</span> {
00026             <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a3">ProcessPacket</a> (packet);
00027         }
00028     }
00029 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="OSPF::MessageHandler::PrintDatabaseDescriptionPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintDatabaseDescriptionPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ddPacket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00392 {
00393     <span class="keywordtype">char</span> addressString[16];
00394     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Sending Database Description packet to "</span>
00395        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, <span class="keyword">sizeof</span> (addressString), destination)
00396        &lt;&lt; <span class="stringliteral">" on interface["</span>
00397        &lt;&lt; outputIfIndex
00398        &lt;&lt; <span class="stringliteral">"] with contents:\n"</span>;
00399 
00400     <span class="keyword">const</span> <a class="code" href="struct_o_s_p_f_d_d_options.html">OSPFDDOptions</a>&amp; ddOptions = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a12">getDdOptions</a> ();
00401     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  ddOptions="</span>
00402        &lt;&lt; ((ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#o5">I_Init</a>) ? <span class="stringliteral">"I "</span> : <span class="stringliteral">"_ "</span>)
00403        &lt;&lt; ((ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#o6">M_More</a>) ? <span class="stringliteral">"M "</span> : <span class="stringliteral">"_ "</span>)
00404        &lt;&lt; ((ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#o7">MS_MasterSlave</a>) ? <span class="stringliteral">"MS"</span> : <span class="stringliteral">"__"</span>)
00405        &lt;&lt; <span class="stringliteral">"\n"</span>;
00406     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  seqNumber="</span>
00407        &lt;&lt; ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a15">getDdSequenceNumber</a> ()
00408        &lt;&lt; <span class="stringliteral">"\n"</span>;
00409     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  LSA headers:\n"</span>;
00410 
00411     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lsaCount = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a18">getLsaHeadersArraySize</a> ();
00412     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; lsaCount; i++) {
00413         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"    "</span>;
00414         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a19">getLsaHeaders</a> (i));
00415         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00416     }
00417 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="OSPF::MessageHandler::PrintEvent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>eventString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>onInterface</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>forNeighbor</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00327 {
00328     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; eventString;
00329     <span class="keywordflow">if</span> ((onInterface != NULL) || (forNeighbor != NULL)) {
00330         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">": "</span>;
00331     }
00332     <span class="keywordflow">if</span> (forNeighbor != NULL) {
00333         <span class="keywordtype">char</span> addressString[16];
00334         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"neighbor["</span>
00335            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), forNeighbor-&gt;GetNeighborID ())
00336            &lt;&lt; <span class="stringliteral">"] (state: "</span>
00337            &lt;&lt; forNeighbor-&gt;GetStateString (forNeighbor-&gt;GetState ())
00338            &lt;&lt; <span class="stringliteral">"); "</span>;
00339     }
00340     <span class="keywordflow">if</span> (onInterface != NULL) {
00341         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"interface["</span>
00342            &lt;&lt; static_cast &lt;short&gt; (onInterface-&gt;GetIfIndex ())
00343            &lt;&lt; <span class="stringliteral">"] "</span>;
00344         <span class="keywordflow">switch</span> (onInterface-&gt;GetType ()) {
00345             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w10">OSPF::Interface::PointToPoint</a>:      <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(PointToPoint)"</span>;
00346                                                      <span class="keywordflow">break</span>;
00347             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w11">OSPF::Interface::Broadcast</a>:         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(Broadcast)"</span>;
00348                                                      <span class="keywordflow">break</span>;
00349             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w12">OSPF::Interface::NBMA</a>:              <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(NBMA).\n"</span>;
00350                                                      <span class="keywordflow">break</span>;
00351             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w13">OSPF::Interface::PointToMultiPoint</a>: <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(PointToMultiPoint)"</span>;
00352                                                      <span class="keywordflow">break</span>;
00353             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w14">OSPF::Interface::Virtual</a>:           <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(Virtual)"</span>;
00354                                                      <span class="keywordflow">break</span>;
00355             <span class="keywordflow">default</span>:                                 <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"(Unknown)"</span>;
00356         }
00357         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">" (state: "</span>
00358            &lt;&lt; onInterface-&gt;GetStateString (onInterface-&gt;GetState ())
00359            &lt;&lt; <span class="stringliteral">")"</span>;
00360     }
00361     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">".\n"</span>;
00362 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="OSPF::MessageHandler::PrintHelloPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintHelloPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_hello_packet.html">OSPFHelloPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>helloPacket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00365 {
00366     <span class="keywordtype">char</span> addressString[16];
00367     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Sending Hello packet to "</span>
00368        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, <span class="keyword">sizeof</span> (addressString), destination)
00369        &lt;&lt; <span class="stringliteral">" on interface["</span>
00370        &lt;&lt; outputIfIndex
00371        &lt;&lt; <span class="stringliteral">"] with contents:\n"</span>;
00372     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  netMask="</span>
00373        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), helloPacket-&gt;<a class="code" href="class_o_s_p_f_hello_packet.html#a7">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00374        &lt;&lt; <span class="stringliteral">"\n"</span>;
00375     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  DR="</span>
00376        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), helloPacket-&gt;<a class="code" href="class_o_s_p_f_hello_packet.html#a19">getDesignatedRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00377        &lt;&lt; <span class="stringliteral">"\n"</span>;
00378     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  BDR="</span>
00379        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), helloPacket-&gt;<a class="code" href="class_o_s_p_f_hello_packet.html#a22">getBackupDesignatedRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00380        &lt;&lt; <span class="stringliteral">"\n"</span>;
00381     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  neighbors:\n"</span>;
00382 
00383     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> neighborCount = helloPacket-&gt;<a class="code" href="class_o_s_p_f_hello_packet.html#a26">getNeighborArraySize</a> ();
00384     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; neighborCount; i++) {
00385         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"    "</span>
00386            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), helloPacket-&gt;<a class="code" href="class_o_s_p_f_hello_packet.html#a27">getNeighbor</a> (i).<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00387            &lt;&lt; <span class="stringliteral">"\n"</span>;
00388     }
00389 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="OSPF::MessageHandler::PrintLinkStateAcknowledgementPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintLinkStateAcknowledgementPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_link_state_acknowledgement_packet.html">OSPFLinkStateAcknowledgementPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ackPacket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00546 {
00547     <span class="keywordtype">char</span> addressString[16];
00548     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Sending Link State Acknowledgement packet to "</span>
00549        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, <span class="keyword">sizeof</span> (addressString), destination)
00550        &lt;&lt; <span class="stringliteral">" on interface["</span>
00551        &lt;&lt; outputIfIndex
00552        &lt;&lt; <span class="stringliteral">"] with acknowledgements:\n"</span>;
00553 
00554     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lsaCount = ackPacket-&gt;<a class="code" href="class_o_s_p_f_link_state_acknowledgement_packet.html#a8">getLsaHeadersArraySize</a> ();
00555     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; lsaCount; i++) {
00556         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"    "</span>;
00557         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (ackPacket-&gt;<a class="code" href="class_o_s_p_f_link_state_acknowledgement_packet.html#a9">getLsaHeaders</a> (i));
00558         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00559     }
00560 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="OSPF::MessageHandler::PrintLinkStateRequestPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintLinkStateRequestPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_link_state_request_packet.html">OSPFLinkStateRequestPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>requestPacket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00420 {
00421     <span class="keywordtype">char</span> addressString[16];
00422     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Sending Link State Request packet to "</span>
00423        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, <span class="keyword">sizeof</span> (addressString), destination)
00424        &lt;&lt; <span class="stringliteral">" on interface["</span>
00425        &lt;&lt; outputIfIndex
00426        &lt;&lt; <span class="stringliteral">"] with requests:\n"</span>;
00427 
00428     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> requestCount = requestPacket-&gt;<a class="code" href="class_o_s_p_f_link_state_request_packet.html#a8">getRequestsArraySize</a> ();
00429     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; requestCount; i++) {
00430         <span class="keyword">const</span> <a class="code" href="struct_l_s_a_request.html">LSARequest</a>&amp; request = requestPacket-&gt;<a class="code" href="class_o_s_p_f_link_state_request_packet.html#a9">getRequests</a>(i);
00431         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  type="</span>
00432            &lt;&lt; request.<a class="code" href="struct_l_s_a_request.html#o0">lsType</a>
00433            &lt;&lt; <span class="stringliteral">", LSID="</span>
00434            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), request.<a class="code" href="struct_l_s_a_request.html#o1">linkStateID</a>);
00435         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">", advertisingRouter="</span>
00436            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), request.<a class="code" href="struct_l_s_a_request.html#o2">advertisingRouter</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00437            &lt;&lt; <span class="stringliteral">"\n"</span>;
00438     }
00439 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="OSPF::MessageHandler::PrintLinkStateUpdatePacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::PrintLinkStateUpdatePacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_link_state_update_packet.html">OSPFLinkStateUpdatePacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>updatePacket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00442 {
00443     <span class="keywordtype">char</span> addressString[16];
00444     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Sending Link State Update packet to "</span>
00445        &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a57">AddressStringFromIPv4Address</a> (addressString, <span class="keyword">sizeof</span> (addressString), destination)
00446        &lt;&lt; <span class="stringliteral">" on interface["</span>
00447        &lt;&lt; outputIfIndex
00448        &lt;&lt; <span class="stringliteral">"] with updates:\n"</span>;
00449 
00450     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i           = 0;
00451     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> updateCount = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a10">getRouterLSAsArraySize</a> ();
00452 
00453     <span class="keywordflow">for</span> (i = 0; i &lt; updateCount; i++) {
00454         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_router_l_s_a.html">OSPFRouterLSA</a>&amp; lsa = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a11">getRouterLSAs</a>(i);
00455         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  "</span>;
00456         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (lsa.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ());
00457         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00458 
00459         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  bits="</span>
00460            &lt;&lt; ((lsa.<a class="code" href="class_o_s_p_f_router_l_s_a.html#a6">getV_VirtualLinkEndpoint</a> ()) ? <span class="stringliteral">"V "</span> : <span class="stringliteral">"_ "</span>)
00461            &lt;&lt; ((lsa.<a class="code" href="class_o_s_p_f_router_l_s_a.html#a8">getE_ASBoundaryRouter</a> ()) ? <span class="stringliteral">"E "</span> : <span class="stringliteral">"_ "</span>)
00462            &lt;&lt; ((lsa.<a class="code" href="class_o_s_p_f_router_l_s_a.html#a10">getB_AreaBorderRouter</a> ()) ? <span class="stringliteral">"B"</span> : <span class="stringliteral">"_"</span>)
00463            &lt;&lt; <span class="stringliteral">"\n"</span>;
00464         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  links:\n"</span>;
00465 
00466         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> linkCount = lsa.<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00467         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; linkCount; j++) {
00468             <span class="keyword">const</span> <a class="code" href="class_link.html">Link</a>&amp; link = lsa.<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (j);
00469             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"    ID="</span>
00470                &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), link.<a class="code" href="class_link.html#a6">getLinkID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00471                &lt;&lt; <span class="stringliteral">","</span>;
00472             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">" data="</span>
00473                &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), link.<a class="code" href="class_link.html#a9">getLinkData</a> ())
00474                &lt;&lt; <span class="stringliteral">", type="</span>;
00475             <span class="keywordflow">switch</span> (link.<a class="code" href="class_link.html#a11">getType</a> ()) {
00476                 <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a11">PointToPointLink</a>:  <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"PointToPoint"</span>;   <span class="keywordflow">break</span>;
00477                 <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>:       <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Transit"</span>;        <span class="keywordflow">break</span>;
00478                 <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a13">StubLink</a>:          <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Stub"</span>;           <span class="keywordflow">break</span>;
00479                 <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a14">VirtualLink</a>:       <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Virtual"</span>;        <span class="keywordflow">break</span>;
00480                 <span class="keywordflow">default</span>:                <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Unknown"</span>;        <span class="keywordflow">break</span>;
00481             }
00482             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">", cost="</span>
00483                &lt;&lt; link.<a class="code" href="class_link.html#a15">getLinkCost</a> ()
00484                &lt;&lt; <span class="stringliteral">"\n"</span>;
00485         }
00486     }
00487 
00488     updateCount = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a15">getNetworkLSAsArraySize</a> ();
00489     <span class="keywordflow">for</span> (i = 0; i &lt; updateCount; i++) {
00490         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_network_l_s_a.html">OSPFNetworkLSA</a>&amp; lsa = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a16">getNetworkLSAs</a>(i);
00491         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  "</span>;
00492         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (lsa.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ());
00493         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00494 
00495         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  netMask="</span>
00496            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), lsa.<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00497            &lt;&lt; <span class="stringliteral">"\n"</span>;
00498         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  attachedRouters:\n"</span>;
00499 
00500         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> routerCount = lsa.<a class="code" href="class_o_s_p_f_network_l_s_a.html#a10">getAttachedRoutersArraySize</a> ();
00501         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; routerCount; j++) {
00502             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"    "</span>
00503                &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), lsa.<a class="code" href="class_o_s_p_f_network_l_s_a.html#a11">getAttachedRouters</a> (j).<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00504                &lt;&lt; <span class="stringliteral">"\n"</span>;
00505         }
00506     }
00507 
00508     updateCount = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a20">getSummaryLSAsArraySize</a> ();
00509     <span class="keywordflow">for</span> (i = 0; i &lt; updateCount; i++) {
00510         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_summary_l_s_a.html">OSPFSummaryLSA</a>&amp; lsa = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a21">getSummaryLSAs</a>(i);
00511         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  "</span>;
00512         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (lsa.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ());
00513         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00514 
00515         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  netMask="</span>
00516            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), lsa.<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00517            &lt;&lt; <span class="stringliteral">"\n"</span>;
00518         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  cost="</span>
00519            &lt;&lt; lsa.<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a9">getRouteCost</a> ()
00520            &lt;&lt; <span class="stringliteral">"\n"</span>;
00521     }
00522 
00523     updateCount = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a25">getAsExternalLSAsArraySize</a> ();
00524     <span class="keywordflow">for</span> (i = 0; i &lt; updateCount; i++) {
00525         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a>&amp; lsa = updatePacket-&gt;<a class="code" href="class_o_s_p_f_link_state_update_packet.html#a26">getAsExternalLSAs</a>(i);
00526         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  "</span>;
00527         <a class="code" href="_l_s_a_8h.html#a10">PrintLSAHeader</a> (lsa.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ());
00528         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00529 
00530         <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html">OSPFASExternalLSAContents</a>&amp; contents = lsa.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ();
00531         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  netMask="</span>
00532            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), contents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00533            &lt;&lt; <span class="stringliteral">"\n"</span>;
00534         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  bits="</span>
00535            &lt;&lt; ((contents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a9">getE_ExternalMetricType</a> ()) ? <span class="stringliteral">"E\n"</span> : <span class="stringliteral">"_\n"</span>);
00536         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  cost="</span>
00537            &lt;&lt; contents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a11">getRouteCost</a> ()
00538            &lt;&lt; <span class="stringliteral">"\n"</span>;
00539         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"  forward="</span>
00540            &lt;&lt; <a class="code" href="_o_s_p_fcommon_8h.html#a58">AddressStringFromULong</a> (addressString, <span class="keyword">sizeof</span> (addressString), contents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a13">getForwardingAddress</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ())
00541            &lt;&lt; <span class="stringliteral">"\n"</span>;
00542     }
00543 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="OSPF::MessageHandler::ProcessPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::ProcessPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unused1</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unused2</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00149 {
00150     <span class="comment">// packet version must be OSPF version 2</span>
00151     <span class="keywordflow">if</span> (packet-&gt;<a class="code" href="class_o_s_p_f_packet.html#a7">getVersion</a> () == 2) {
00152         <a class="code" href="class_i_p_control_info.html">IPControlInfo</a>*  controlInfo = check_and_cast&lt;IPControlInfo *&gt; (packet-&gt;controlInfo ());
00153         <span class="keywordtype">int</span>             interfaceId = controlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a9">interfaceId</a> ();
00154         OSPF::AreaID    areaID      = packet-&gt;<a class="code" href="class_o_s_p_f_packet.html#a16">getAreaID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00155         <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>*     area        = <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#p0">router</a>-&gt;GetArea (areaID);
00156 
00157         <span class="keywordflow">if</span> (area != NULL) {
00158             <span class="comment">// packet Area ID must either match the Area ID of the receiving interface or...</span>
00159             <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf = area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a33">GetInterface</a> (interfaceId);
00160 
00161             <span class="keywordflow">if</span> (intf == NULL) {
00162                 <span class="comment">// it must be the backbone area and...</span>
00163                 <span class="keywordflow">if</span> (areaID == BackboneAreaID) {
00164                     <span class="keywordflow">if</span> (<a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#p0">router</a>-&gt;GetAreaCount () &gt; 1) {
00165                         <span class="comment">// it must be a virtual link and the source router's router ID must be the endpoint of this virtual link and...</span>
00166                         intf = area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a36">FindVirtualLink</a> (packet-&gt;<a class="code" href="class_o_s_p_f_packet.html#a13">getRouterID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
00167 
00168                         <span class="keywordflow">if</span> (intf != NULL) {
00169                             <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* virtualLinkTransitArea = <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#p0">router</a>-&gt;GetArea (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a27">GetTransitAreaID</a> ());
00170 
00171                             <span class="keywordflow">if</span> (virtualLinkTransitArea != NULL) {
00172                                 <span class="comment">// the receiving interface must attach to the virtual link's configured transit area</span>
00173                                 <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* virtualLinkInterface = virtualLinkTransitArea-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a33">GetInterface</a> (interfaceId);
00174 
00175                                 <span class="keywordflow">if</span> (virtualLinkInterface == NULL) {
00176                                     intf = NULL;
00177                                 }
00178                             } <span class="keywordflow">else</span> {
00179                                 intf = NULL;
00180                             }
00181                         }
00182                     }
00183                 }
00184             }
00185             <span class="keywordflow">if</span> (intf != NULL) {
00186                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                       destinationAddress = controlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a3">destAddr</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00187                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                       allDRouters        = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (OSPF::AllDRouters);
00188                 <a class="code" href="class_o_s_p_f_1_1_interface.html#w24">OSPF::Interface::InterfaceStateType</a> interfaceState     = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a9">GetState</a> ();
00189 
00190                 <span class="comment">// if destination address is AllDRouters the receiving interface must be in DesignatedRouter or Backup state</span>
00191                 <span class="keywordflow">if</span> (
00192                     ((destinationAddress == allDRouters) &amp;&amp;
00193                      (
00194                       (interfaceState == OSPF::Interface::DesignatedRouterState) ||
00195                       (interfaceState == OSPF::Interface::BackupState)
00196                      )
00197                     ) ||
00198                     (destinationAddress != allDRouters)
00199                    )
00200                 {
00201                     <span class="comment">// packet authentication</span>
00202                     <span class="keywordflow">if</span> (AuthenticatePacket (packet)) {
00203                         <a class="code" href="_o_s_p_f_packet__m_8h.html#a53">OSPFPacketType</a>  packetType = static_cast&lt;OSPFPacketType&gt; (packet-&gt;getType ());
00204                         <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor   = NULL;
00205 
00206                         <span class="comment">// all packets except HelloPackets are sent only along adjacencies, so a Neighbor must exist</span>
00207                         <span class="keywordflow">if</span> (packetType != HelloPacket) {
00208                             <span class="keywordflow">switch</span> (intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a19">GetType</a> ()) {
00209                                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w11">OSPF::Interface::Broadcast</a>:
00210                                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w12">OSPF::Interface::NBMA</a>:
00211                                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w13">OSPF::Interface::PointToMultiPoint</a>:
00212                                     neighbor = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a7">GetNeighborByAddress</a> (IPv4AddressFromULong (controlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a6">srcAddr</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()));
00213                                     <span class="keywordflow">break</span>;
00214                                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w10">OSPF::Interface::PointToPoint</a>:
00215                                 <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_interface.html#w23w14">OSPF::Interface::Virtual</a>:
00216                                     neighbor = intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a6">GetNeighborByID</a> (packet-&gt;getRouterID ().getInt ());
00217                                     <span class="keywordflow">break</span>;
00218                                 <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
00219                             }
00220                         }
00221                         <span class="keywordflow">switch</span> (packetType) {
00222                             <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a1">HelloPacket</a>:
00223                                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r1">helloHandler</a>.ProcessPacket (packet, intf);
00224                                 <span class="keywordflow">break</span>;
00225                             <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a2">DatabaseDescriptionPacket</a>:
00226                                 <span class="keywordflow">if</span> (neighbor != NULL) {
00227                                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r2">ddHandler</a>.ProcessPacket (packet, intf, neighbor);
00228                                 }
00229                                 <span class="keywordflow">break</span>;
00230                             <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a3">LinkStateRequestPacket</a>:
00231                                 <span class="keywordflow">if</span> (neighbor != NULL) {
00232                                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r3">lsRequestHandler</a>.ProcessPacket (packet, intf, neighbor);
00233                                 }
00234                                 <span class="keywordflow">break</span>;
00235                             <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a4">LinkStateUpdatePacket</a>:
00236                                 <span class="keywordflow">if</span> (neighbor != NULL) {
00237                                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r4">lsUpdateHandler</a>.ProcessPacket (packet, intf, neighbor);
00238                                 }
00239                                 <span class="keywordflow">break</span>;
00240                             <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a5">LinkStateAcknowledgementPacket</a>:
00241                                 <span class="keywordflow">if</span> (neighbor != NULL) {
00242                                     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r5">lsAckHandler</a>.ProcessPacket (packet, intf, neighbor);
00243                                 }
00244                                 <span class="keywordflow">break</span>;
00245                             <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
00246                         }
00247                     }
00248                 }
00249             }
00250         }
00251     }
00252     <span class="keyword">delete</span> packet;
00253 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="OSPF::MessageHandler::SendPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::SendPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>outputIfIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap> <em>ttl</em> = <code>1</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00256 {
00257     <a class="code" href="class_i_p_control_info.html">IPControlInfo</a> *ipControlInfo = <span class="keyword">new</span> <a class="code" href="class_i_p_control_info.html">IPControlInfo</a> ();
00258     ipControlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a12">setProtocol</a> (IP_PROT_OSPF);
00259     ipControlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a5">setDestAddr</a> (ULongFromIPv4Address (destination));
00260     ipControlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a16">setTimeToLive</a> (ttl);
00261     ipControlInfo-&gt;<a class="code" href="class_i_p_control_info___base.html#a10">setInterfaceId</a> (outputIfIndex);
00262 
00263     packet-&gt;setControlInfo (ipControlInfo);
00264     <span class="keywordflow">switch</span> (packet-&gt;<a class="code" href="class_o_s_p_f_packet.html#a9">getType</a> ()) {
00265         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a1">HelloPacket</a>:
00266             {
00267                 packet-&gt;setKind (HelloPacket);
00268                 packet-&gt;setName (<span class="stringliteral">"OSPF_HelloPacket"</span>);
00269 
00270                 <a class="code" href="class_o_s_p_f_hello_packet.html">OSPFHelloPacket</a>* helloPacket = check_and_cast&lt;OSPFHelloPacket*&gt; (packet);
00271                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a8">PrintHelloPacket</a> (helloPacket, destination, outputIfIndex);
00272             }
00273             <span class="keywordflow">break</span>;
00274         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a2">DatabaseDescriptionPacket</a>:
00275             {
00276                 packet-&gt;setKind (DatabaseDescriptionPacket);
00277                 packet-&gt;setName (<span class="stringliteral">"OSPF_DDPacket"</span>);
00278 
00279                 <a class="code" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a>* ddPacket = check_and_cast&lt;OSPFDatabaseDescriptionPacket*&gt; (packet);
00280                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a9">PrintDatabaseDescriptionPacket</a> (ddPacket, destination, outputIfIndex);
00281             }
00282             <span class="keywordflow">break</span>;
00283         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a3">LinkStateRequestPacket</a>:
00284             {
00285                 packet-&gt;setKind (LinkStateRequestPacket);
00286                 packet-&gt;setName (<span class="stringliteral">"OSPF_LSReqPacket"</span>);
00287 
00288                 <a class="code" href="class_o_s_p_f_link_state_request_packet.html">OSPFLinkStateRequestPacket</a>* requestPacket = check_and_cast&lt;OSPFLinkStateRequestPacket*&gt; (packet);
00289                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a10">PrintLinkStateRequestPacket</a> (requestPacket, destination, outputIfIndex);
00290             }
00291             <span class="keywordflow">break</span>;
00292         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a4">LinkStateUpdatePacket</a>:
00293             {
00294                 packet-&gt;setKind (LinkStateUpdatePacket);
00295                 packet-&gt;setName (<span class="stringliteral">"OSPF_LSUpdPacket"</span>);
00296 
00297                 <a class="code" href="class_o_s_p_f_link_state_update_packet.html">OSPFLinkStateUpdatePacket</a>* updatePacket = check_and_cast&lt;OSPFLinkStateUpdatePacket*&gt; (packet);
00298                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a11">PrintLinkStateUpdatePacket</a> (updatePacket, destination, outputIfIndex);
00299             }
00300             <span class="keywordflow">break</span>;
00301         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a53a5">LinkStateAcknowledgementPacket</a>:
00302             {
00303                 packet-&gt;setKind (LinkStateAcknowledgementPacket);
00304                 packet-&gt;setName (<span class="stringliteral">"OSPF_LSAckPacket"</span>);
00305 
00306                 <a class="code" href="class_o_s_p_f_link_state_acknowledgement_packet.html">OSPFLinkStateAcknowledgementPacket</a>* ackPacket = check_and_cast&lt;OSPFLinkStateAcknowledgementPacket*&gt; (packet);
00307                 <a class="code" href="class_o_s_p_f_1_1_message_handler.html#a12">PrintLinkStateAcknowledgementPacket</a> (ackPacket, destination, outputIfIndex);
00308             }
00309             <span class="keywordflow">break</span>;
00310         <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
00311     }
00312 
00313     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a>-&gt;send (packet,<span class="stringliteral">"to_ip"</span>);
00314 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="OSPF::MessageHandler::StartTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::MessageHandler::StartTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>simtime_t&nbsp;</td>
          <td class="mdname" nowrap> <em>delay</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00322 {
00323     <a class="code" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a>-&gt;scheduleAt (<a class="code" href="class_o_s_p_f_1_1_message_handler.html#r0">ospfModule</a>-&gt;simTime () + delay, timer);
00324 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r2" doxytag="OSPF::MessageHandler::ddHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_database_description_handler.html">DatabaseDescriptionHandler</a> <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r2">OSPF::MessageHandler::ddHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="OSPF::MessageHandler::helloHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_hello_handler.html">HelloHandler</a> <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r1">OSPF::MessageHandler::helloHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="OSPF::MessageHandler::lsAckHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_acknowledgement_handler.html">LinkStateAcknowledgementHandler</a> <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r5">OSPF::MessageHandler::lsAckHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="OSPF::MessageHandler::lsRequestHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_request_handler.html">LinkStateRequestHandler</a> <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r3">OSPF::MessageHandler::lsRequestHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="OSPF::MessageHandler::lsUpdateHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_link_state_update_handler.html">LinkStateUpdateHandler</a> <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r4">OSPF::MessageHandler::lsUpdateHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="OSPF::MessageHandler::ospfModule"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cSimpleModule* <a class="el" href="class_o_s_p_f_1_1_message_handler.html#r0">OSPF::MessageHandler::ospfModule</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_message_handler_8h.html">MessageHandler.h</a><li><a class="el" href="_message_handler_8cc.html">MessageHandler.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:33 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
