<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: ChannelControl Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>ChannelControl Class Reference</h1><code>#include &lt;ChannelControl.h&gt;</code>
<p>
<a href="class_channel_control-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Monitors which hosts are "in range". Supports multiple channels. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="class_channel_access.html">ChannelAccess</a> </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#w0">HostRef</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; cModule * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#w1">ModuleList</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::list&lt; <a class="el" href="class_air_frame.html">AirFrame</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#w2">TransmissionList</a></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a0">ChannelControl</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a1">~ChannelControl</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a2">registerHost</a> (cModule *host, const <a class="el" href="class_coord.html">Coord</a> &amp;initialPos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers the given host.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a3">lookupHost</a> (cModule *host)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the "handle" of a previously registered host.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a4">updateHostPosition</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h, const <a class="el" href="class_coord.html">Coord</a> &amp;pos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To be called when the host moved; updates proximity info.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a5">updateHostChannel</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h, const int channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when host switches channel.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_channel_control.html#w2">TransmissionList</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a6">getOngoingTransmissions</a> (const int channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Provides a list of transmissions currently on the air.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a7">addOngoingTransmission</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h, <a class="el" href="class_air_frame.html">AirFrame</a> *frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notifies the channel control with an ongoing transmission.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_coord.html">Coord</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a8">getHostPosition</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the host's position.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_channel_control.html#w1">ModuleList</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a9">getNeighbors</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the list of modules in range of the given host.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a10">getCommunicationRange</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads init parameters and calculates a maximal interference distance.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_coord.html">Coord</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a11">getPgs</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the playground size.  <a href="#a11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#a12">getNumChannels</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of radio channels (frequencies) simulated.  <a href="#a12"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::list&lt; <a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#x0">HostList</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; <a class="el" href="class_channel_control.html#w2">TransmissionList</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#x1">ChannelTransmissionLists</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">keeps track of ongoing transmissions; this is needed when a host switches to another channel (then it needs to know whether the target channel is empty or busy)  <a href="#x1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b0">updateConnections</a> (<a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a> h)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b1">calcInterfDist</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate interference distance.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b2">updateDisplayString</a> (cModule *playgroundMod)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set up playground module's display string.  <a href="#b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b3">initialize</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads init parameters and calculates a maximal interference distance.  <a href="#b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b4">purgeOngoingTransmissions</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Throws away expired transmissions.  <a href="#b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#b5">checkChannel</a> (const int channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Validate the channel identifier.  <a href="#b5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_channel_control.html#x0">HostList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p0">hosts</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_channel_control.html#x1">ChannelTransmissionLists</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p1">transmissions</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p2">lastOngoingTransmissionsUpdate</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">used to clear the transmission list from time to time  <a href="#p2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p3">coreDebug</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set debugging for the basic module.  <a href="#p3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_coord.html">Coord</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p4">playgroundSize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">x and y size of the area the nodes are in (in meters)  <a href="#p4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p5">maxInterferenceDistance</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the biggest interference distance in the network.  <a href="#p5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#p6">numChannels</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the number of controlled channels  <a href="#p6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#n0">operator&lt;&lt;</a> (std::ostream &amp;, const <a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_channel_control.html#n1">operator&lt;&lt;</a> (std::ostream &amp;, const <a class="el" href="class_channel_control.html#w2">TransmissionList</a> &amp;)</td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a></td></tr>

</table>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="x1" doxytag="ChannelControl::ChannelTransmissionLists"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;<a class="el" href="class_channel_control.html#w2">TransmissionList</a>&gt; <a class="el" href="class_channel_control.html#x1">ChannelControl::ChannelTransmissionLists</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
keeps track of ongoing transmissions; this is needed when a host switches to another channel (then it needs to know whether the target channel is empty or busy) 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="x0" doxytag="ChannelControl::HostList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::list&lt;<a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a>&gt; <a class="el" href="class_channel_control.html#x0">ChannelControl::HostList</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="w0" doxytag="ChannelControl::HostRef"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a>* <a class="el" href="struct_channel_control_1_1_host_entry.html">ChannelControl::HostRef</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="w1" doxytag="ChannelControl::ModuleList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;cModule*&gt; <a class="el" href="class_channel_control.html#w1">ChannelControl::ModuleList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="w2" doxytag="ChannelControl::TransmissionList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::list&lt;<a class="el" href="class_air_frame.html">AirFrame</a>*&gt; <a class="el" href="class_channel_control.html#w2">ChannelControl::TransmissionList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="ChannelControl::ChannelControl"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ChannelControl::ChannelControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00043 {
00044 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ChannelControl::~ChannelControl"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ChannelControl::~<a class="el" href="class_channel_control.html">ChannelControl</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00047 {
00048     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_channel_control.html#p1">transmissions</a>.size(); i++)
00049         <span class="keywordflow">for</span> (TransmissionList::iterator it = transmissions[i].begin(); it != transmissions[i].end(); it++)
00050             delete *it;
00051 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a7" doxytag="ChannelControl::addOngoingTransmission"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::addOngoingTransmission           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_air_frame.html">AirFrame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>frame</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Notifies the channel control with an ongoing transmission. 
<p>
<div class="fragment"><pre class="fragment">00234 {
00235     Enter_Method_Silent();
00236 
00237     <span class="comment">// we only keep track of ongoing transmissions so that we can support</span>
00238     <span class="comment">// NICs switching channels -- so there's no point doing it if there's only</span>
00239     <span class="comment">// one channel</span>
00240     <span class="keywordflow">if</span> (numChannels==1)
00241     {
00242         <span class="keyword">delete</span> frame;
00243         <span class="keywordflow">return</span>;
00244     }
00245 
00246     <span class="comment">// purge old transmissions from time to time</span>
00247     <span class="keywordflow">if</span> (simTime() - lastOngoingTransmissionsUpdate &gt; TRANSMISSION_PURGE_INTERVAL)
00248     {
00249         <a class="code" href="class_channel_control.html#b4">purgeOngoingTransmissions</a>();
00250         <a class="code" href="class_channel_control.html#p2">lastOngoingTransmissionsUpdate</a> = simTime();
00251     }
00252 
00253     <span class="comment">// register ongoing transmission</span>
00254     take(frame);
00255     frame-&gt;setTimestamp(); <span class="comment">// store time of transmission start</span>
00256     <a class="code" href="class_channel_control.html#p1">transmissions</a>[frame-&gt;<a class="code" href="class_air_frame.html#a9">getChannelNumber</a>()].push_back(frame);
00257 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="ChannelControl::calcInterfDist"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double ChannelControl::calcInterfDist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculate interference distance. 
<p>
Calculation of the interference distance based on the transmitter power, wavelength, pathloss coefficient and a threshold for the minimal receive Power<p>
You may want to overwrite this function in order to do your own interference calculation <div class="fragment"><pre class="fragment">00104 {
00105     <span class="keywordtype">double</span> SPEED_OF_LIGHT = 300000000.0;
00106     <span class="keywordtype">double</span> interfDistance;
00107 
00108     <span class="comment">//the carrier frequency used</span>
00109     <span class="keywordtype">double</span> carrierFrequency = par(<span class="stringliteral">"carrierFrequency"</span>);
00110     <span class="comment">//maximum transmission power possible</span>
00111     <span class="keywordtype">double</span> pMax = par(<span class="stringliteral">"pMax"</span>);
00112     <span class="comment">//signal attenuation threshold</span>
00113     <span class="keywordtype">double</span> sat = par(<span class="stringliteral">"sat"</span>);
00114     <span class="comment">//path loss coefficient</span>
00115     <span class="keywordtype">double</span> alpha = par(<span class="stringliteral">"alpha"</span>);
00116 
00117     <span class="keywordtype">double</span> waveLength = (SPEED_OF_LIGHT / carrierFrequency);
00118     <span class="comment">//minimum power level to be able to physically receive a signal</span>
00119     <span class="keywordtype">double</span> minReceivePower = pow(10.0, sat / 10.0);
00120 
00121     interfDistance = pow(waveLength * waveLength * pMax /
00122                          (16.0 * M_PI * M_PI * minReceivePower), 1.0 / alpha);
00123 
00124     <a class="code" href="_basic_module_8cc.html#a0">coreEV</a> &lt;&lt; <span class="stringliteral">"max interference distance:"</span> &lt;&lt; interfDistance &lt;&lt; endl;
00125 
00126     <span class="keywordflow">return</span> interfDistance;
00127 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b5" doxytag="ChannelControl::checkChannel"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::checkChannel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>channel</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Validate the channel identifier. 
<p>
<div class="fragment"><pre class="fragment">00204 {
00205     <span class="keywordflow">if</span> (channel &gt;= numChannels || channel &lt; 0)
00206         error("Invalid channel, must be between 0 and %d", numChannels);
00207 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="ChannelControl::getCommunicationRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double ChannelControl::getCommunicationRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads init parameters and calculates a maximal interference distance. 
<p>
<div class="fragment"><pre class="fragment">00140                                             {
00141         <span class="keywordflow">return</span> <a class="code" href="class_channel_control.html#p5">maxInterferenceDistance</a>;
00142     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ChannelControl::getHostPosition"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_coord.html">Coord</a>&amp; ChannelControl::getHostPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the host's position. 
<p>
<div class="fragment"><pre class="fragment">00134 {<span class="keywordflow">return</span> h-&gt;pos;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ChannelControl::getNeighbors"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_channel_control.html#w1">ChannelControl::ModuleList</a> &amp; ChannelControl::getNeighbors           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the list of modules in range of the given host. 
<p>
<div class="fragment"><pre class="fragment">00156 {
00157     Enter_Method_Silent();
00158     <span class="keywordflow">if</span> (!h-&gt;isModuleListValid)
00159     {
00160         h-&gt;neighborModules.clear();
00161         <span class="keywordflow">for</span> (std::set&lt;HostRef&gt;::const_iterator it = h-&gt;neighbors.begin(); it != h-&gt;neighbors.end(); it++)
00162             h-&gt;neighborModules.push_back((*it)-&gt;host);
00163         h-&gt;isModuleListValid = <span class="keyword">true</span>;
00164     }
00165     <span class="keywordflow">return</span> h-&gt;neighborModules;
00166 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="ChannelControl::getNumChannels"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const int ChannelControl::getNumChannels           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of radio channels (frequencies) simulated. 
<p>
<div class="fragment"><pre class="fragment">00148 {<span class="keywordflow">return</span> <a class="code" href="class_channel_control.html#p6">numChannels</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ChannelControl::getOngoingTransmissions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_channel_control.html#w2">ChannelControl::TransmissionList</a> &amp; ChannelControl::getOngoingTransmissions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>channel</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provides a list of transmissions currently on the air. 
<p>
<div class="fragment"><pre class="fragment">00225 {
00226     Enter_Method_Silent();
00227 
00228     <a class="code" href="class_channel_control.html#b5">checkChannel</a>(channel);
00229     <a class="code" href="class_channel_control.html#b4">purgeOngoingTransmissions</a>();
00230     <span class="keywordflow">return</span> <a class="code" href="class_channel_control.html#p1">transmissions</a>[channel];
00231 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="ChannelControl::getPgs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_coord.html">Coord</a>* ChannelControl::getPgs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the playground size. 
<p>
<div class="fragment"><pre class="fragment">00145 {<span class="keywordflow">return</span> &amp;<a class="code" href="class_channel_control.html#p4">playgroundSize</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="ChannelControl::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads init parameters and calculates a maximal interference distance. 
<p>
Sets up the playgroundSize and calculates the maxInterferenceDistance<p>
<a class="el" href="class_channel_control.html#b1">calcInterfDist</a> <div class="fragment"><pre class="fragment">00060 {
00061     <a class="code" href="class_channel_control.html#p3">coreDebug</a> = hasPar(<span class="stringliteral">"coreDebug"</span>) ? (bool) par(<span class="stringliteral">"coreDebug"</span>) : false;
00062 
00063     <a class="code" href="_basic_module_8cc.html#a0">coreEV</a> &lt;&lt; <span class="stringliteral">"initializing ChannelControl\n"</span>;
00064 
00065     <a class="code" href="class_channel_control.html#p4">playgroundSize</a>.<a class="code" href="class_coord.html#o0">x</a> = par(<span class="stringliteral">"playgroundSizeX"</span>);
00066     <a class="code" href="class_channel_control.html#p4">playgroundSize</a>.<a class="code" href="class_coord.html#o1">y</a> = par(<span class="stringliteral">"playgroundSizeY"</span>);
00067 
00068     <a class="code" href="class_channel_control.html#p6">numChannels</a> = par(<span class="stringliteral">"numChannels"</span>);
00069     <a class="code" href="class_channel_control.html#p1">transmissions</a>.resize(numChannels);
00070 
00071     <a class="code" href="class_channel_control.html#p2">lastOngoingTransmissionsUpdate</a> = 0;
00072 
00073     <a class="code" href="class_channel_control.html#p5">maxInterferenceDistance</a> = <a class="code" href="class_channel_control.html#b1">calcInterfDist</a>();
00074 
00075     WATCH(maxInterferenceDistance);
00076     WATCH_LIST(hosts);
00077     WATCH_VECTOR(transmissions);
00078 
00079     <a class="code" href="class_channel_control.html#b2">updateDisplayString</a>(parentModule());
00080 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ChannelControl::lookupHost"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">ChannelControl::HostRef</a> ChannelControl::lookupHost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the "handle" of a previously registered host. 
<p>
<div class="fragment"><pre class="fragment">00147 {
00148     Enter_Method_Silent();
00149     <span class="keywordflow">for</span> (HostList::iterator it = <a class="code" href="class_channel_control.html#p0">hosts</a>.begin(); it != <a class="code" href="class_channel_control.html#p0">hosts</a>.end(); it++)
00150         <span class="keywordflow">if</span> (it-&gt;host == host)
00151             return &amp;(*it);
00152     return 0;
00153 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="ChannelControl::purgeOngoingTransmissions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::purgeOngoingTransmissions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Throws away expired transmissions. 
<p>
<div class="fragment"><pre class="fragment">00260 {
00261     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numChannels; i++)
00262     {
00263         <span class="keywordflow">for</span> (TransmissionList::iterator it = transmissions[i].begin(); it != transmissions[i].end();)
00264         {
00265             TransmissionList::iterator curr = it;
00266             <a class="code" href="class_air_frame.html">AirFrame</a> *frame = *it;
00267             it++;
00268 
00269             <span class="keywordflow">if</span> (frame-&gt;timestamp() + frame-&gt;<a class="code" href="class_air_frame.html#a11">getDuration</a>() + <a class="code" href="_channel_control_8h.html#a1">TRANSMISSION_PURGE_INTERVAL</a> &lt; simTime())
00270             {
00271                 <span class="keyword">delete</span> frame;
00272                 <a class="code" href="class_channel_control.html#p1">transmissions</a>[i].erase(curr);
00273             }
00274         }
00275     }
00276 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ChannelControl::registerHost"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">ChannelControl::HostRef</a> ChannelControl::registerHost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname" nowrap> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_coord.html">Coord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>initialPos</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers the given host. 
<p>
<div class="fragment"><pre class="fragment">00130 {
00131     Enter_Method_Silent();
00132     <span class="keywordflow">if</span> (<a class="code" href="class_channel_control.html#a3">lookupHost</a>(host) != NULL)
00133         error("<a class="code" href="class_channel_control.html">ChannelControl</a>::registerHost(): host (%s)%s already registered",
00134               host-&gt;className(), host-&gt;fullPath().c_str());
00135 
00136     HostEntry he;
00137     he.host = host;
00138     he.pos = initialPos;
00139     he.isModuleListValid = false;
00140     <span class="comment">// TODO: get it from caller</span>
00141     he.channel = 0;
00142     hosts.push_back(he);
00143     return &amp;hosts.back(); <span class="comment">// last element</span>
00144 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="ChannelControl::updateConnections"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::updateConnections           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00169 {
00170     <a class="code" href="class_coord.html">Coord</a>&amp; hpos = h-&gt;pos;
00171     <span class="keywordtype">double</span> maxDistSquared = <a class="code" href="class_channel_control.html#p5">maxInterferenceDistance</a> * <a class="code" href="class_channel_control.html#p5">maxInterferenceDistance</a>;
00172     <span class="keywordflow">for</span> (HostList::iterator it = <a class="code" href="class_channel_control.html#p0">hosts</a>.begin(); it != <a class="code" href="class_channel_control.html#p0">hosts</a>.end(); ++it)
00173     {
00174         HostEntry *hi = &amp;(*it);
00175         <span class="keywordflow">if</span> (hi == h)
00176             continue;
00177 
00178         <span class="comment">// get the distance between the two hosts.</span>
00179         <span class="comment">// (omitting the square root (calling sqrdist() instead of distance()) saves about 5% CPU)</span>
00180         <span class="keywordtype">bool</span> inRange = hpos.sqrdist(hi-&gt;pos) &lt; maxDistSquared;
00181 
00182         if (inRange)
00183         {
00184             <span class="comment">// nodes within communication range: connect</span>
00185             <span class="keywordflow">if</span> (h-&gt;neighbors.insert(hi).second == <span class="keyword">true</span>)
00186             {
00187                 hi-&gt;neighbors.insert(h);
00188                 h-&gt;isModuleListValid = hi-&gt;isModuleListValid = <span class="keyword">false</span>;
00189             }
00190         }
00191         <span class="keywordflow">else</span>
00192         {
00193             <span class="comment">// out of range: disconnect</span>
00194             <span class="keywordflow">if</span> (h-&gt;neighbors.erase(hi))
00195             {
00196                 hi-&gt;neighbors.erase(h);
00197                 h-&gt;isModuleListValid = hi-&gt;isModuleListValid = <span class="keyword">false</span>;
00198             }
00199         }
00200     }
00201 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="ChannelControl::updateDisplayString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::updateDisplayString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>playgroundMod</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set up playground module's display string. 
<p>
Sets up background size by adding the following tags: "p=0,0;b=$playgroundSizeX,$playgroundSizeY" <div class="fragment"><pre class="fragment">00087 {
00088     cDisplayString&amp; d = playgroundMod-&gt;backgroundDisplayString();
00089     d.setTagArg(<span class="stringliteral">"p"</span>, 0, 0L);
00090     d.setTagArg(<span class="stringliteral">"p"</span>, 1, 0L);
00091     d.setTagArg(<span class="stringliteral">"b"</span>, 0, (<span class="keywordtype">long</span>) <a class="code" href="class_channel_control.html#p4">playgroundSize</a>.<a class="code" href="class_coord.html#o0">x</a>);
00092     d.setTagArg(<span class="stringliteral">"b"</span>, 1, (<span class="keywordtype">long</span>) <a class="code" href="class_channel_control.html#p4">playgroundSize</a>.<a class="code" href="class_coord.html#o1">y</a>);
00093 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ChannelControl::updateHostChannel"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::updateHostChannel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const int&nbsp;</td>
          <td class="mdname" nowrap> <em>channel</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when host switches channel. 
<p>
<div class="fragment"><pre class="fragment">00217 {
00218     Enter_Method_Silent();
00219     <a class="code" href="class_channel_control.html#b5">checkChannel</a>(channel);
00220 
00221     h-&gt;channel = channel;
00222 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ChannelControl::updateHostPosition"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ChannelControl::updateHostPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_channel_control_1_1_host_entry.html">HostRef</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_coord.html">Coord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pos</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
To be called when the host moved; updates proximity info. 
<p>
<div class="fragment"><pre class="fragment">00210 {
00211     Enter_Method_Silent();
00212     h-&gt;pos = pos;
00213     <a class="code" href="class_channel_control.html#b0">updateConnections</a>(h);
00214 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="n1" doxytag="ChannelControl::operator<<"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::ostream&amp; operator&lt;&lt;           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::ostream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_channel_control.html#w2">TransmissionList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [friend]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00036 {
00037     <span class="keywordflow">for</span> (ChannelControl::TransmissionList::const_iterator it = tl.begin(); it != tl.end(); ++it)
00038         os &lt;&lt; endl &lt;&lt; *it;
00039     <span class="keywordflow">return</span> os;
00040 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="n0" doxytag="ChannelControl::operator<<"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::ostream&amp; operator&lt;&lt;           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::ostream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="struct_channel_control_1_1_host_entry.html">HostEntry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [friend]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00029 {
00030     os &lt;&lt; h.host-&gt;fullPath() &lt;&lt; <span class="stringliteral">" (x="</span> &lt;&lt; h.pos.x &lt;&lt; <span class="stringliteral">",y="</span> &lt;&lt; h.pos.y &lt;&lt; <span class="stringliteral">"), "</span>
00031        &lt;&lt; h.neighbors.size() &lt;&lt; <span class="stringliteral">" neighbor(s)"</span>;
00032     <span class="keywordflow">return</span> os;
00033 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p3" doxytag="ChannelControl::coreDebug"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="class_channel_control.html#p3">ChannelControl::coreDebug</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set debugging for the basic module. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="ChannelControl::hosts"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_channel_control.html#x0">HostList</a> <a class="el" href="class_channel_control.html#p0">ChannelControl::hosts</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p2" doxytag="ChannelControl::lastOngoingTransmissionsUpdate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double <a class="el" href="class_channel_control.html#p2">ChannelControl::lastOngoingTransmissionsUpdate</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
used to clear the transmission list from time to time 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p5" doxytag="ChannelControl::maxInterferenceDistance"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double <a class="el" href="class_channel_control.html#p5">ChannelControl::maxInterferenceDistance</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
the biggest interference distance in the network. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p6" doxytag="ChannelControl::numChannels"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_channel_control.html#p6">ChannelControl::numChannels</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
the number of controlled channels 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p4" doxytag="ChannelControl::playgroundSize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_coord.html">Coord</a> <a class="el" href="class_channel_control.html#p4">ChannelControl::playgroundSize</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
x and y size of the area the nodes are in (in meters) 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="ChannelControl::transmissions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_channel_control.html#x1">ChannelTransmissionLists</a> <a class="el" href="class_channel_control.html#p1">ChannelControl::transmissions</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_channel_control_8h.html">ChannelControl.h</a><li><a class="el" href="_channel_control_8cc.html">ChannelControl.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:21 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
