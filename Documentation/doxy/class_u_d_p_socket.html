<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: UDPSocket Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>UDPSocket Class Reference</h1><code>#include &lt;UDPSocket.h&gt;</code>
<p>
<a href="class_u_d_p_socket-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
UDPSocket is a convenience class, to make it easier to manage <a class="el" href="class_t_c_p.html">TCP</a> connections from your application models. You'd have one (or more) UDPSocket object(s) in your application simple module class, and call its member functions (<a class="el" href="class_u_d_p_socket.html#z135_1">bind()</a>, listen(), <a class="el" href="class_u_d_p_socket.html#z135_3">connect()</a>, etc.) to open, close or abort a <a class="el" href="class_t_c_p.html">TCP</a> connection.<p>
UDPSocket chooses and remembers the sockId for you, assembles and sends command packets (such as OPEN_ACTIVE, OPEN_PASSIVE, CLOSE, ABORT, etc.) to <a class="el" href="class_t_c_p.html">TCP</a>, and can also help you deal with packets and notification messages arriving from <a class="el" href="class_t_c_p.html">TCP</a>.<p>
A session which opens a connection from local port 1000 to 10.0.0.2:2000, sends 16K of data and closes the connection may be as simple as this (the code can be placed in your handleMessage() or activity()):<p>
<pre>
   UDPSocket socket;
   socket.connect(<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>("10.0.0.2"), 2000);</pre><p>
<pre>   msg = new cMessage("data1");
   msg-&gt;setByteLength(16*1024);  // 16K
   socket.send(msg);</pre><p>
<pre>   socket.close();
 </pre><p>
Dealing with packets and notification messages coming from <a class="el" href="class_t_c_p.html">TCP</a> is somewhat more cumbersome. Basically you have two choices: you either process those messages yourself, or let UDPSocket do part of the job. For the latter, you give UDPSocket a callback object on which it'll invoke the appropriate member functions: socketEstablished(), socketDataArrived(), socketFailure(), socketPeerClosed(), etc (these are methods of <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">UDPSocket::CallbackInterface</a>)., The callback object can be your simple module class too.<p>
This code skeleton example shows how to set up a UDPSocket to use the module itself as callback object:<p>
<pre>
 class MyModule : public cSimpleModule, public <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">UDPSocket::CallbackInterface</a>
 {
    UDPSocket socket;
    virtual void socketDataArrived(int sockId, void *yourPtr, cMessage *msg, bool urgent);
    virtual void socketFailure(int sockId, void *yourPtr, int code);
    ...
 };</pre><p>
<pre> void MyModule::initialize() {
    socket.setCallbackObject(this,NULL);
 }</pre><p>
<pre> void MyModule::handleMessage(cMessage *msg) {
    if (socket.belongsToSocket(msg))
       socket.processMessage(msg);
    else
       ...
 }</pre><p>
<pre> void MyModule::socketDatagramArrived(int, void *, cMessage *msg, UDPControlInfo *ctrl) {
     ev &lt;&lt; "Received UDP packet, " &lt;&lt; msg-&gt;byteLength() &lt;&lt; " bytes\\n";
     delete msg;
 }</pre><p>
<pre> void MyModule::socketPeerClosed(int, void *, int code) {
     ev &lt;&lt; "Socket peer closed!\\n";
 }
 </pre><p>
If you need to manage a large number of sockets, the UDPSocketMap class may be useful.<p>
<dl compact><dt><b>See also:</b></dt><dd>UDPSocketMap </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Handling of messages arriving from UDP</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z137_0">belongsToSocket</a> (cMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z137_1">setCallbackObject</a> (<a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a> *<a class="el" href="class_u_d_p_socket.html#p8">cb</a>, void *<a class="el" href="class_u_d_p_socket.html#p9">yourPtr</a>=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z137_2">processMessage</a> (cMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z137_3">belongsToAnyUDPSocket</a> (cMessage *msg)</td></tr>

<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#w2">State</a> { <a class="el" href="class_u_d_p_socket.html#w2w0">NOT_BOUND</a>, 
<a class="el" href="class_u_d_p_socket.html#w2w1">BOUND</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a0">UDPSocket</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a1">~UDPSocket</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a2">socketId</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a3">setUserId</a> (int userId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a4">userId</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#a5">state</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Getter functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z133_0">localAddress</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z133_1">localPort</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Opening and closing connections, sending data</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_0">setOutputGate</a> (cGate *toUdp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_1">bind</a> (int localPort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_2">bind</a> (<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_u_d_p_socket.html#p3">localAddr</a>, int localPort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_3">connect</a> (<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_u_d_p_socket.html#p5">remoteAddr</a>, int remotePort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_4">setMulticastInterface</a> (int interfaceId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_5">multicastInterface</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_6">sendTo</a> (cMessage *msg, <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> destAddr, int destPort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_7">send</a> (cMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#z135_8">close</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#e0">stateName</a> (int state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#e1">generateSocketId</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#b0">sendToUDP</a> (cMessage *msg)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p0">sockId</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p1">usrId</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p2">sockstate</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p3">localAddr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p4">localPrt</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p5">remoteAddr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p6">remotePrt</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p7">mcastIfaceId</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p8">cb</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p9">yourPtr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">cGate *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket.html#p10">gateToUdp</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a></td></tr>

</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w2" doxytag="UDPSocket::State"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="class_u_d_p_socket.html#w2">UDPSocket::State</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w2w0" doxytag="NOT_BOUND"></a>NOT_BOUND</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w2w1" doxytag="BOUND"></a>BOUND</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00118 {<a class="code" href="class_u_d_p_socket.html#w2w0">NOT_BOUND</a>, <a class="code" href="class_u_d_p_socket.html#w2w1">BOUND</a>};  <span class="comment">// FIXME needed?</span>
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="UDPSocket::UDPSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UDPSocket::UDPSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. The <a class="el" href="class_u_d_p_socket.html#a2">socketId()</a> method returns a valid Id right after constructor call. <div class="fragment"><pre class="fragment">00023 {
00024     <span class="comment">// don't allow user-specified sockIds because they may conflict with</span>
00025     <span class="comment">// automatically assigned ones.</span>
00026     <a class="code" href="class_u_d_p_socket.html#p0">sockId</a> = <a class="code" href="class_u_d_p_socket.html#e1">generateSocketId</a>();
00027     <a class="code" href="class_u_d_p_socket.html#p1">usrId</a> = -1;
00028     <a class="code" href="class_u_d_p_socket.html#p2">sockstate</a> = <a class="code" href="class_u_d_p_socket.html#w2w0">NOT_BOUND</a>;
00029 
00030     <a class="code" href="class_u_d_p_socket.html#p4">localPrt</a> = <a class="code" href="class_u_d_p_socket.html#p6">remotePrt</a> = 0;
00031     <a class="code" href="class_u_d_p_socket.html#p7">mcastIfaceId</a> = -1;
00032     <a class="code" href="class_u_d_p_socket.html#p8">cb</a> = NULL;
00033     <a class="code" href="class_u_d_p_socket.html#p9">yourPtr</a> = NULL;
00034 
00035     <a class="code" href="class_u_d_p_socket.html#p10">gateToUdp</a> = NULL;
00036 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="UDPSocket::~UDPSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UDPSocket::~<a class="el" href="class_u_d_p_socket.html">UDPSocket</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor <div class="fragment"><pre class="fragment">00149 {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z137_3" doxytag="UDPSocket::belongsToAnyUDPSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool UDPSocket::belongsToAnyUDPSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the message belongs to any UDPSocket instance. (This basically checks if the message has an <a class="el" href="class_u_d_p_control_info.html">UDPControlInfo</a> attached to it as controlInfo().) <div class="fragment"><pre class="fragment">00175 {
00176     <span class="keywordflow">return</span> dynamic_cast&lt;UDPControlInfo *&gt;(msg-&gt;controlInfo());
00177 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z137_0" doxytag="UDPSocket::belongsToSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool UDPSocket::belongsToSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the message belongs to this socket instance (message has a <a class="el" href="class_u_d_p_control_info.html">UDPControlInfo</a> as controlInfo(), and the sockId in it matches that of the socket.) <div class="fragment"><pre class="fragment">00169 {
00170     <span class="keywordflow">return</span> dynamic_cast&lt;UDPControlInfo *&gt;(msg-&gt;controlInfo()) &amp;&amp;
00171            ((<a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *)(msg-&gt;controlInfo()))-&gt;sockId()==<a class="code" href="class_u_d_p_socket.html#p0">sockId</a>;
00172 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_2" doxytag="UDPSocket::bind"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::bind           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>localAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>localPort</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bind the socket to a local port number and <a class="el" href="class_i_p.html">IP</a> address (useful with multi-homing or multicast addresses). Use port=0 for an ephemeral port. <div class="fragment"><pre class="fragment">00092 {
00093     <span class="keywordflow">if</span> (sockstate!=NOT_BOUND)
00094         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::bind(): socket already bound");
00095     if (lPort&lt;=0 || lPort&gt;65535)
00096         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::bind(): invalid port number %d", lPort);
00097 
00098     localAddr = lAddr;
00099     localPrt = lPort;
00100 
00101     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = new <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a>();
00102     ctrl-&gt;setSockId(sockId);
00103     ctrl-&gt;setUserId(usrId);
00104     ctrl-&gt;setSrcAddr(localAddr);
00105     ctrl-&gt;setSrcPort(localPrt);
00106     cMessage *msg = new cMessage("BIND", UDP_C_BIND);
00107     msg-&gt;setControlInfo(ctrl);
00108     sendToUDP(msg);
00109 
00110     sockstate = BOUND;
00111 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_1" doxytag="UDPSocket::bind"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::bind           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>localPort</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bind the socket to a local port number. Use port=0 for ephemeral port. <div class="fragment"><pre class="fragment">00072 {
00073     <span class="keywordflow">if</span> (sockstate!=NOT_BOUND)
00074         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::bind(): socket already bound");
00075     if (lPort&lt;=0 || lPort&gt;65535)
00076         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::bind(): invalid port number %d", lPort);
00077 
00078     localPrt = lPort;
00079 
00080     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = new <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a>();
00081     ctrl-&gt;setSockId(sockId);
00082     ctrl-&gt;setUserId(usrId);
00083     ctrl-&gt;setSrcPort(localPrt);
00084     cMessage *msg = new cMessage("BIND", UDP_C_BIND);
00085     msg-&gt;setControlInfo(ctrl);
00086     sendToUDP(msg);
00087 
00088     sockstate = BOUND;
00089 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_8" doxytag="UDPSocket::close"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unbinds the socket. There is no need for renewSocket() as with <a class="el" href="class_t_c_p_socket.html">TCPSocket</a>. <div class="fragment"><pre class="fragment">00156 {
00157     <span class="keywordflow">if</span> (sockstate!=BOUND)
00158         return;
00159 
00160     cMessage *msg = new cMessage("UNBIND", UDP_C_UNBIND);
00161     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = new <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a>();
00162     ctrl-&gt;setSockId(sockId);
00163     msg-&gt;setControlInfo(ctrl);
00164     sendToUDP(msg);
00165     sockstate = NOT_BOUND;
00166 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_3" doxytag="UDPSocket::connect"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>remoteAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>remotePort</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connects to a remote <a class="el" href="class_u_d_p.html">UDP</a> socket. This has two effects: (1) this socket will only receive packets from specified address/port, and (2) you can use <a class="el" href="class_u_d_p_socket.html#z135_7">send()</a> (as opposed to <a class="el" href="class_u_d_p_socket.html#z135_6">sendTo()</a>) to send packets. <div class="fragment"><pre class="fragment">00114 {
00115     <span class="keywordflow">if</span> (sockstate!=BOUND)
00116         opp_error( "<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::connect(): socket must be bound before connect() can be called");
00117     if (addr.isUnspecified())
00118         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::connect(): unspecified remote address");
00119     if (port&lt;=0 || port&gt;65535)
00120         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::connect(): invalid remote port number %d", port);
00121 
00122     remoteAddr = addr;
00123     remotePrt = port;
00124 
00125     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = new <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a>();
00126     ctrl-&gt;setSockId(sockId);
00127     ctrl-&gt;setDestAddr(remoteAddr);
00128     ctrl-&gt;setDestPort(remotePrt);
00129     cMessage *msg = new cMessage("CONNECT", UDP_C_CONNECT);
00130     msg-&gt;setControlInfo(ctrl);
00131     sendToUDP(msg);
00132 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="UDPSocket::generateSocketId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::generateSocketId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generates a new socket id. <div class="fragment"><pre class="fragment">00052 {
00053     <span class="keywordflow">return</span> ev.getUniqueNumber();
00054 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z133_0" doxytag="UDPSocket::localAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> UDPSocket::localAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00186 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p3">localAddr</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z133_1" doxytag="UDPSocket::localPort"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::localPort           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00187 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p4">localPrt</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_5" doxytag="UDPSocket::multicastInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::multicastInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the output interface for sending multicast packets. <div class="fragment"><pre class="fragment">00227 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p7">mcastIfaceId</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z137_2" doxytag="UDPSocket::processMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::processMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Examines the message (which should have arrived from <a class="el" href="class_u_d_p.html">UDP</a>), and if there is a callback object installed (see <a class="el" href="class_u_d_p_socket.html#z137_1">setCallbackObject()</a>, class <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a>), dispatches to the appropriate method of it with the same yourPtr that you gave in the <a class="el" href="class_u_d_p_socket.html#z137_1">setCallbackObject()</a> call.<p>
IMPORTANT: for performance reasons, this method doesn't check that the message belongs to this socket, i.e. belongsToSocket(msg) would return true! <div class="fragment"><pre class="fragment">00186 {
00187     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = check_and_cast&lt;UDPControlInfo *&gt;(msg-&gt;removeControlInfo());
00188     ASSERT(ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a6">sockId</a>()==<a class="code" href="class_u_d_p_socket.html#p0">sockId</a>);
00189 
00190     <span class="keywordflow">switch</span> (msg-&gt;kind())
00191     {
00192         <span class="keywordflow">case</span> <a class="code" href="_u_d_p_control_info__m_8h.html#a10a5">UDP_I_DATA</a>:
00193              <span class="keywordflow">if</span> (cb)
00194                  cb-&gt;socketDatagramArrived(sockId, yourPtr, msg, ctrl);
00195              else {
00196                  <span class="keyword">delete</span> msg;
00197                  <span class="keyword">delete</span> ctrl;
00198              }
00199              <span class="keywordflow">break</span>;
00200         <span class="keywordflow">case</span> <a class="code" href="_u_d_p_control_info__m_8h.html#a10a6">UDP_I_ERROR</a>:
00201              <a class="code" href="class_u_d_p_socket.html#p2">sockstate</a> = <a class="code" href="class_u_d_p_socket.html#w2w0">NOT_BOUND</a>;
00202              <span class="keyword">delete</span> msg;
00203              <span class="keywordflow">if</span> (cb)
00204                  cb-&gt;socketPeerClosed(sockId, yourPtr);
00205              break;
00206         default:
00207              opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>: invalid msg kind %d, one of the UDP_I_xxx constants expected", msg-&gt;kind());
00208     }
00209 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_7" doxytag="UDPSocket::send"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a data packet to the address and port specified previously in a <a class="el" href="class_u_d_p_socket.html#z135_3">connect()</a> call. <div class="fragment"><pre class="fragment">00149 {
00150     <span class="keywordflow">if</span> (<a class="code" href="class_u_d_p_socket.html#p5">remoteAddr</a>.<a class="code" href="class_i_pv_x_address.html#z36_0">isUnspecified</a>() || <a class="code" href="class_u_d_p_socket.html#p6">remotePrt</a>==0)
00151         opp_error(<span class="stringliteral">"UDPSocket::send(): must call connect() before using send()"</span>);
00152     <a class="code" href="class_u_d_p_socket.html#z135_6">sendTo</a>(msg, remoteAddr, remotePrt);
00153 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_6" doxytag="UDPSocket::sendTo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::sendTo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>destPort</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a data packet to the given address and port. <div class="fragment"><pre class="fragment">00135 {
00136     msg-&gt;setKind(UDP_C_DATA);
00137     <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *ctrl = <span class="keyword">new</span> <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a>();
00138     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a7">setSockId</a>(sockId);
00139     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a12">setSrcAddr</a>(localAddr);
00140     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a17">setSrcPort</a>(localPrt);
00141     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a15">setDestAddr</a>(destAddr);
00142     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a19">setDestPort</a>(destPort);
00143     ctrl-&gt;<a class="code" href="class_u_d_p_control_info.html#a21">setInterfaceId</a>(mcastIfaceId);
00144     msg-&gt;setControlInfo(ctrl);
00145     <a class="code" href="class_u_d_p_socket.html#b0">sendToUDP</a>(msg);
00146 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="UDPSocket::sendToUDP"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::sendToUDP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00057 {
00058     <span class="keywordflow">if</span> (!gateToUdp)
00059         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>: setOutputGate() must be invoked before socket can be used");
00060 
00061     check_and_cast&lt;cSimpleModule *&gt;(gateToUdp-&gt;ownerModule())-&gt;send(msg, gateToUdp);
00062 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z137_1" doxytag="UDPSocket::setCallbackObject"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::setCallbackObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets a callback object, to be used with <a class="el" href="class_u_d_p_socket.html#z137_2">processMessage()</a>. This callback object may be your simple module itself (if it multiply inherits from <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a> too, that is you declared it as <pre>
 class MyAppModule : public cSimpleModule, public <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">UDPSocket::CallbackInterface</a>
 </pre> and redefined the necessary virtual functions; or you may use dedicated class (and objects) for this purpose.<p>
UDPSocket doesn't delete the callback object in the destructor or on any other occasion.<p>
YourPtr is an optional pointer. It may contain any value you wish -- UDPSocket will not look at it or do anything with it except passing it back to you in the <a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a> calls. You may find it useful if you maintain additional per-connection information: in that case you don't have to look it up by sockId in the callbacks, you can have it passed to you as yourPtr. <div class="fragment"><pre class="fragment">00180 {
00181     <a class="code" href="class_u_d_p_socket.html#p8">cb</a> = callback;
00182     <a class="code" href="class_u_d_p_socket.html#p9">yourPtr</a> = yourPointer;
00183 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_4" doxytag="UDPSocket::setMulticastInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::setMulticastInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>interfaceId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the output interface for sending multicast packets (like the Unix IP_MULTICAST_IF socket option). The argument is the interface's Id in <a class="el" href="class_interface_table.html">InterfaceTable</a>. <div class="fragment"><pre class="fragment">00222 {<a class="code" href="class_u_d_p_socket.html#p7">mcastIfaceId</a> = interfaceId;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z135_0" doxytag="UDPSocket::setOutputGate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::setOutputGate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cGate *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>toUdp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the gate on which to send to <a class="el" href="class_u_d_p.html">UDP</a>. Must be invoked before socket can be used. Example: <code>socket.setOutputGate(gate("udpOut"));</code> <div class="fragment"><pre class="fragment">00197 {<a class="code" href="class_u_d_p_socket.html#p10">gateToUdp</a> = toUdp;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="UDPSocket::setUserId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UDPSocket::setUserId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>userId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets userId to an arbitrary value. (This value will be sent back to us by <a class="el" href="class_u_d_p.html">UDP</a> in <a class="el" href="class_u_d_p_control_info.html">UDPControlInfo</a> if we receive a packet on this socket.) <div class="fragment"><pre class="fragment">00065 {
00066     <span class="keywordflow">if</span> (sockstate!=NOT_BOUND)
00067         opp_error("<a class="code" href="class_u_d_p_socket.html">UDPSocket</a>::setUserId(): cannot change userId after socket is bound");
00068     usrId = userId;
00069 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="UDPSocket::socketId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::socketId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the internal socket Id. <div class="fragment"><pre class="fragment">00154 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p0">sockId</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="UDPSocket::state"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::state           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the socket state, one of NOT_BOUND, BOUND, etc. Messages received from <a class="el" href="class_u_d_p.html">UDP</a> must be routed through <a class="el" href="class_u_d_p_socket.html#z137_2">processMessage()</a> in order to keep socket state up-to-date. <div class="fragment"><pre class="fragment">00172 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p2">sockstate</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="UDPSocket::stateName"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char * UDPSocket::stateName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>state</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns name of socket state code returned by <a class="el" href="class_u_d_p_socket.html#a5">state()</a>. <div class="fragment"><pre class="fragment">00039 {
00040 <span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
00041 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">"unknown"</span>;
00042     <span class="keywordflow">switch</span> (state)
00043     {
00044         <a class="code" href="_ether_m_a_c_8cc.html#a0">CASE</a>(NOT_BOUND);
00045         <a class="code" href="_ether_m_a_c_8cc.html#a0">CASE</a>(BOUND);
00046     }
00047     <span class="keywordflow">return</span> s;
00048 <span class="preprocessor">#undef CASE</span>
00049 <span class="preprocessor"></span>}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="UDPSocket::userId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UDPSocket::userId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the userId. <div class="fragment"><pre class="fragment">00165 {<span class="keywordflow">return</span> <a class="code" href="class_u_d_p_socket.html#p1">usrId</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p8" doxytag="UDPSocket::cb"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_u_d_p_socket_1_1_callback_interface.html">CallbackInterface</a>* <a class="el" href="class_u_d_p_socket.html#p8">UDPSocket::cb</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p10" doxytag="UDPSocket::gateToUdp"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cGate* <a class="el" href="class_u_d_p_socket.html#p10">UDPSocket::gateToUdp</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p3" doxytag="UDPSocket::localAddr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_u_d_p_socket.html#p3">UDPSocket::localAddr</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p4" doxytag="UDPSocket::localPrt"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p4">UDPSocket::localPrt</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p7" doxytag="UDPSocket::mcastIfaceId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p7">UDPSocket::mcastIfaceId</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p5" doxytag="UDPSocket::remoteAddr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_u_d_p_socket.html#p5">UDPSocket::remoteAddr</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p6" doxytag="UDPSocket::remotePrt"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p6">UDPSocket::remotePrt</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="UDPSocket::sockId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p0">UDPSocket::sockId</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p2" doxytag="UDPSocket::sockstate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p2">UDPSocket::sockstate</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="UDPSocket::usrId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_u_d_p_socket.html#p1">UDPSocket::usrId</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p9" doxytag="UDPSocket::yourPtr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void* <a class="el" href="class_u_d_p_socket.html#p9">UDPSocket::yourPtr</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_u_d_p_socket_8h.html">UDPSocket.h</a><li><a class="el" href="_u_d_p_socket_8cc.html">UDPSocket.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:32 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
