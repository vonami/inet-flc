<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: TCPGenericCliAppBase Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TCPGenericCliAppBase Class Reference</h1><code>#include &lt;TCPGenericCliAppBase.h&gt;</code>
<p>
<p>Inheritance diagram for TCPGenericCliAppBase:
<p><center><img src="class_t_c_p_generic_cli_app_base.png" usemap="#TCPGenericCliAppBase_map" border="0" alt=""></center>
<map name="TCPGenericCliAppBase_map">
<area href="class_t_c_p_socket_1_1_callback_interface.html" alt="TCPSocket::CallbackInterface" shape="rect" coords="94,0,273,24">
<area href="class_t_c_p_basic_client_app.html" alt="TCPBasicClientApp" shape="rect" coords="0,112,179,136">
<area href="class_telnet_app.html" alt="TelnetApp" shape="rect" coords="189,112,368,136">
</map>
<a href="class_t_c_p_generic_cli_app_base-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Base class for clients app for TCP-based request-reply protocols or apps. Handles a single session (and <a class="el" href="class_t_c_p.html">TCP</a> connection) at a time.<p>
It needs the following NED parameters: address, port, connectAddress, connectPort.<p>
Generally used together with <a class="el" href="class_generic_app_msg.html">GenericAppMsg</a> and <a class="el" href="class_t_c_p_generic_srv_app.html">TCPGenericSrvApp</a>. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#b0">initialize</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#b1">handleMessage</a> (cMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#b2">finish</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#b3">handleTimer</a> (cMessage *msg)=0</td></tr>

<tr><td colspan="2"><div class="groupHeader">Utility functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_0">connect</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_1">close</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_2">sendPacket</a> (int numBytes, int expectedReplyBytes, bool serverClose=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a> (const char *s)</td></tr>

<tr><td colspan="2"><div class="groupHeader">TCPSocket::CallbackInterface callback methods</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_0">socketEstablished</a> (int connId, void *yourPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_1">socketDataArrived</a> (int connId, void *yourPtr, cMessage *msg, bool urgent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_2">socketPeerClosed</a> (int connId, void *yourPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_3">socketClosed</a> (int connId, void *yourPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_4">socketFailure</a> (int connId, void *yourPtr, int code)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#z7_5">socketStatusArrived</a> (int connId, void *yourPtr, <a class="el" href="class_t_c_p_status_info.html">TCPStatusInfo</a> *status)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p1">numSessions</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p2">numBroken</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p3">packetsSent</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p4">packetsRcvd</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p5">bytesSent</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_generic_cli_app_base.html#p6">bytesRcvd</a></td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z5_1" doxytag="TCPGenericCliAppBase::close"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Issues CLOSE command <div class="fragment"><pre class="fragment">00068 {
00069     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"closing"</span>);
00070     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"issuing CLOSE command\n"</span>;
00071     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_7">close</a>();
00072 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z5_0" doxytag="TCPGenericCliAppBase::connect"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Issues an active OPEN to the address/port given as module parameters <div class="fragment"><pre class="fragment">00051 {
00052     <span class="comment">// we need a new connId if this is not the first connection</span>
00053     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_10">renewSocket</a>();
00054 
00055     <span class="comment">// connect</span>
00056     <span class="keyword">const</span> <span class="keywordtype">char</span> *connectAddress = par(<span class="stringliteral">"connectAddress"</span>);
00057     <span class="keywordtype">int</span> connectPort = par(<span class="stringliteral">"connectPort"</span>);
00058 
00059     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"issuing OPEN command\n"</span>;
00060     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"connecting"</span>);
00061 
00062     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_5">connect</a>(<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>().resolve(connectAddress), connectPort);
00063 
00064     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p1">numSessions</a>++;
00065 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="TCPGenericCliAppBase::finish"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::finish           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Records basic statistics: numSessions, packetsSent, packetsRcvd, bytesSent, bytesRcvd. Redefine to record different or more statistics at the end of the simulation. <div class="fragment"><pre class="fragment">00137 {
00138     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; fullPath() &lt;&lt; <span class="stringliteral">": opened "</span> &lt;&lt; <a class="code" href="class_t_c_p_generic_cli_app_base.html#p1">numSessions</a> &lt;&lt; <span class="stringliteral">" sessions\n"</span>;
00139     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; fullPath() &lt;&lt; <span class="stringliteral">": sent "</span> &lt;&lt; <a class="code" href="class_t_c_p_generic_cli_app_base.html#p5">bytesSent</a> &lt;&lt; <span class="stringliteral">" bytes in "</span> &lt;&lt; <a class="code" href="class_t_c_p_generic_cli_app_base.html#p3">packetsSent</a> &lt;&lt; <span class="stringliteral">" packets\n"</span>;
00140     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; fullPath() &lt;&lt; <span class="stringliteral">": received "</span> &lt;&lt; <a class="code" href="class_t_c_p_generic_cli_app_base.html#p6">bytesRcvd</a> &lt;&lt; <span class="stringliteral">" bytes in "</span> &lt;&lt; <a class="code" href="class_t_c_p_generic_cli_app_base.html#p4">packetsRcvd</a> &lt;&lt; <span class="stringliteral">" packets\n"</span>;
00141 
00142     recordScalar(<span class="stringliteral">"number of sessions"</span>, numSessions);
00143     recordScalar(<span class="stringliteral">"packets sent"</span>, packetsSent);
00144     recordScalar(<span class="stringliteral">"packets rcvd"</span>, packetsRcvd);
00145     recordScalar(<span class="stringliteral">"bytes sent"</span>, bytesSent);
00146     recordScalar(<span class="stringliteral">"bytes rcvd"</span>, bytesRcvd);
00147 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="TCPGenericCliAppBase::handleMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::handleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For self-messages it invokes <a class="el" href="class_t_c_p_generic_cli_app_base.html#b3">handleTimer()</a>; messages arriving from <a class="el" href="class_t_c_p.html">TCP</a> will get dispatched to the socketXXX() functions. <div class="fragment"><pre class="fragment">00043 {
00044     <span class="keywordflow">if</span> (msg-&gt;isSelfMessage())
00045         <a class="code" href="class_t_c_p_generic_cli_app_base.html#b3">handleTimer</a>(msg);
00046     <span class="keywordflow">else</span>
00047         <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z131_2">processMessage</a>(msg);
00048 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="TCPGenericCliAppBase::handleTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void TCPGenericCliAppBase::handleTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Invoked from <a class="el" href="class_t_c_p_generic_cli_app_base.html#b1">handleMessage()</a>. Should be redefined to handle self-messages. 
<p>
Implemented in <a class="el" href="class_t_c_p_basic_client_app.html#b2">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b1">TelnetApp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="TCPGenericCliAppBase::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization. Should be redefined to perform or schedule a <a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_0">connect()</a>. 
<p>
Reimplemented in <a class="el" href="class_t_c_p_basic_client_app.html#b1">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b0">TelnetApp</a>.<div class="fragment"><pre class="fragment">00022 {
00023     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p1">numSessions</a> = <a class="code" href="class_t_c_p_generic_cli_app_base.html#p2">numBroken</a> = <a class="code" href="class_t_c_p_generic_cli_app_base.html#p3">packetsSent</a> = <a class="code" href="class_t_c_p_generic_cli_app_base.html#p4">packetsRcvd</a> = <a class="code" href="class_t_c_p_generic_cli_app_base.html#p5">bytesSent</a> = <a class="code" href="class_t_c_p_generic_cli_app_base.html#p6">bytesRcvd</a> = 0;
00024     WATCH(numSessions);
00025     WATCH(numBroken);
00026     WATCH(packetsSent);
00027     WATCH(packetsRcvd);
00028     WATCH(bytesSent);
00029     WATCH(bytesRcvd);
00030 
00031     <span class="comment">// parameters</span>
00032     <span class="keyword">const</span> <span class="keywordtype">char</span> *address = par(<span class="stringliteral">"address"</span>);
00033     <span class="keywordtype">int</span> port = par(<span class="stringliteral">"port"</span>);
00034     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_1">bind</a>(*address ? <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(address) : <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(), port);
00035 
00036     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z131_1">setCallbackObject</a>(<span class="keyword">this</span>);
00037     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_0">setOutputGate</a>(gate(<span class="stringliteral">"tcpOut"</span>));
00038 
00039     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"waiting"</span>);
00040 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z5_2" doxytag="TCPGenericCliAppBase::sendPacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::sendPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>expectedReplyBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>serverClose</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a <a class="el" href="class_generic_app_msg.html">GenericAppMsg</a> of the given length <div class="fragment"><pre class="fragment">00075 {
00076     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"sending "</span> &lt;&lt; numBytes &lt;&lt; <span class="stringliteral">" bytes, expecting "</span> &lt;&lt; expectedReplyBytes &lt;&lt; (serverClose ? <span class="stringliteral">", and server should close afterwards\n"</span> : <span class="stringliteral">"\n"</span>);
00077 
00078     <a class="code" href="class_generic_app_msg.html">GenericAppMsg</a> *msg = <span class="keyword">new</span> <a class="code" href="class_generic_app_msg.html">GenericAppMsg</a>(<span class="stringliteral">"data"</span>);
00079     msg-&gt;setByteLength(numBytes);
00080     msg-&gt;<a class="code" href="class_generic_app_msg.html#a8">setExpectedReplyLength</a>(expectedReplyBytes);
00081     msg-&gt;<a class="code" href="class_generic_app_msg.html#a12">setClose</a>(serverClose);
00082 
00083     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#z129_6">send</a>(msg);
00084 
00085     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p3">packetsSent</a>++;
00086     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p5">bytesSent</a>+=numBytes;
00087 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z5_3" doxytag="TCPGenericCliAppBase::setStatusString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::setStatusString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
When running under GUI, it displays the given string next to the icon <div class="fragment"><pre class="fragment">00090 {
00091     <span class="keywordflow">if</span> (ev.isGUI()) displayString().setTagArg(<span class="stringliteral">"t"</span>, 0, s);
00092 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_3" doxytag="TCPGenericCliAppBase::socketClosed"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::socketClosed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does nothing but update statistics/status. Redefine if you want to do something else, such as opening a new connection. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a4">TCPSocket::CallbackInterface</a>.
<p>
Reimplemented in <a class="el" href="class_t_c_p_basic_client_app.html#b5">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b4">TelnetApp</a>.<div class="fragment"><pre class="fragment">00121 {
00122     <span class="comment">// *redefine* to start another session etc.</span>
00123     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"connection closed\n"</span>;
00124     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"closed"</span>);
00125 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_1" doxytag="TCPGenericCliAppBase::socketDataArrived"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::socketDataArrived           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>cMessage *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>urgent</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does nothing but update statistics/status. Redefine to perform or schedule next sending. Beware: this funcion deletes the incoming message, which might not be what you want. 
<p>
Implements <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a1">TCPSocket::CallbackInterface</a>.
<p>
Reimplemented in <a class="el" href="class_t_c_p_basic_client_app.html#b4">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b3">TelnetApp</a>.<div class="fragment"><pre class="fragment">00102 {
00103     <span class="comment">// *redefine* to perform or schedule next sending</span>
00104     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p4">packetsRcvd</a>++;
00105     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p6">bytesRcvd</a>+=msg-&gt;byteLength();
00106 
00107     <span class="keyword">delete</span> msg;
00108 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_0" doxytag="TCPGenericCliAppBase::socketEstablished"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::socketEstablished           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does nothing but update statistics/status. Redefine to perform or schedule first sending. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a2">TCPSocket::CallbackInterface</a>.
<p>
Reimplemented in <a class="el" href="class_t_c_p_basic_client_app.html#b3">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b2">TelnetApp</a>.<div class="fragment"><pre class="fragment">00095 {
00096     <span class="comment">// *redefine* to perform or schedule first sending</span>
00097     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"connected\n"</span>;
00098     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"connected"</span>);
00099 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_4" doxytag="TCPGenericCliAppBase::socketFailure"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::socketFailure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>code</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does nothing but update statistics/status. Redefine if you want to try reconnecting after a delay. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a5">TCPSocket::CallbackInterface</a>.
<p>
Reimplemented in <a class="el" href="class_t_c_p_basic_client_app.html#b6">TCPBasicClientApp</a>, and <a class="el" href="class_telnet_app.html#b5">TelnetApp</a>.<div class="fragment"><pre class="fragment">00128 {
00129     <span class="comment">// subclasses may override this function, and add code try to reconnect after a delay.</span>
00130     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"connection broken\n"</span>;
00131     <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_3">setStatusString</a>(<span class="stringliteral">"broken"</span>);
00132 
00133     <a class="code" href="class_t_c_p_generic_cli_app_base.html#p2">numBroken</a>++;
00134 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_2" doxytag="TCPGenericCliAppBase::socketPeerClosed"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCPGenericCliAppBase::socketPeerClosed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Since remote <a class="el" href="class_t_c_p.html">TCP</a> closed, invokes <a class="el" href="class_t_c_p_generic_cli_app_base.html#z5_1">close()</a>. Redefine if you want to do something else. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a3">TCPSocket::CallbackInterface</a>.<div class="fragment"><pre class="fragment">00111 {
00112     <span class="comment">// close the connection (if not already closed)</span>
00113     <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_generic_cli_app_base.html#p0">socket</a>.<a class="code" href="class_t_c_p_socket.html#a4">state</a>()==<a class="code" href="class_t_c_p_socket.html#w9w5">TCPSocket::PEER_CLOSED</a>)
00114     {
00115         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"remote TCP closed, closing here as well\n"</span>;
00116         <a class="code" href="class_t_c_p_generic_cli_app_base.html#z5_1">close</a>();
00117     }
00118 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z7_5" doxytag="TCPGenericCliAppBase::socketStatusArrived"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void TCPGenericCliAppBase::socketStatusArrived           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>connId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_t_c_p_status_info.html">TCPStatusInfo</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Redefine to handle incoming <a class="el" href="class_t_c_p_status_info.html">TCPStatusInfo</a>. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a6">TCPSocket::CallbackInterface</a>.<div class="fragment"><pre class="fragment">00100 {<span class="keyword">delete</span> status;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p6" doxytag="TCPGenericCliAppBase::bytesRcvd"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p6">TCPGenericCliAppBase::bytesRcvd</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p5" doxytag="TCPGenericCliAppBase::bytesSent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p5">TCPGenericCliAppBase::bytesSent</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p2" doxytag="TCPGenericCliAppBase::numBroken"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p2">TCPGenericCliAppBase::numBroken</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="TCPGenericCliAppBase::numSessions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p1">TCPGenericCliAppBase::numSessions</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p4" doxytag="TCPGenericCliAppBase::packetsRcvd"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p4">TCPGenericCliAppBase::packetsRcvd</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p3" doxytag="TCPGenericCliAppBase::packetsSent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_t_c_p_generic_cli_app_base.html#p3">TCPGenericCliAppBase::packetsSent</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="TCPGenericCliAppBase::socket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a> <a class="el" href="class_t_c_p_generic_cli_app_base.html#p0">TCPGenericCliAppBase::socket</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_c_p_generic_cli_app_base_8h.html">TCPGenericCliAppBase.h</a><li><a class="el" href="_t_c_p_generic_cli_app_base_8cc.html">TCPGenericCliAppBase.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:31 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
