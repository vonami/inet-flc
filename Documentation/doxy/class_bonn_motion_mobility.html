<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: BonnMotionMobility Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>BonnMotionMobility Class Reference</h1><code>#include &lt;BonnMotionMobility.h&gt;</code>
<p>
<p>Inheritance diagram for BonnMotionMobility:
<p><center><img src="class_bonn_motion_mobility.png" usemap="#BonnMotionMobility_map" border="0" alt=""></center>
<map name="BonnMotionMobility_map">
<area href="class_line_segments_mobility_base.html" alt="LineSegmentsMobilityBase" shape="rect" coords="0,168,162,192">
<area href="class_basic_mobility.html" alt="BasicMobility" shape="rect" coords="0,112,162,136">
<area href="class_basic_module.html" alt="BasicModule" shape="rect" coords="0,56,162,80">
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,162,24">
</map>
<a href="class_bonn_motion_mobility-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Uses the BonnMotion native file format. See NED file for more info. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>Andras Varga </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#b0">~BonnMotionMobility</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#b1">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes mobility model parameters.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#b2">setTargetPosition</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridden from <a class="el" href="class_line_segments_mobility_base.html">LineSegmentsMobilityBase</a>.  <a href="#b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#b3">fixIfHostGetsOutside</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridden from <a class="el" href="class_line_segments_mobility_base.html">LineSegmentsMobilityBase</a>.  <a href="#b3"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_bonn_motion_file.html#w0">BonnMotionFile::Line</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#p0">vecp</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bonn_motion_mobility.html#p1">vecpos</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b0" doxytag="BonnMotionMobility::~BonnMotionMobility"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BonnMotionMobility::~<a class="el" href="class_bonn_motion_mobility.html">BonnMotionMobility</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00060 {
00061     <a class="code" href="class_bonn_motion_file_cache.html#e1">BonnMotionFileCache::deleteInstance</a>();
00062 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b3" doxytag="BonnMotionMobility::fixIfHostGetsOutside"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BonnMotionMobility::fixIfHostGetsOutside           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Overridden from <a class="el" href="class_line_segments_mobility_base.html">LineSegmentsMobilityBase</a>. 
<p>

<p>
Implements <a class="el" href="class_line_segments_mobility_base.html#b4">LineSegmentsMobilityBase</a>.<div class="fragment"><pre class="fragment">00083 {
00084     <a class="code" href="class_basic_mobility.html#b11">raiseErrorIfOutside</a>();
00085 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="BonnMotionMobility::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BonnMotionMobility::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes mobility model parameters. 
<p>

<p>
Reimplemented from <a class="el" href="class_line_segments_mobility_base.html#b0">LineSegmentsMobilityBase</a>.<div class="fragment"><pre class="fragment">00028 {
00029     <a class="code" href="class_line_segments_mobility_base.html#b0">LineSegmentsMobilityBase::initialize</a>(stage);
00030 
00031     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"initializing BonnMotionMobility stage "</span> &lt;&lt; stage &lt;&lt; endl;
00032 
00033     <span class="keywordflow">if</span> (stage == 1)
00034     {
00035         <span class="keywordtype">int</span> nodeId = par(<span class="stringliteral">"nodeId"</span>);
00036         <span class="keywordflow">if</span> (nodeId == -1)
00037             nodeId = parentModule()-&gt;index();
00038 
00039         const <span class="keywordtype">char</span> *fname = par("traceFile");
00040         const <a class="code" href="class_bonn_motion_file.html">BonnMotionFile</a> *bmFile = <a class="code" href="class_bonn_motion_file_cache.html">BonnMotionFileCache</a>::instance()-&gt;getFile(fname);
00041 
00042         vecp = bmFile-&gt;getLine(nodeId);
00043         if (!vecp)
00044             error("invalid nodeId %d -- no such line in file '%s'", nodeId, fname);
00045         vecpos = 0;
00046 
00047         <span class="comment">// obtain initial position</span>
00048         const <a class="code" href="class_bonn_motion_file.html">BonnMotionFile</a>::Line&amp; vec = *vecp;
00049         if (vec.size()&gt;=3)
00050         {
00051             <a class="code" href="class_basic_mobility.html#p3">pos</a>.<a class="code" href="class_coord.html#o0">x</a> = vec[1];
00052             <a class="code" href="class_basic_mobility.html#p3">pos</a>.<a class="code" href="class_coord.html#o1">y</a> = vec[2];
00053             <a class="code" href="class_line_segments_mobility_base.html#p2">targetPos</a> = <a class="code" href="class_basic_mobility.html#p3">pos</a>;
00054         }
00055         <a class="code" href="class_basic_mobility.html#b4">updatePosition</a>();
00056     }
00057 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="BonnMotionMobility::setTargetPosition"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BonnMotionMobility::setTargetPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Overridden from <a class="el" href="class_line_segments_mobility_base.html">LineSegmentsMobilityBase</a>. 
<p>

<p>
Implements <a class="el" href="class_line_segments_mobility_base.html#b3">LineSegmentsMobilityBase</a>.<div class="fragment"><pre class="fragment">00065 {
00066     <span class="keyword">const</span> <a class="code" href="class_bonn_motion_file.html#w0">BonnMotionFile::Line</a>&amp; vec = *<a class="code" href="class_bonn_motion_mobility.html#p0">vecp</a>;
00067 
00068     <span class="keywordflow">if</span> (vecpos+2 &gt;= vec.size())
00069     {
00070         <a class="code" href="class_line_segments_mobility_base.html#p4">stationary</a> = <span class="keyword">true</span>;
00071         <span class="keywordflow">return</span>;
00072     }
00073 
00074     <a class="code" href="class_line_segments_mobility_base.html#p1">targetTime</a> = vec[<a class="code" href="class_bonn_motion_mobility.html#p1">vecpos</a>];
00075     <a class="code" href="class_line_segments_mobility_base.html#p2">targetPos</a>.<a class="code" href="class_coord.html#o0">x</a> = vec[<a class="code" href="class_bonn_motion_mobility.html#p1">vecpos</a>+1];
00076     <a class="code" href="class_line_segments_mobility_base.html#p2">targetPos</a>.<a class="code" href="class_coord.html#o1">y</a> = vec[<a class="code" href="class_bonn_motion_mobility.html#p1">vecpos</a>+2];
00077     <a class="code" href="class_bonn_motion_mobility.html#p1">vecpos</a> += 3;
00078 
00079     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"TARGET: t="</span> &lt;&lt; <a class="code" href="class_line_segments_mobility_base.html#p1">targetTime</a> &lt;&lt; <span class="stringliteral">" ("</span> &lt;&lt; <a class="code" href="class_line_segments_mobility_base.html#p2">targetPos</a>.<a class="code" href="class_coord.html#o0">x</a> &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; <a class="code" href="class_line_segments_mobility_base.html#p2">targetPos</a>.<a class="code" href="class_coord.html#o1">y</a> &lt;&lt; <span class="stringliteral">")\n"</span>;
00080 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p0" doxytag="BonnMotionMobility::vecp"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_bonn_motion_file.html#w0">BonnMotionFile::Line</a>* <a class="el" href="class_bonn_motion_mobility.html#p0">BonnMotionMobility::vecp</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="BonnMotionMobility::vecpos"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_bonn_motion_mobility.html#p1">BonnMotionMobility::vecpos</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_bonn_motion_mobility_8h.html">BonnMotionMobility.h</a><li><a class="el" href="_bonn_motion_mobility_8cc.html">BonnMotionMobility.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:21 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
