<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: DumbTCP Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DumbTCP Class Reference</h1><code>#include &lt;DumbTCP.h&gt;</code>
<p>
<p>Inheritance diagram for DumbTCP:
<p><center><img src="class_dumb_t_c_p.png" usemap="#DumbTCP_map" border="0" alt=""></center>
<map name="DumbTCP_map">
<area href="class_t_c_p_algorithm.html" alt="TCPAlgorithm" shape="rect" coords="0,0,89,24">
</map>
<a href="class_dumb_t_c_p-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
A very-very basic <a class="el" href="class_t_c_p_algorithm.html">TCPAlgorithm</a> implementation, with hardcoded retransmission timeout and no other sophistication. It can be used to demonstrate what happened if there was no adaptive timeout calculation, delayed acks, silly window avoidance, congestion control, etc. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a0">DumbTCP</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a1">~DumbTCP</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a2">initialize</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a3">established</a> (bool active)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a4">connectionClosed</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a5">processTimer</a> (cMessage *timer, <a class="el" href="_t_c_p_connection_8h.html#a41">TCPEventCode</a> &amp;event)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a6">sendCommandInvoked</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a7">receivedOutOfOrderSegment</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a8">receiveSeqChanged</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a9">receivedDataAck</a> (<a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a> firstSeqAcked)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a10">receivedDuplicateAck</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a11">receivedAckForDataNotYetSent</a> (<a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a> seq)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a12">ackSent</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#a13">dataSent</a> (<a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a> fromseq)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="class_t_c_p_state_variables.html">TCPStateVariables</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#b0">createStateVariables</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_dumb_t_c_p_state_variables.html">DumbTCPStateVariables</a> *&amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#p0">state</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_dumb_t_c_p.html#p1">rexmitTimer</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="DumbTCP::DumbTCP"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DumbTCP::DumbTCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ctor <div class="fragment"><pre class="fragment">00029                  : <a class="code" href="class_t_c_p_algorithm.html#a0">TCPAlgorithm</a>(),
00030   <a class="code" href="class_dumb_t_c_p.html#p0">state</a>((<a class="code" href="class_dumb_t_c_p_state_variables.html">DumbTCPStateVariables</a> *&amp;)TCPAlgorithm::state)
00031 {
00032     <a class="code" href="class_dumb_t_c_p.html#p1">rexmitTimer</a> = NULL;
00033 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DumbTCP::~DumbTCP"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DumbTCP::~<a class="el" href="class_dumb_t_c_p.html">DumbTCP</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00036 {
00037     <span class="comment">// cancel and delete timers</span>
00038     <span class="keywordflow">if</span> (rexmitTimer)
00039         delete conn-&gt;getTcpMain()-&gt;cancelEvent(rexmitTimer);
00040 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a12" doxytag="DumbTCP::ackSent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::ackSent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after we sent an ACK. This hook can be used to cancel the delayed-ACK timer. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a14">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00113 {
00114 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DumbTCP::connectionClosed"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::connectionClosed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when the connection closes, it should cancel all running timers. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a6">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00061 {
00062     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#z153_5">getTcpMain</a>()-&gt;cancelEvent(rexmitTimer);
00063 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="DumbTCP::createStateVariables"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="class_t_c_p_state_variables.html">TCPStateVariables</a>* DumbTCP::createStateVariables           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates and returns a <a class="el" href="class_dumb_t_c_p_state_variables.html">DumbTCPStateVariables</a> object. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#b0">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00052                                                       {
00053         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_dumb_t_c_p_state_variables.html">DumbTCPStateVariables</a>();
00054     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="DumbTCP::dataSent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::dataSent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fromseq</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after we sent data. This hook can be used to schedule the retransmission timer, to start round-trip time measurement, etc. The argument is the seqno of the first byte sent. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a15">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00117 {
00118     <span class="keywordflow">if</span> (<a class="code" href="class_dumb_t_c_p.html#p1">rexmitTimer</a>-&gt;isScheduled())
00119         <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#z153_5">getTcpMain</a>()-&gt;cancelEvent(rexmitTimer);
00120     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a11">scheduleTimeout</a>(rexmitTimer, REXMIT_TIMEOUT);
00121 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DumbTCP::established"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::established           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>active</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when the connection is going to ESTABLISHED from SYN_SENT or SYN_RCVD. This is a place to initialize some variables (e.g. set cwnd to the MSS learned during connection setup). If we are on the active side, here we also have to finish the 3-way connection setup procedure by sending an ACK, possibly piggybacked on data. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a5">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00050 {
00051     <span class="keywordflow">if</span> (active)
00052     {
00053         <span class="comment">// finish connection setup with ACK (possibly piggybacked on data)</span>
00054         <a class="code" href="_t_c_p_8h.html#a0">tcpEV</a> &lt;&lt; <span class="stringliteral">"Completing connection setup by sending ACK (possibly piggybacked on data)\n"</span>;
00055         <span class="keywordflow">if</span> (!<a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a1">sendData</a>(<span class="keyword">false</span>))
00056             <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a0">sendAck</a>();
00057     }
00058 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DumbTCP::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Should be redefined to initialize the object: create timers, etc. This method is necessary because the <a class="el" href="class_t_c_p_connection.html">TCPConnection</a> ptr is not available in the constructor yet. 
<p>
Reimplemented from <a class="el" href="class_t_c_p_algorithm.html#a4">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00043 {
00044     <a class="code" href="class_t_c_p_algorithm.html#a4">TCPAlgorithm::initialize</a>();
00045 
00046     <a class="code" href="class_dumb_t_c_p.html#p1">rexmitTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">"REXMIT"</span>);
00047 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DumbTCP::processTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::processTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname" nowrap> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="_t_c_p_connection_8h.html#a41">TCPEventCode</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>event</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Place to process timers specific to this <a class="el" href="class_t_c_p_algorithm.html">TCPAlgorithm</a> class. <a class="el" href="class_t_c_p_connection.html">TCPConnection</a> will invoke this method on any timer (self-message) it doesn't recognize (that is, any timer other than the 2MSL, CONN-ESTAB and FIN-WAIT-2 timers).<p>
Method may also change the event code (by default set to TCP_E_IGNORE) to cause the state transition of <a class="el" href="class_t_c_p.html">TCP</a> FSM. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a7">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00066 {
00067     <span class="keywordflow">if</span> (timer!=rexmitTimer)
00068         throw new cException(timer, "unrecognized timer");
00069 
00070     conn-&gt;retransmitData();
00071     conn-&gt;scheduleTimeout(rexmitTimer, REXMIT_TIMEOUT);
00072 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="DumbTCP::receivedAckForDataNotYetSent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::receivedAckForDataNotYetSent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>seq</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after we received an ACK for data not yet sent. According to RFC 793 this function should send an ACK. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a13">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00107 {
00108     <a class="code" href="_t_c_p_8h.html#a0">tcpEV</a> &lt;&lt; <span class="stringliteral">"ACK acks something not yet sent, sending immediate ACK\n"</span>;
00109     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a0">sendAck</a>();
00110 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="DumbTCP::receivedDataAck"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::receivedDataAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="_i_n_e_t_defs_8h.html#a6">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>firstSeqAcked</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after we received an ACK which acked some data (that is, we could advance snd_una). At this point the state variables (snd_una, snd_wnd) have already been updated. The argument firstSeqAcked is the previous snd_una value, that is, the number of bytes acked is (snd_una-firstSeqAcked). The dupack counter still reflects the old value (needed for Reno and NewReno); it'll be reset to 0 after this call returns. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a11">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00095 {
00096     <span class="comment">// ack may have freed up some room in the window, try sending.</span>
00097     <span class="comment">// small segments also OK (Nagle off)</span>
00098     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a1">sendData</a>(<span class="keyword">false</span>);
00099 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="DumbTCP::receivedDuplicateAck"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::receivedDuplicateAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after we received a duplicate ACK (that is: ackNo==snd_una, no data in segment, segment doesn't carry window update, and also, we have unacked data). The dupack counter got already updated when calling this method (i.e. dupack==1 on first duplicate ACK.) 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a12">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00102 {
00103     <a class="code" href="_t_c_p_8h.html#a0">tcpEV</a> &lt;&lt; <span class="stringliteral">"Duplicate ACK #"</span> &lt;&lt; <a class="code" href="class_dumb_t_c_p.html#p0">state</a>-&gt;<a class="code" href="class_t_c_p_state_variables.html#o15">dupacks</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00104 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="DumbTCP::receivedOutOfOrderSegment"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::receivedOutOfOrderSegment           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after receiving data which are in the window, but not at its left edge (seq!=rcv_nxt). This indicates that either segments got re-ordered in the way, or one segment was lost. RFC1122 and RFC2001 recommend sending an immediate ACK here (Fast Retransmit relies on that). 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a9">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00081 {
00082     <a class="code" href="_t_c_p_8h.html#a0">tcpEV</a> &lt;&lt; <span class="stringliteral">"Out-of-order segment, sending immediate ACK\n"</span>;
00083     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a0">sendAck</a>();
00084 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="DumbTCP::receiveSeqChanged"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::receiveSeqChanged           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after rcv_nxt got advanced, either because we received in-sequence data ("text" in RFC 793 lingo) or a FIN. At this point, rcv_nxt has already been updated. This method should take care to send or schedule an ACK some time. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a10">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00087 {
00088     <span class="comment">// new data received, ACK immediately (more sophisticated algs should</span>
00089     <span class="comment">// wait a little to see if piggybacking is possible)</span>
00090     <a class="code" href="_t_c_p_8h.html#a0">tcpEV</a> &lt;&lt; <span class="stringliteral">"rcv_nxt changed to "</span> &lt;&lt; <a class="code" href="class_dumb_t_c_p.html#p0">state</a>-&gt;<a class="code" href="class_t_c_p_state_variables.html#o11">rcv_nxt</a> &lt;&lt; <span class="stringliteral">", sending immediate ACK\n"</span>;
00091     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a0">sendAck</a>();
00092 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="DumbTCP::sendCommandInvoked"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DumbTCP::sendCommandInvoked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called after user sent TCP_C_SEND command to us. 
<p>
Implements <a class="el" href="class_t_c_p_algorithm.html#a8">TCPAlgorithm</a>.<div class="fragment"><pre class="fragment">00075 {
00076     <span class="comment">// start sending</span>
00077     <a class="code" href="class_t_c_p_algorithm.html#p0">conn</a>-&gt;<a class="code" href="class_t_c_p_connection.html#a1">sendData</a>(<span class="keyword">false</span>);
00078 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p1" doxytag="DumbTCP::rexmitTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cMessage* <a class="el" href="class_dumb_t_c_p.html#p1">DumbTCP::rexmitTimer</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="DumbTCP::state"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_dumb_t_c_p_state_variables.html">DumbTCPStateVariables</a>*&amp; <a class="el" href="class_dumb_t_c_p.html#p0">DumbTCP::state</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented from <a class="el" href="class_t_c_p_algorithm.html#p1">TCPAlgorithm</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_dumb_t_c_p_8h.html">DumbTCP.h</a><li><a class="el" href="_dumb_t_c_p_8cc.html">DumbTCP.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:21 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
