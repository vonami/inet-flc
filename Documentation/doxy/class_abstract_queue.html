<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: AbstractQueue Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>AbstractQueue Class Reference</h1><code>#include &lt;AbstractQueue.h&gt;</code>
<p>
<p>Inheritance diagram for AbstractQueue:
<p><center><img src="class_abstract_queue.png" usemap="#AbstractQueue_map" border="0" alt=""></center>
<map name="AbstractQueue_map">
<area href="class_queue_base.html" alt="QueueBase" shape="rect" coords="54,56,153,80">
<area href="class_queue_with_qo_s.html" alt="QueueWithQoS" shape="rect" coords="163,56,262,80">
<area href="class_i_p.html" alt="IP" shape="rect" coords="0,112,99,136">
<area href="class_i_pv6.html" alt="IPv6" shape="rect" coords="109,112,208,136">
</map>
<a href="class_abstract_queue-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Abstract base class for single-server queues. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#a0">AbstractQueue</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#a1">~AbstractQueue</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#b0">initialize</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#b1">handleMessage</a> (cMessage *msg)</td></tr>

<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#z14_0">arrival</a> (cMessage *msg)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#z14_1">arrivalWhenIdle</a> (cMessage *msg)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#z14_2">startService</a> (cMessage *msg)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#z14_3">endService</a> (cMessage *msg)=0</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">cQueue&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#p0">queue</a></td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#r0">msgServiced</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_queue.html#r1">endServiceMsg</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="AbstractQueue::AbstractQueue"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AbstractQueue::AbstractQueue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00025 {
00026     <a class="code" href="class_abstract_queue.html#r0">msgServiced</a> = <a class="code" href="class_abstract_queue.html#r1">endServiceMsg</a> = NULL;
00027 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="AbstractQueue::~AbstractQueue"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AbstractQueue::~<a class="el" href="class_abstract_queue.html">AbstractQueue</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00030 {
00031     <span class="keyword">delete</span> <a class="code" href="class_abstract_queue.html#r0">msgServiced</a>;
00032     cancelAndDelete(endServiceMsg);
00033 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z14_0" doxytag="AbstractQueue::arrival"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void AbstractQueue::arrival           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when a message arrives at the module. The method should either enqueue this message (usual behaviour), or discard it. It may also wrap the it into another message, and insert that one in the queue.<p>
Most straightforward implementation: <code>queue.insert(msg);</code> 
<p>
Implemented in <a class="el" href="class_queue_base.html#b1">QueueBase</a>, and <a class="el" href="class_queue_with_qo_s.html#b1">QueueWithQoS</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z14_1" doxytag="AbstractQueue::arrivalWhenIdle"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual cMessage* AbstractQueue::arrivalWhenIdle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when a message arrives at the module when the queue is empty. The message doesn't need to be enqueued in this case, it can start service immmediately. This method may:<ol type=1>
<li>simply return the the same pointer (usual behaviour), or</li><li>discard the message and return NULL pointer (the effect being this message being ignored)</li><li>or modify the message, wrap in into another message etc, and return the (new) message's pointer.</li></ol>
<p>
Most straightforward implementation: <code>return msg;</code> 
<p>
Implemented in <a class="el" href="class_queue_base.html#b2">QueueBase</a>, and <a class="el" href="class_queue_with_qo_s.html#b2">QueueWithQoS</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z14_3" doxytag="AbstractQueue::endService"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void AbstractQueue::endService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when a message completes service. The function may send it to another module, discard it, or in general do anything with it.<p>
Most straightforward implementation: <code>send(msg,"out");</code> 
<p>
Implemented in <a class="el" href="class_i_p.html#b14">IP</a>, and <a class="el" href="class_i_pv6.html#b13">IPv6</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="AbstractQueue::handleMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void AbstractQueue::handleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00043 {
00044     <span class="keywordflow">if</span> (msg==endServiceMsg)
00045     {
00046         <a class="code" href="class_abstract_queue.html#z14_3">endService</a>( msgServiced );
00047         <span class="keywordflow">if</span> (<a class="code" href="class_abstract_queue.html#p0">queue</a>.empty())
00048         {
00049             <a class="code" href="class_abstract_queue.html#r0">msgServiced</a> = NULL;
00050         }
00051         <span class="keywordflow">else</span>
00052         {
00053             <a class="code" href="class_abstract_queue.html#r0">msgServiced</a> = (cMessage *) <a class="code" href="class_abstract_queue.html#p0">queue</a>.getTail();
00054             simtime_t serviceTime = <a class="code" href="class_abstract_queue.html#z14_2">startService</a>( msgServiced );
00055             scheduleAt( simTime()+serviceTime, endServiceMsg );
00056         }
00057     }
00058     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!msgServiced)
00059     {
00060         cMessage *msg2 = <a class="code" href="class_abstract_queue.html#z14_1">arrivalWhenIdle</a>( msg );
00061         <span class="keywordflow">if</span> (msg2)
00062         {
00063             <a class="code" href="class_abstract_queue.html#r0">msgServiced</a> = msg2;
00064             simtime_t serviceTime = <a class="code" href="class_abstract_queue.html#z14_2">startService</a>( msgServiced );
00065             scheduleAt( simTime()+serviceTime, endServiceMsg );
00066         }
00067 
00068     }
00069     <span class="keywordflow">else</span>
00070     {
00071         <a class="code" href="class_abstract_queue.html#z14_0">arrival</a>( msg );
00072     }
00073 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="AbstractQueue::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void AbstractQueue::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented in <a class="el" href="class_queue_base.html#b0">QueueBase</a>, <a class="el" href="class_queue_with_qo_s.html#b0">QueueWithQoS</a>, <a class="el" href="class_i_p.html#b13">IP</a>, and <a class="el" href="class_i_pv6.html#b12">IPv6</a>.<div class="fragment"><pre class="fragment">00036 {
00037     <a class="code" href="class_abstract_queue.html#r0">msgServiced</a> = NULL;
00038     <a class="code" href="class_abstract_queue.html#r1">endServiceMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">"end-service"</span>);
00039     <a class="code" href="class_abstract_queue.html#p0">queue</a>.setName(<span class="stringliteral">"queue"</span>);
00040 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z14_2" doxytag="AbstractQueue::startService"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual simtime_t AbstractQueue::startService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when a message starts service, and should return the service time.<p>
Example implementation: <code>return 1.0;</code> 
<p>
Implemented in <a class="el" href="class_queue_base.html#b3">QueueBase</a>, and <a class="el" href="class_queue_with_qo_s.html#b3">QueueWithQoS</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="AbstractQueue::endServiceMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cMessage* <a class="el" href="class_abstract_queue.html#r1">AbstractQueue::endServiceMsg</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="AbstractQueue::msgServiced"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cMessage* <a class="el" href="class_abstract_queue.html#r0">AbstractQueue::msgServiced</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="AbstractQueue::queue"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cQueue <a class="el" href="class_abstract_queue.html#p0">AbstractQueue::queue</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The queue. May be configured into a priority queue in <a class="el" href="class_abstract_queue.html#b0">initialize()</a> if needed.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_abstract_queue_8h.html">AbstractQueue.h</a><li><a class="el" href="_abstract_queue_8cc.html">AbstractQueue.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:20 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
