<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: ScenarioManager Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>ScenarioManager Class Reference</h1><code>#include &lt;ScenarioManager.h&gt;</code>
<p>
<a href="class_scenario_manager-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Scenario Manager (experimental) which executes a script specified in XML. ScenarioManager has a few built-in commands such as &lt;set-param&gt;, &lt;set-channel-attr&gt;, etc, and can pass commands to modules that implement the <a class="el" href="class_i_scriptable.html">IScriptable</a> interface. The &lt;at&gt; built-in command can be used to group commands to be carried out at the same simulation time.<p>
See NED file for details.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="class_i_scriptable.html">IScriptable</a> </dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Andras Varga </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#a0">ScenarioManager</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b0">getRequiredAttribute</a> (cXMLElement *node, const char *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">cModule *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b1">getRequiredModule</a> (cXMLElement *node, const char *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">cGate *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b2">getRequiredGate</a> (cXMLElement *node, const char *modattr, const char *gateattr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b3">processCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b4">processAtCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b5">processSetParamCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b6">processSetChannelAttrCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b7">processCreateModuleCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b8">processDeleteModuleCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b9">processConnectCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b10">processDisconnectCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b11">processModuleSpecificCommand</a> (cXMLElement *node)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b12">initialize</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b13">handleMessage</a> (cMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#b14">updateDisplayString</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#p0">numChanges</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scenario_manager.html#p1">numDone</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="ScenarioManager::ScenarioManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ScenarioManager::ScenarioManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00066 {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b0" doxytag="ScenarioManager::getRequiredAttribute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char * ScenarioManager::getRequiredAttribute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname" nowrap> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>attr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00101 {
00102     <span class="keyword">const</span> <span class="keywordtype">char</span> *s = node-&gt;getAttribute(attr);
00103     <span class="keywordflow">if</span> (!s)
00104         error("required attribute %s of &lt;%s&gt; missing at %s",
00105               attr, node-&gt;getTagName(), node-&gt;getSourceLocation());
00106     return s;
00107 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="ScenarioManager::getRequiredGate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cGate * ScenarioManager::getRequiredGate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname" nowrap> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>modattr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>gateattr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00119 {
00120     cModule *mod = <a class="code" href="class_scenario_manager.html#b1">getRequiredModule</a>(node, modAttr);
00121     <span class="keyword">const</span> <span class="keywordtype">char</span> *gateStr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, gateAttr);
00122     std::string gname;
00123     <span class="keywordtype">int</span> gindex;
00124     cGate *g = parseIndexedName(gateStr, gname, gindex) ? mod-&gt;gate(gname.c_str(), gindex) : mod-&gt;gate(gname.c_str());
00125     <span class="keywordflow">if</span> (!g)
00126         error("module '%s' has no gate '%s' at %s", mod-&gt;fullPath().c_str(), gateStr, node-&gt;getSourceLocation());
00127     return g;
00128 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="ScenarioManager::getRequiredModule"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">cModule * ScenarioManager::getRequiredModule           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname" nowrap> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>attr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00110 {
00111     <span class="keyword">const</span> <span class="keywordtype">char</span> *moduleAttr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, attr);
00112     cModule *mod = simulation.moduleByPath(moduleAttr);
00113     <span class="keywordflow">if</span> (!mod)
00114         error("module '%s' not found at %s", moduleAttr, node-&gt;getSourceLocation());
00115     return mod;
00116 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b13" doxytag="ScenarioManager::handleMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::handleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00053 {
00054     cXMLElement *node = (cXMLElement *) msg-&gt;contextPointer();
00055     <span class="keyword">delete</span> msg;
00056 
00057     <a class="code" href="class_scenario_manager.html#b3">processCommand</a>(node);
00058 
00059     <a class="code" href="class_scenario_manager.html#p1">numDone</a>++;
00060     <a class="code" href="class_scenario_manager.html#b14">updateDisplayString</a>();
00061 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b12" doxytag="ScenarioManager::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00025 {
00026     cXMLElement *script = par(<span class="stringliteral">"script"</span>);
00027 
00028     <a class="code" href="class_scenario_manager.html#p0">numChanges</a> = <a class="code" href="class_scenario_manager.html#p1">numDone</a> = 0;
00029     WATCH(numChanges);
00030     WATCH(numDone);
00031 
00032     <span class="keywordflow">for</span> (cXMLElement *node=script-&gt;getFirstChild(); node; node = node-&gt;getNextSibling())
00033     {
00034         <span class="comment">// check attr t is present</span>
00035         <span class="keyword">const</span> <span class="keywordtype">char</span> *tAttr = node-&gt;getAttribute(<span class="stringliteral">"t"</span>);
00036         <span class="keywordflow">if</span> (!tAttr)
00037             error("attribute 't' missing at %s", node-&gt;getSourceLocation());
00038 
00039         <span class="comment">// schedule self-message</span>
00040         simtime_t t = strToSimtime(tAttr);
00041         cMessage *msg = new cMessage("scenario-event");
00042         msg-&gt;setContextPointer(node);
00043         scheduleAt(t, msg);
00044 
00045         <span class="comment">// count it</span>
00046         numChanges++;
00047     }
00048 
00049     updateDisplayString();
00050 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="ScenarioManager::processAtCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processAtCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00131 {
00132     <span class="keywordflow">for</span> (cXMLElement *child=node-&gt;getFirstChild(); child; child=child-&gt;getNextSibling())
00133         <a class="code" href="class_scenario_manager.html#b3">processCommand</a>(child);
00134 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="ScenarioManager::processCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00064 {
00065     <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = node-&gt;getTagName();
00066     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"processing &lt;"</span> &lt;&lt; tag &lt;&lt; <span class="stringliteral">"&gt; command...\n"</span>;
00067 
00068     <span class="keywordflow">if</span> (!strcmp(tag,<span class="stringliteral">"at"</span>))
00069         processAtCommand(node);
00070     else if (!strcmp(tag,"set-param"))
00071         processSetParamCommand(node);
00072     else if (!strcmp(tag,"set-channel-attr"))
00073         processSetChannelAttrCommand(node);
00074     <span class="comment">// else if (!strcmp(tag,"create-module"))</span>
00075     <span class="comment">//    processCreateModuleCommand(node);</span>
00076     <span class="comment">// else if (!strcmp(tag,"connect"))</span>
00077     <span class="comment">//    processConnectCommand(node);</span>
00078     else
00079         processModuleSpecificCommand(node);
00080 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b9" doxytag="ScenarioManager::processConnectCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processConnectCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b7" doxytag="ScenarioManager::processCreateModuleCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processCreateModuleCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b8" doxytag="ScenarioManager::processDeleteModuleCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processDeleteModuleCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b10" doxytag="ScenarioManager::processDisconnectCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processDisconnectCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b11" doxytag="ScenarioManager::processModuleSpecificCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processModuleSpecificCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00137 {
00138     <span class="comment">// find which module we'll need to invoke</span>
00139     cModule *mod = <a class="code" href="class_scenario_manager.html#b1">getRequiredModule</a>(node, <span class="stringliteral">"module"</span>);
00140 
00141     <span class="comment">// see if it supports the IScriptable interface</span>
00142     <a class="code" href="class_i_scriptable.html">IScriptable</a> *scriptable = dynamic_cast&lt;IScriptable *&gt;(mod);
00143     <span class="keywordflow">if</span> (!scriptable)
00144         error("&lt;%s&gt; not understood: it is not a built-in command of %s, and module class %s "
00145               "is not scriptable (does not subclass from <a class="code" href="class_i_scriptable.html">IScriptable</a>) at %s",
00146               node-&gt;getTagName(), className(), mod-&gt;className(), node-&gt;getSourceLocation());
00147 
00148     <span class="comment">// ok, trust it to process this command</span>
00149     scriptable-&gt;processCommand(*node);
00150 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b6" doxytag="ScenarioManager::processSetChannelAttrCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processSetChannelAttrCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00168 {
00169     <span class="comment">// process &lt;set-channel-attr&gt; command</span>
00170     cGate *g = <a class="code" href="class_scenario_manager.html#b2">getRequiredGate</a>(node, <span class="stringliteral">"src-module"</span>, <span class="stringliteral">"src-gate"</span>);
00171     <span class="keyword">const</span> <span class="keywordtype">char</span> *attrAttr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, <span class="stringliteral">"attr"</span>);
00172     <span class="keyword">const</span> <span class="keywordtype">char</span> *valueAttr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, <span class="stringliteral">"value"</span>);
00173 
00174     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Setting channel attribute: "</span> &lt;&lt; attrAttr &lt;&lt; <span class="stringliteral">" = "</span> &lt;&lt; valueAttr
00175        &lt;&lt; <span class="stringliteral">" of gate "</span> &lt;&lt; g-&gt;fullPath() &lt;&lt; <span class="stringliteral">"\n"</span>;
00176     bubble((std::string(<span class="stringliteral">"setting channel attr: "</span>)+attrAttr+<span class="stringliteral">" = "</span>+valueAttr).c_str());
00177 
00178     <span class="comment">// make sure gate is connected at all</span>
00179     <span class="keywordflow">if</span> (!g-&gt;toGate())
00180         error(<span class="stringliteral">"gate '%s' is not connected at %s"</span>, g-&gt;fullPath().c_str(), node-&gt;getSourceLocation());
00181 
00182     <span class="comment">// find channel (or add one?)</span>
00183     cChannel *chan = g-&gt;channel();
00184     <span class="keywordflow">if</span> (!chan)
00185         error("connection starting at gate '%s' has no attributes at %s", g-&gt;fullPath().c_str(), node-&gt;getSourceLocation());
00186 
00187     <span class="comment">// set the parameter to the given value</span>
00188     if (!chan-&gt;hasPar(attrAttr))
00189         chan-&gt;addPar(attrAttr);
00190     cPar&amp; param = chan-&gt;par(attrAttr);
00191     param.setFromText(valueAttr, '?');
00192 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b5" doxytag="ScenarioManager::processSetParamCommand"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::processSetParamCommand           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cXMLElement *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>node</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00153 {
00154     <span class="comment">// process &lt;set-param&gt; command</span>
00155     cModule *mod = <a class="code" href="class_scenario_manager.html#b1">getRequiredModule</a>(node, <span class="stringliteral">"module"</span>);
00156     <span class="keyword">const</span> <span class="keywordtype">char</span> *parAttr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, <span class="stringliteral">"par"</span>);
00157     <span class="keyword">const</span> <span class="keywordtype">char</span> *valueAttr = <a class="code" href="class_scenario_manager.html#b0">getRequiredAttribute</a>(node, <span class="stringliteral">"value"</span>);
00158 
00159     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Setting "</span> &lt;&lt; mod-&gt;fullPath() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; parAttr &lt;&lt; <span class="stringliteral">" = "</span> &lt;&lt; valueAttr &lt;&lt; <span class="stringliteral">"\n"</span>;
00160     bubble((std::string(<span class="stringliteral">"setting: "</span>)+mod-&gt;fullPath()+<span class="stringliteral">"."</span>+parAttr+<span class="stringliteral">" = "</span>+valueAttr).c_str());
00161 
00162     <span class="comment">// set the parameter to the given value</span>
00163     cPar&amp; param = mod-&gt;par(parAttr);
00164     param.setFromText(valueAttr, <span class="charliteral">'?'</span>);
00165 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b14" doxytag="ScenarioManager::updateDisplayString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ScenarioManager::updateDisplayString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00210 {
00211     <span class="keywordtype">char</span> buf[80];
00212     sprintf(buf, <span class="stringliteral">"total %d changes, %d left"</span>, numChanges, numChanges-numDone);
00213     displayString().setTagArg(<span class="stringliteral">"t"</span>, 0, buf);
00214 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p0" doxytag="ScenarioManager::numChanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_scenario_manager.html#p0">ScenarioManager::numChanges</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="ScenarioManager::numDone"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="class_scenario_manager.html#p1">ScenarioManager::numDone</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_scenario_manager_8h.html">ScenarioManager.h</a><li><a class="el" href="_scenario_manager_8cc.html">ScenarioManager.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:30 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
