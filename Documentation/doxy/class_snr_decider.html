<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: SnrDecider Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>SnrDecider Class Reference</h1><code>#include &lt;SnrDecider.h&gt;</code>
<p>
<p>Inheritance diagram for SnrDecider:
<p><center><img src="class_snr_decider.png" usemap="#SnrDecider_map" border="0" alt=""></center>
<map name="SnrDecider_map">
<area href="class_basic_decider.html" alt="BasicDecider" shape="rect" coords="0,112,120,136">
<area href="class_basic_module.html" alt="BasicModule" shape="rect" coords="0,56,120,80">
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,120,24">
<area href="class_err_and_coll_decider.html" alt="ErrAndCollDecider" shape="rect" coords="0,224,120,248">
</map>
<a href="class_snr_decider-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
a simple snr decider... 
<p>
This decider simply takes a look at the sduList contained in the received PhySDU packet and checks whether one of the mentioned snr levels is lower than the snrThresholdLevel which has to be read in at the beginning of a simulation. (suggestion: from the omnetpp.ini file!)<p>
<dl compact><dt><b>Author:</b></dt><dd>Marc Löbbers, Andreas Koepke </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#b0">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#b1">snrOverThreshold</a> (<a class="el" href="_snr_list_8h.html#a0">SnrList</a> &amp;) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#b2">handleLowerMsg</a> (<a class="el" href="class_air_frame.html">AirFrame</a> *, <a class="el" href="_snr_list_8h.html#a0">SnrList</a> &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In this function the decision whether a frame is received correctly or not is made.  <a href="#b2"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#p0">snrThresholdLevel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Level for decision [mW].  <a href="#p0"></a><br></td></tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b2" doxytag="SnrDecider::handleLowerMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrDecider::handleLowerMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_air_frame.html">AirFrame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>af</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="_snr_list_8h.html#a0">SnrList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>receivedList</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
In this function the decision whether a frame is received correctly or not is made. 
<p>
Redefine this function if you want to process messages from the channel before they are forwarded to upper layers<p>
In this function it has to be decided whether this message got lost or not. This can be done with a simple SNR threshold or with transformations of SNR into bit error probabilities...<p>
If you want to forward the message to upper layers please use <a class="el" href="class_basic_decider.html#z111_0">sendUp</a> which will decapsulate the MAC frame before sending 
<p>
Reimplemented from <a class="el" href="class_basic_decider.html#z109_1">BasicDecider</a>.
<p>
Reimplemented in <a class="el" href="class_err_and_coll_decider.html#b0">ErrAndCollDecider</a>.<div class="fragment"><pre class="fragment">00062 {
00063     <span class="keywordflow">if</span> (<a class="code" href="class_snr_decider.html#b1">snrOverThreshold</a>(receivedList))
00064     {
00065         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Message handed on to Mac\n"</span>;
00066         <a class="code" href="class_basic_decider.html#z111_0">sendUp</a>(af);
00067     }
00068     <span class="keywordflow">else</span>
00069     {
00070         <span class="keyword">delete</span> af;
00071     }
00072 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="SnrDecider::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrDecider::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>stage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization of the module and some variables. 
<p>
First we have to initialize the module from which we derived ours, in this case <a class="el" href="class_basic_module.html">BasicModule</a>.<p>
Then we have to intialize the gates and - if necessary - some own variables. 
<p>
Reimplemented from <a class="el" href="class_basic_decider.html#a0">BasicDecider</a>.<div class="fragment"><pre class="fragment">00029 {
00030     <a class="code" href="class_basic_decider.html#a0">BasicDecider::initialize</a>(stage);
00031 
00032     <span class="keywordflow">if</span> (stage == 0)
00033     {
00034         <a class="code" href="class_snr_decider.html#p0">snrThresholdLevel</a> = <a class="code" href="class_f_w_math.html#e7">FWMath::dBm2mW</a>(par(<span class="stringliteral">"snrThresholdLevel"</span>));
00035     }
00036 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="SnrDecider::snrOverThreshold"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool SnrDecider::snrOverThreshold           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="_snr_list_8h.html#a0">SnrList</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>snrlist</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks the received sduList (from the PhySDU header) if it contains an snr level above the threshold <div class="fragment"><pre class="fragment">00044 {
00045     <span class="comment">//check the entries in the sduList if a level is lower than the</span>
00046     <span class="comment">//acceptable minimum:</span>
00047 
00048     <span class="comment">//check</span>
00049     <span class="keywordflow">for</span> (SnrList::const_iterator iter = snrlist.begin(); iter != snrlist.end(); iter++)
00050     {
00051         <span class="keywordflow">if</span> (iter-&gt;snr &lt;= snrThresholdLevel)
00052         {
00053             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Message got lost. MessageSnr: "</span> &lt;&lt; iter-&gt;
00054                 snr &lt;&lt; <span class="stringliteral">" Threshold: "</span> &lt;&lt; <a class="code" href="class_snr_decider.html#p0">snrThresholdLevel</a> &lt;&lt; endl;
00055             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00056         }
00057     }
00058     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00059 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p0" doxytag="SnrDecider::snrThresholdLevel"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double <a class="el" href="class_snr_decider.html#p0">SnrDecider::snrThresholdLevel</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Level for decision [mW]. 
<p>
When a packet contains an snr level higher than snrThresholdLevel it will be considered as lost. This parameter has to be specified at the beginning of a simulation (omnetpp.ini) in dBm.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_snr_decider_8h.html">SnrDecider.h</a><li><a class="el" href="_snr_decider_8cc.html">SnrDecider.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:30 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
