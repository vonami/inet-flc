<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: IPv6NeighbourCache Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>IPv6NeighbourCache Class Reference</h1><code>#include &lt;IPv6NeighbourCache.h&gt;</code>
<p>
<a href="class_i_pv6_neighbour_cache-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="class_i_pv6.html">IPv6</a> <a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> Cache (RFC 2461 Neighbor Discovery for <a class="el" href="class_i_pv6.html">IPv6</a>). Used internally by the <a class="el" href="class_i_pv6_neighbour_discovery.html">IPv6NeighbourDiscovery</a> simple module.<p>
This is just a plain container class -- the <a class="el" href="class_i_pv6_neighbour_discovery.html">IPv6NeighbourDiscovery</a> module is free to manipulate the contents of the <a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> entries as it pleases.<p>
NOTE: we don't keep a separate Default Router List, the <a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> Cache serves that purpose too. Removing an entry from the Default Router List in our case is done by setting the isDefaultRouter flag of the entry to false. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; cMessage * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#w0">MsgPtrVector</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::map&lt; <a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a>, <a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#w1">NeighbourMap</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef NeighbourMap::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#w2">iterator</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#w8">ReachabilityState</a> { <br>
&nbsp;&nbsp;<a class="el" href="class_i_pv6_neighbour_cache.html#w8w3">INCOMPLETE</a>, 
<a class="el" href="class_i_pv6_neighbour_cache.html#w8w4">REACHABLE</a>, 
<a class="el" href="class_i_pv6_neighbour_cache.html#w8w5">STALE</a>, 
<a class="el" href="class_i_pv6_neighbour_cache.html#w8w6">DELAY</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="class_i_pv6_neighbour_cache.html#w8w7">PROBE</a>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a0">IPv6NeighbourCache</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a1">~IPv6NeighbourCache</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a2">lookup</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a3">lookupKeyAddr</a> (<a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a> &amp;key)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w2">iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a4">begin</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w2">iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a5">end</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a6">addNeighbour</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a7">addNeighbour</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID, <a class="el" href="class_m_a_c_address.html">MACAddress</a> macAddress)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a8">addRouter</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID, simtime_t expiryTime)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a9">addRouter</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID, <a class="el" href="class_m_a_c_address.html">MACAddress</a> macAddress, simtime_t expiryTime)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a10">remove</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;addr, int interfaceID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#a11">remove</a> (NeighbourMap::iterator it)</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#e0">stateName</a> (<a class="el" href="class_i_pv6_neighbour_cache.html#w8">ReachabilityState</a> state)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w1">NeighbourMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a></td></tr>

</table>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="w2" doxytag="IPv6NeighbourCache::iterator"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef NeighbourMap::iterator <a class="el" href="class_i_pv6_neighbour_cache.html#w2">IPv6NeighbourCache::iterator</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="w0" doxytag="IPv6NeighbourCache::MsgPtrVector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;cMessage*&gt; <a class="el" href="class_i_pv6_neighbour_cache.html#w0">IPv6NeighbourCache::MsgPtrVector</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="w1" doxytag="IPv6NeighbourCache::NeighbourMap"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::map&lt;<a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a>,<a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a>&gt; <a class="el" href="class_i_pv6_neighbour_cache.html#w1">IPv6NeighbourCache::NeighbourMap</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The std::map underlying the <a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">Neighbour</a> Cache data structure     </td>
  </tr>
</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w8" doxytag="IPv6NeighbourCache::ReachabilityState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="class_i_pv6_neighbour_cache.html#w8">IPv6NeighbourCache::ReachabilityState</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Neighbour's reachability state <dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w8w3" doxytag="INCOMPLETE"></a>INCOMPLETE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w8w4" doxytag="REACHABLE"></a>REACHABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w8w5" doxytag="STALE"></a>STALE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w8w6" doxytag="DELAY"></a>DELAY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w8w7" doxytag="PROBE"></a>PROBE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00049 {<a class="code" href="class_i_pv6_neighbour_cache.html#w8w3">INCOMPLETE</a>, <a class="code" href="class_i_pv6_neighbour_cache.html#w8w4">REACHABLE</a>, <a class="code" href="class_i_pv6_neighbour_cache.html#w8w5">STALE</a>, <a class="code" href="class_i_pv6_neighbour_cache.html#w8w6">DELAY</a>, <a class="code" href="class_i_pv6_neighbour_cache.html#w8w7">PROBE</a>};
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="IPv6NeighbourCache::IPv6NeighbourCache"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPv6NeighbourCache::IPv6NeighbourCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00042 {
00043     WATCH_MAP(neighbourMap);
00044 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="IPv6NeighbourCache::~IPv6NeighbourCache"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPv6NeighbourCache::~<a class="el" href="class_i_pv6_neighbour_cache.html">IPv6NeighbourCache</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00116 {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a7" doxytag="IPv6NeighbourCache::addNeighbour"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">IPv6NeighbourCache::Neighbour</a> * IPv6NeighbourCache::addNeighbour           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_m_a_c_address.html">MACAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>macAddress</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates and initializes a neighbour entry with isRouter=false, MAC address and state=STALE. <div class="fragment"><pre class="fragment">00078 {
00079     Key key(addr, interfaceID);
00080     ASSERT(<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key)==<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end()); <span class="comment">// entry must not exist yet</span>
00081     Neighbour&amp; nbor = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>[key];
00082 
00083     nbor.nceKey = <a class="code" href="class_i_pv6_neighbour_cache.html#a3">lookupKeyAddr</a>(key);<span class="comment">//a ptr that links to the key.-WEI for convenience.</span>
00084     nbor.macAddress = macAddress;
00085     nbor.isRouter = <span class="keyword">false</span>;
00086     nbor.isDefaultRouter = <span class="keyword">false</span>;
00087     nbor.reachabilityState = <a class="code" href="class_i_pv6_neighbour_cache.html#w8w5">STALE</a>;
00088     nbor.reachabilityExpires = 0;
00089     nbor.numProbesSent = 0;
00090     nbor.nudTimeoutEvent = NULL;
00091     nbor.routerExpiryTime = 0;
00092     <span class="keywordflow">return</span> &amp;nbor;
00093 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="IPv6NeighbourCache::addNeighbour"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">IPv6NeighbourCache::Neighbour</a> * IPv6NeighbourCache::addNeighbour           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates and initializes a neighbour entry with isRouter=false, state=INCOMPLETE. <div class="fragment"><pre class="fragment">00060 {
00061     Key key(addr, interfaceID);
00062     ASSERT(<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key)==<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end()); <span class="comment">// entry must not exist yet</span>
00063     Neighbour&amp; nbor = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>[key];
00064 
00065     nbor.nceKey = <a class="code" href="class_i_pv6_neighbour_cache.html#a3">lookupKeyAddr</a>(key);<span class="comment">//a ptr that links to the key.-WEI for convenience.</span>
00066     nbor.isRouter = <span class="keyword">false</span>;
00067     nbor.isDefaultRouter = <span class="keyword">false</span>;
00068     nbor.reachabilityState = <a class="code" href="class_i_pv6_neighbour_cache.html#w8w3">INCOMPLETE</a>;
00069     nbor.reachabilityExpires = 0;
00070     nbor.numProbesSent = 0;
00071     nbor.nudTimeoutEvent = NULL;
00072     nbor.numOfARNSSent = 0;
00073     nbor.routerExpiryTime = 0;
00074     <span class="keywordflow">return</span> &amp;nbor;
00075 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="IPv6NeighbourCache::addRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">IPv6NeighbourCache::Neighbour</a> * IPv6NeighbourCache::addRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_m_a_c_address.html">MACAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>macAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>simtime_t&nbsp;</td>
          <td class="mdname" nowrap> <em>expiryTime</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates and initializes a router entry (isRouter=isDefaultRouter=true), MAC address and state=STALE. <div class="fragment"><pre class="fragment">00115 {
00116     Key key(addr, interfaceID);
00117     ASSERT(<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key)==<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end()); <span class="comment">// entry must not exist yet</span>
00118     Neighbour&amp; nbor = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>[key];
00119 
00120     nbor.nceKey = <a class="code" href="class_i_pv6_neighbour_cache.html#a3">lookupKeyAddr</a>(key);<span class="comment">//a ptr that links to the key.-WEI for convenience.</span>
00121     nbor.macAddress = macAddress;
00122     nbor.isRouter = <span class="keyword">true</span>;
00123     nbor.isDefaultRouter = <span class="keyword">true</span>;
00124     nbor.reachabilityState = <a class="code" href="class_i_pv6_neighbour_cache.html#w8w5">STALE</a>;
00125     nbor.reachabilityExpires = 0;
00126     nbor.numProbesSent = 0;
00127     nbor.nudTimeoutEvent = NULL;
00128 
00129     nbor.routerExpiryTime = expiryTime;
00130     <span class="keywordflow">return</span> &amp;nbor;
00131 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="IPv6NeighbourCache::addRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">IPv6NeighbourCache::Neighbour</a> * IPv6NeighbourCache::addRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>simtime_t&nbsp;</td>
          <td class="mdname" nowrap> <em>expiryTime</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates and initializes a router entry (isRouter=isDefaultRouter=true), state=INCOMPLETE. <div class="fragment"><pre class="fragment">00097 {
00098     Key key(addr, interfaceID);
00099     ASSERT(<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key)==<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end()); <span class="comment">// entry must not exist yet</span>
00100     Neighbour&amp; nbor = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>[key];
00101 
00102     nbor.nceKey = <a class="code" href="class_i_pv6_neighbour_cache.html#a3">lookupKeyAddr</a>(key);<span class="comment">//a ptr that links to the key.-WEI for convenience.</span>
00103     nbor.isRouter = <span class="keyword">true</span>;
00104     nbor.isDefaultRouter = <span class="keyword">true</span>;<span class="comment">//FIXME: a router may advertise itself it self as a router but not as a default one.-WEI</span>
00105     nbor.reachabilityState = <a class="code" href="class_i_pv6_neighbour_cache.html#w8w3">INCOMPLETE</a>;
00106     nbor.reachabilityExpires = 0;
00107     nbor.numProbesSent = 0;
00108     nbor.nudTimeoutEvent = NULL;
00109     nbor.routerExpiryTime = expiryTime;
00110     <span class="keywordflow">return</span> &amp;nbor;
00111 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="IPv6NeighbourCache::begin"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w2">iterator</a> IPv6NeighbourCache::begin           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For iteration on the internal std::map <div class="fragment"><pre class="fragment">00125 {<span class="keywordflow">return</span> <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.begin();}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="IPv6NeighbourCache::end"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w2">iterator</a> IPv6NeighbourCache::end           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For iteration on the internal std::map <div class="fragment"><pre class="fragment">00128 {<span class="keywordflow">return</span> <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end();}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="IPv6NeighbourCache::lookup"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_neighbour.html">IPv6NeighbourCache::Neighbour</a> * IPv6NeighbourCache::lookup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a neighbour entry, or NULL. <div class="fragment"><pre class="fragment">00047 {
00048     Key key(addr, interfaceID);
00049     NeighbourMap::iterator i = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key);
00050     <span class="keywordflow">return</span> i==<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end() ? NULL : &amp;(i-&gt;second);
00051 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="IPv6NeighbourCache::lookupKeyAddr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">IPv6NeighbourCache::Key</a> * IPv6NeighbourCache::lookupKeyAddr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_i_pv6_neighbour_cache_1_1_key.html">Key</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Experimental code. <div class="fragment"><pre class="fragment">00054 {
00055     NeighbourMap::iterator i = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key);
00056     <span class="keywordflow">return</span> &amp;(i-&gt;first);
00057 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="IPv6NeighbourCache::remove"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void IPv6NeighbourCache::remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">NeighbourMap::iterator&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>it</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the given neighbour from the cache. <div class="fragment"><pre class="fragment">00143 {
00144     <span class="keyword">delete</span> it-&gt;second.nudTimeoutEvent;
00145     <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.erase(it);
00146 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="IPv6NeighbourCache::remove"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void IPv6NeighbourCache::remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>interfaceID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the given neighbour from the cache. <div class="fragment"><pre class="fragment">00134 {
00135     Key key(addr, interfaceID);
00136     NeighbourMap::iterator it = <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.find(key);
00137     ASSERT(it!=<a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.end()); <span class="comment">// entry must exist</span>
00138     <span class="keyword">delete</span> it-&gt;second.nudTimeoutEvent;
00139     <a class="code" href="class_i_pv6_neighbour_cache.html#r0">neighbourMap</a>.erase(it);
00140 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="IPv6NeighbourCache::stateName"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char * IPv6NeighbourCache::stateName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w8">ReachabilityState</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>state</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the name of the given state as string <div class="fragment"><pre class="fragment">00149 {
00150     <span class="keywordflow">switch</span> (state)
00151     {
00152         <span class="keywordflow">case</span> <a class="code" href="class_i_pv6_neighbour_cache.html#w8w3">INCOMPLETE</a>: <span class="keywordflow">return</span> <span class="stringliteral">"INCOMPLETE"</span>;
00153         <span class="keywordflow">case</span> <a class="code" href="class_i_pv6_neighbour_cache.html#w8w4">REACHABLE</a>:  <span class="keywordflow">return</span> <span class="stringliteral">"REACHABLE"</span>;
00154         <span class="keywordflow">case</span> <a class="code" href="class_i_pv6_neighbour_cache.html#w8w5">STALE</a>:      <span class="keywordflow">return</span> <span class="stringliteral">"STALE"</span>;
00155         <span class="keywordflow">case</span> <a class="code" href="class_i_pv6_neighbour_cache.html#w8w6">DELAY</a>:      <span class="keywordflow">return</span> <span class="stringliteral">"DELAY"</span>;
00156         <span class="keywordflow">case</span> <a class="code" href="class_i_pv6_neighbour_cache.html#w8w7">PROBE</a>:      <span class="keywordflow">return</span> <span class="stringliteral">"PROBE"</span>;
00157         <span class="keywordflow">default</span>:         <span class="keywordflow">return</span> <span class="stringliteral">"???"</span>;
00158     }
00159 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="IPv6NeighbourCache::neighbourMap"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_neighbour_cache.html#w1">NeighbourMap</a> <a class="el" href="class_i_pv6_neighbour_cache.html#r0">IPv6NeighbourCache::neighbourMap</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_i_pv6_neighbour_cache_8h.html">IPv6NeighbourCache.h</a><li><a class="el" href="_i_pv6_neighbour_cache_8cc.html">IPv6NeighbourCache.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:25 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
