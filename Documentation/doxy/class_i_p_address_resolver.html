<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: IPAddressResolver Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>IPAddressResolver Class Reference</h1><code>#include &lt;IPAddressResolver.h&gt;</code>
<p>
<a href="class_i_p_address_resolver-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Utility class for finding IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of a host or router.<p>
Syntax variations understood:<ul>
<li>literal IPv4 address: "186.54.66.2"</li><li>literal <a class="el" href="class_i_pv6.html">IPv6</a> address: "3011:7cd6:750b:5fd6:aba3:c231:e9f9:6a43"</li><li>module name: "server", "subnet.server[3]"</li><li>interface of a host or router: "server/eth0", "subnet.server[3]/eth0"</li><li>IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of a host or router: "server(ipv4)", "subnet.server[3](ipv6)"</li><li>IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of an interface of a host or router: "server/eth0(ipv4)", "subnet.server[3]/eth0(ipv6)"</li><li>routerId: "router1/routerId", "R1/routerId" </li></ul>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="class_i_p_address_resolver.html#w4w0">ADDR_PREFER_IPv4</a>, 
<a class="el" href="class_i_p_address_resolver.html#w4w1">ADDR_PREFER_IPv6</a>, 
<a class="el" href="class_i_p_address_resolver.html#w4w2">ADDR_IPv4</a>, 
<a class="el" href="class_i_p_address_resolver.html#w4w3">ADDR_IPv6</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#a0">IPAddressResolver</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#a1">~IPAddressResolver</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#a2">resolve</a> (const char *str, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#a3">tryResolve</a> (const char *str, <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;result, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td colspan="2"><div class="groupHeader">Utility functions supporting resolve()</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_0">addressOf</a> (cModule *host, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_1">addressOf</a> (cModule *host, const char *ifname, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_2">routerIdOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_3">getAddressFrom</a> (<a class="el" href="class_interface_table.html">InterfaceTable</a> *ift, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_4">getAddressFrom</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie, int addrType=ADDR_PREFER_IPv6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_5">interfaceTableOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_table.html">RoutingTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_6">routingTableOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_7">notificationBoardOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_8">findInterfaceTableOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_table.html">RoutingTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_9">findRoutingTableOf</a> (cModule *host)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#z31_10">findNotificationBoardOf</a> (cModule *host)</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#d0">getIPv4AddressFrom</a> (<a class="el" href="class_interface_table.html">InterfaceTable</a> *ift)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#d1">getIPv6AddressFrom</a> (<a class="el" href="class_interface_table.html">InterfaceTable</a> *ift)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#d2">getIPv6AddressFrom</a> (<a class="el" href="class_interface_table.html">InterfaceTable</a> *ift, int scope)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_p_address_resolver.html#d3">getInterfaceIPv6Address</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie)</td></tr>

</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w4" doxytag="IPAddressResolver::@1"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w4w0" doxytag="ADDR_PREFER_IPv4"></a>ADDR_PREFER_IPv4</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w4w1" doxytag="ADDR_PREFER_IPv6"></a>ADDR_PREFER_IPv6</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w4w2" doxytag="ADDR_IPv4"></a>ADDR_IPv4</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w4w3" doxytag="ADDR_IPv6"></a>ADDR_IPv6</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00060          {
00061         <a class="code" href="class_i_p_address_resolver.html#w4w0">ADDR_PREFER_IPv4</a>,
00062         <a class="code" href="class_i_p_address_resolver.html#w4w1">ADDR_PREFER_IPv6</a>,
00063         <a class="code" href="class_i_p_address_resolver.html#w4w2">ADDR_IPv4</a>,
00064         <a class="code" href="class_i_p_address_resolver.html#w4w3">ADDR_IPv6</a>
00065     };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="IPAddressResolver::IPAddressResolver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPAddressResolver::IPAddressResolver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00068 {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="IPAddressResolver::~IPAddressResolver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPAddressResolver::~<a class="el" href="class_i_p_address_resolver.html">IPAddressResolver</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00069 {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z31_1" doxytag="IPAddressResolver::addressOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> IPAddressResolver::addressOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname" nowrap> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>ifname</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Similar to <a class="el" href="class_i_p_address_resolver.html#z31_0">addressOf()</a>, but only looks at the given interface <div class="fragment"><pre class="fragment">00105 {
00106     <a class="code" href="class_interface_table.html">InterfaceTable</a> *ift = <a class="code" href="class_i_p_address_resolver.html#z31_5">interfaceTableOf</a>(host);
00107     <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = ift-&gt;<a class="code" href="class_interface_table.html#a9">interfaceByName</a>(ifname);
00108     <span class="keywordflow">if</span> (!ie)
00109         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: no interface called `%s' in `%s'", ifname, ift-&gt;fullPath().c_str());
00110     return getAddressFrom(ie, addrType);
00111 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_0" doxytag="IPAddressResolver::addressOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> IPAddressResolver::addressOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname" nowrap> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of the given host or router.<p>
This function uses <a class="el" href="class_i_p_address_resolver.html#z31_6">routingTableOf()</a> to find the <a class="el" href="class_routing_table.html">RoutingTable</a> module, then invokes <a class="el" href="class_i_p_address_resolver.html#z31_3">getAddressFrom()</a> to extract the <a class="el" href="class_i_p.html">IP</a> address. <div class="fragment"><pre class="fragment">00099 {
00100     <a class="code" href="class_interface_table.html">InterfaceTable</a> *ift = <a class="code" href="class_i_p_address_resolver.html#z31_5">interfaceTableOf</a>(host);
00101     <span class="keywordflow">return</span> <a class="code" href="class_i_p_address_resolver.html#z31_3">getAddressFrom</a>(ift, addrType);
00102 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_8" doxytag="IPAddressResolver::findInterfaceTableOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> * IPAddressResolver::findInterfaceTableOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Like <a class="el" href="class_i_p_address_resolver.html#z31_5">interfaceTableOf()</a>, but doesn't throw error if not found. <div class="fragment"><pre class="fragment">00259 {
00260     cModule *mod = host-&gt;submodule(<span class="stringliteral">"interfaceTable"</span>);
00261     <span class="keywordflow">return</span> dynamic_cast&lt;InterfaceTable *&gt;(mod);
00262 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_10" doxytag="IPAddressResolver::findNotificationBoardOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> * IPAddressResolver::findNotificationBoardOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Like <a class="el" href="class_i_p_address_resolver.html#z31_7">notificationBoardOf()</a>, but doesn't throw error if not found. <div class="fragment"><pre class="fragment">00279 {
00280     cModule *mod = host-&gt;submodule(<span class="stringliteral">"notificationBoard"</span>);
00281     <span class="keywordflow">return</span> dynamic_cast&lt;NotificationBoard *&gt;(mod);
00282 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_9" doxytag="IPAddressResolver::findRoutingTableOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_table.html">RoutingTable</a> * IPAddressResolver::findRoutingTableOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Like <a class="el" href="class_i_p_address_resolver.html#z31_6">routingTableOf()</a>, but doesn't throw error if not found. <div class="fragment"><pre class="fragment">00265 {
00266     cModule *mod = host-&gt;submodule(<span class="stringliteral">"routingTable"</span>);
00267     <span class="keywordflow">return</span> dynamic_cast&lt;RoutingTable *&gt;(mod);
00268 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_4" doxytag="IPAddressResolver::getAddressFrom"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> IPAddressResolver::getAddressFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ie</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of the given interface (of a host or router). <div class="fragment"><pre class="fragment">00136 {
00137     <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> ret;
00138     <span class="keywordflow">if</span> (addrType==ADDR_IPv6 || addrType==ADDR_PREFER_IPv6)
00139     {
00140         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>())
00141             ret = <a class="code" href="class_i_p_address_resolver.html#d3">getInterfaceIPv6Address</a>(ie);
00142         <span class="keywordflow">if</span> (ret.<a class="code" href="class_i_pv_x_address.html#z36_0">isUnspecified</a>() &amp;&amp; addrType==<a class="code" href="class_i_p_address_resolver.html#w4w1">ADDR_PREFER_IPv6</a> &amp;&amp; ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>())
00143             ret = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>();
00144     }
00145     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addrType==ADDR_IPv4 || addrType==ADDR_PREFER_IPv4)
00146     {
00147         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>())
00148             ret = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>();
00149         <span class="keywordflow">if</span> (ret.<a class="code" href="class_i_pv_x_address.html#z36_0">isUnspecified</a>() &amp;&amp; addrType==<a class="code" href="class_i_p_address_resolver.html#w4w0">ADDR_PREFER_IPv4</a> &amp;&amp; ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>())
00150             ret = <a class="code" href="class_i_p_address_resolver.html#d3">getInterfaceIPv6Address</a>(ie);
00151     }
00152     <span class="keywordflow">else</span>
00153     {
00154         opp_error(<span class="stringliteral">"IPAddressResolver: unknown addrType %d"</span>, addrType);
00155     }
00156     <span class="keywordflow">return</span> ret;
00157 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_3" doxytag="IPAddressResolver::getAddressFrom"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> IPAddressResolver::getAddressFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ift</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the IPv4 or <a class="el" href="class_i_pv6.html">IPv6</a> address of the given host or router, given its <a class="el" href="class_interface_table.html">InterfaceTable</a> module. For IPv4, the first usable interface address is chosen. <div class="fragment"><pre class="fragment">00114 {
00115     <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> ret;
00116     <span class="keywordflow">if</span> (addrType==ADDR_IPv6 || addrType==ADDR_PREFER_IPv6)
00117     {
00118         ret = <a class="code" href="class_i_p_address_resolver.html#d1">getIPv6AddressFrom</a>(ift);
00119         <span class="keywordflow">if</span> (ret.<a class="code" href="class_i_pv_x_address.html#z36_0">isUnspecified</a>() &amp;&amp; addrType==<a class="code" href="class_i_p_address_resolver.html#w4w1">ADDR_PREFER_IPv6</a>)
00120             ret = <a class="code" href="class_i_p_address_resolver.html#d0">getIPv4AddressFrom</a>(ift);
00121     }
00122     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addrType==ADDR_IPv4 || addrType==ADDR_PREFER_IPv4)
00123     {
00124         ret = <a class="code" href="class_i_p_address_resolver.html#d0">getIPv4AddressFrom</a>(ift);
00125         <span class="keywordflow">if</span> (ret.<a class="code" href="class_i_pv_x_address.html#z36_0">isUnspecified</a>() &amp;&amp; addrType==<a class="code" href="class_i_p_address_resolver.html#w4w0">ADDR_PREFER_IPv4</a>)
00126             ret = <a class="code" href="class_i_p_address_resolver.html#d1">getIPv6AddressFrom</a>(ift);
00127     }
00128     <span class="keywordflow">else</span>
00129     {
00130         opp_error(<span class="stringliteral">"IPAddressResolver: unknown addrType %d"</span>, addrType);
00131     }
00132     <span class="keywordflow">return</span> ret;
00133 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="IPAddressResolver::getInterfaceIPv6Address"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a> IPAddressResolver::getInterfaceIPv6Address           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ie</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00206 {
00207 <span class="preprocessor">#ifdef WITH_IPv6</span>
00208 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>())
00209         <span class="keywordflow">return</span> <a class="code" href="class_i_pv6_address.html">IPv6Address</a>();
00210     <span class="keywordflow">return</span> ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#z48_9">preferredAddress</a>();
00211 <span class="preprocessor">#else</span>
00212 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="class_i_pv6_address.html">IPv6Address</a>();
00213 <span class="preprocessor">#endif</span>
00214 <span class="preprocessor"></span>}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="IPAddressResolver::getIPv4AddressFrom"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a> IPAddressResolver::getIPv4AddressFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ift</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00160 {
00161     <a class="code" href="class_i_p_address.html">IPAddress</a> addr;
00162     <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_interface_table.html#a4">numInterfaces</a>()==0)
00163         opp_error(<span class="stringliteral">"IPAddressResolver: interface table `%s' has no interface registered "</span>
00164                   <span class="stringliteral">"(yet? try in a later init stage!)"</span>, ift-&gt;fullPath().c_str());
00165 
00166     <span class="comment">// choose first usable interface address (configured for IPv4, non-loopback if, addr non-null)</span>
00167     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); i++)
00168     {
00169         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = ift-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00170         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>() &amp;&amp; !ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>().<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() &amp;&amp; !ie-&gt;<a class="code" href="class_interface_entry.html#a15">isLoopback</a>())
00171         {
00172             addr = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>();
00173             <span class="keywordflow">break</span>;
00174         }
00175     }
00176     <span class="keywordflow">return</span> addr;
00177 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="IPAddressResolver::getIPv6AddressFrom"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a> IPAddressResolver::getIPv6AddressFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ift</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>scope</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="IPAddressResolver::getIPv6AddressFrom"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv6_address.html">IPv6Address</a> IPAddressResolver::getIPv6AddressFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ift</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00180 {
00181 <span class="preprocessor">#ifdef WITH_IPv6</span>
00182 <span class="preprocessor"></span>    <span class="comment">// browse interfaces and pick a globally routable address</span>
00183     <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_interface_table.html#a4">numInterfaces</a>()==0)
00184         opp_error(<span class="stringliteral">"IPAddressResolver: interface table `%s' has no interface registered "</span>
00185                   <span class="stringliteral">"(yet? try in a later init stage!)"</span>, ift-&gt;fullPath().c_str());
00186 
00187     <a class="code" href="class_i_pv6_address.html">IPv6Address</a> addr;
00188     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces() &amp;&amp; addr.<a class="code" href="class_i_pv6_address.html#a22">isUnspecified</a>(); i++)
00189     {
00190         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = ift-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00191         <span class="keywordflow">if</span> (!ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>() || ie-&gt;<a class="code" href="class_interface_entry.html#a15">isLoopback</a>())
00192             <span class="keywordflow">continue</span>;
00193         <a class="code" href="class_i_pv6_address.html">IPv6Address</a> ifAddr = ie-&gt;<a class="code" href="class_interface_entry.html#a34">ipv6</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#z48_9">preferredAddress</a>();
00194         <span class="keywordflow">if</span> (addr.<a class="code" href="class_i_pv6_address.html#a28">isGlobal</a>() &amp;&amp; ifAddr.<a class="code" href="class_i_pv6_address.html#a28">isGlobal</a>() &amp;&amp; addr!=ifAddr)
00195             <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; ift-&gt;fullPath() &lt;&lt; <span class="stringliteral">" has at least two globally routable addresses on different interfaces\n"</span>;
00196         <span class="keywordflow">if</span> (ifAddr.<a class="code" href="class_i_pv6_address.html#a28">isGlobal</a>())
00197             addr = ifAddr;
00198     }
00199     <span class="keywordflow">return</span> addr;
00200 <span class="preprocessor">#else</span>
00201 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="class_i_pv6_address.html">IPv6Address</a>();
00202 <span class="preprocessor">#endif</span>
00203 <span class="preprocessor"></span>}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_5" doxytag="IPAddressResolver::interfaceTableOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> * IPAddressResolver::interfaceTableOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function tries to look up the <a class="el" href="class_interface_table.html">InterfaceTable</a> module as submodule <code>"interfaceTable"</code> or <code>"networkLayer.interfaceTable"</code> within the host/router module. Throws an error if not found. <div class="fragment"><pre class="fragment">00217 {
00218     <span class="comment">// find InterfaceTable</span>
00219     cModule *mod = host-&gt;submodule(<span class="stringliteral">"interfaceTable"</span>);
00220     <span class="keywordflow">if</span> (!mod)
00221         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: <a class="code" href="class_interface_table.html">InterfaceTable</a> not found as submodule "
00222                   " `interfaceTable' in host/router `%s'", host-&gt;fullPath().c_str());
00223     return check_and_cast&lt;<a class="code" href="class_interface_table.html">InterfaceTable</a> *&gt;(mod);
00224 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_7" doxytag="IPAddressResolver::notificationBoardOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> * IPAddressResolver::notificationBoardOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function tries to look up the <a class="el" href="class_notification_board.html">NotificationBoard</a> module as submodule <code>"notificationBoard"</code> within the host/router module. Throws an error if not found. <div class="fragment"><pre class="fragment">00249 {
00250     <span class="comment">// find NotificationBoard</span>
00251     cModule *mod = host-&gt;submodule(<span class="stringliteral">"notificationBoard"</span>);
00252     <span class="keywordflow">if</span> (!mod)
00253         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: <a class="code" href="class_notification_board.html">NotificationBoard</a> not found as submodule "
00254                   " notificationBoard' in host/router `%s'", host-&gt;fullPath().c_str());
00255     return check_and_cast&lt;<a class="code" href="class_notification_board.html">NotificationBoard</a> *&gt;(mod);
00256 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="IPAddressResolver::resolve"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> IPAddressResolver::resolve           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accepts dotted decimal notation ("127.0.0.1"), module name of the host or router ("host[2]"), and empty string (""). For the latter, it returns the null address. If module name is specified, the module will be looked up using <code>simulation.moduleByPath()</code>, and then <a class="el" href="class_i_p_address_resolver.html#z31_0">addressOf()</a> will be called to determine its <a class="el" href="class_i_p.html">IP</a> address. <div class="fragment"><pre class="fragment">00031 {
00032     <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> addr;
00033     <span class="keywordflow">if</span> (!<a class="code" href="class_i_p_address_resolver.html#a3">tryResolve</a>(s, addr, addrType))
00034         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: address `%s' not configured (yet?)", s);
00035     return addr;
00036 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_2" doxytag="IPAddressResolver::routerIdOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a> IPAddressResolver::routerIdOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the router Id of the given router. Router Id is obtained from the routerId() method of the <a class="el" href="class_routing_table.html">RoutingTable</a> submodule. <div class="fragment"><pre class="fragment">00093 {
00094     <a class="code" href="class_routing_table.html">RoutingTable</a> *rt = <a class="code" href="class_i_p_address_resolver.html#z31_6">routingTableOf</a>(host);
00095     <span class="keywordflow">return</span> rt-&gt;<a class="code" href="class_routing_table.html#a4">routerId</a>();
00096 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z31_6" doxytag="IPAddressResolver::routingTableOf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_table.html">RoutingTable</a> * IPAddressResolver::routingTableOf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cModule *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function tries to look up the <a class="el" href="class_routing_table.html">RoutingTable</a> module as submodule <code>"routingTable"</code> or <code>"networkLayer.routingTable"</code> within the host/router module. Throws an error if not found. <div class="fragment"><pre class="fragment">00227 {
00228     <span class="comment">// find RoutingTable</span>
00229     cModule *mod = host-&gt;submodule(<span class="stringliteral">"routingTable"</span>);
00230     <span class="keywordflow">if</span> (!mod)
00231         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: <a class="code" href="class_routing_table.html">RoutingTable</a> not found as submodule "
00232                   " `routingTable' in host/router `%s'", host-&gt;fullPath().c_str());
00233     return check_and_cast&lt;<a class="code" href="class_routing_table.html">RoutingTable</a> *&gt;(mod);
00234 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="IPAddressResolver::tryResolve"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool IPAddressResolver::tryResolve           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>addrType</em> = <code>ADDR_PREFER_IPv6</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Similar to <a class="el" href="class_i_p_address_resolver.html#a2">resolve()</a>, but returns false (instead of throwing an error) if the address cannot be resolved because the given host (or interface) doesn't have an address assigned yet. (It still throws an error on any other error condition). <div class="fragment"><pre class="fragment">00039 {
00040     <span class="comment">// empty address</span>
00041     result = <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>();
00042     <span class="keywordflow">if</span> (!s || !*s)
00043         return true;
00044 
00045     <span class="comment">// handle address literal</span>
00046     if (result.tryParse(s))
00047         return true;
00048 
00049     <span class="comment">// must be "modulename/interfacename(protocol)" syntax then,</span>
00050     <span class="comment">// "/interfacename" and "(protocol)" being optional</span>
00051     const <span class="keywordtype">char</span> *slashp = strchr(s,'/');
00052     const <span class="keywordtype">char</span> *leftparenp = strchr(s,'(');
00053     const <span class="keywordtype">char</span> *rightparenp = strchr(s,')');
00054     const <span class="keywordtype">char</span> *endp = s+strlen(s);
00055 
00056     <span class="comment">// rudimentary syntax check</span>
00057     if ((slashp &amp;&amp; leftparenp &amp;&amp; slashp&gt;leftparenp) ||
00058         (leftparenp &amp;&amp; !rightparenp) ||
00059         (!leftparenp &amp;&amp; rightparenp) ||
00060         (rightparenp &amp;&amp; rightparenp!=endp-1))
00061     {
00062         opp_error(<span class="stringliteral">"IPAddressResolver: syntax error parsing address spec `%s'"</span>, s);
00063     }
00064 
00065     <span class="comment">// parse fields: modname, ifname, protocol</span>
00066     std::string modname, ifname, protocol;
00067     modname.assign(s, (slashp?slashp:leftparenp?leftparenp:endp)-s);
00068     <span class="keywordflow">if</span> (slashp)
00069         ifname.assign(slashp+1, (leftparenp?leftparenp:endp)-slashp-1);
00070     if (leftparenp)
00071         protocol.assign(leftparenp+1, rightparenp-leftparenp-1);
00072 
00073     <span class="comment">// find module and check protocol</span>
00074     cModule *mod = simulation.moduleByPath(modname.c_str());
00075     if (!mod)
00076         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: module `%s' not found", modname.c_str());
00077     if (!protocol.empty() &amp;&amp; protocol!="ipv4" &amp;&amp; protocol!="ipv6")
00078         opp_error("<a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>: error parsing address spec `%s': address type must be `(ipv4)' or `(ipv6)'", s);
00079     if (!protocol.empty())
00080         addrType = protocol=="ipv4" ? ADDR_IPv4 : ADDR_IPv6;
00081 
00082     <span class="comment">// get address from the given module/interface</span>
00083     if (ifname.empty())
00084         result = addressOf(mod, addrType);
00085     else if (ifname == "routerId")
00086         result = <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(routerIdOf(mod)); <span class="comment">// addrType is meaningless here, routerId is protocol independent</span>
00087     else
00088         result = addressOf(mod, ifname.c_str(), addrType);
00089     return !result.isUnspecified();
00090 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_i_p_address_resolver_8h.html">IPAddressResolver.h</a><li><a class="el" href="_i_p_address_resolver_8cc.html">IPAddressResolver.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:24 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
