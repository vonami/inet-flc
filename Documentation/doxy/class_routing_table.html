<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: RoutingTable Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>RoutingTable Class Reference</h1><code>#include &lt;RoutingTable.h&gt;</code>
<p>
<p>Inheritance diagram for RoutingTable:
<p><center><img src="class_routing_table.png" usemap="#RoutingTable_map" border="0" alt=""></center>
<map name="RoutingTable_map">
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,85,24">
</map>
<a href="class_routing_table-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Represents the routing table. This object has one instance per host or router. It has methods to manage the route table and the interface table, so one can achieve functionality similar to the "route" and "ifconfig" commands.<p>
See the NED documentation for general overview.<p>
This is a simple module without gates, it requires function calls to it (message handling does nothing). Methods are provided for reading and updating the interface table and the route table, as well as for unicast and multicast routing.<p>
Interfaces are dynamically registered: at the start of the simulation, every L2 module adds its own interface entry to the table.<p>
The route table is read from a file (<a class="el" href="class_routing_table_parser.html">RoutingTableParser</a>); the file can also fill in or overwrite interface settings. The route table can also be read and modified during simulation, typically by routing protocol implementations (e.g. <a class="el" href="namespace_o_s_p_f.html">OSPF</a>).<p>
Entries in the route table are represented by <a class="el" href="class_routing_entry.html">RoutingEntry</a> objects. <a class="el" href="class_routing_entry.html">RoutingEntry</a> objects can be polymorphic: if a routing protocol needs to store additional data, it can simply subclass from <a class="el" href="class_routing_entry.html">RoutingEntry</a>, and add the derived object to the table.<p>
Uses <a class="el" href="class_routing_table_parser.html">RoutingTableParser</a> to read routing files (.irt, .mrt).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="class_interface_entry.html">InterfaceEntry</a>, <a class="el" href="class_i_pv4_interface_data.html">IPv4InterfaceData</a>, <a class="el" href="class_routing_entry.html">RoutingEntry</a> </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a0">RoutingTable</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a1">~RoutingTable</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a2">receiveChangeNotification</a> (int category, cPolymorphic *details)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a3">ipForward</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a4">routerId</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#a5">setRouterId</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> a)</td></tr>

<tr><td colspan="2"><div class="groupHeader">Debug/utility</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z38_0">printIfconfig</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z38_1">printRoutingTable</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Interfaces</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z40_0">configureInterfaceForIPv4</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z40_1">interfaceByAddress</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;address)</td></tr>

<tr><td colspan="2"><div class="groupHeader">Routing functions (query the route table)</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z42_0">localDeliver</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z42_1">findBestMatchingRoute</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z42_2">interfaceForDestAddr</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z42_3">gatewayForDestAddr</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td colspan="2"><div class="groupHeader">Multicast routing functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z44_0">multicastLocalDeliver</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="_routing_table_8h.html#a0">MulticastRoutes</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z44_1">multicastRoutesFor</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;dest)</td></tr>

<tr><td colspan="2"><div class="groupHeader">Route table manipulation</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_0">numRoutingEntries</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_1">routingEntry</a> (int k)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_2">findRoutingEntry</a> (const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;target, const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;netmask, const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;gw, int metric=0, char *dev=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_3">addRoutingEntry</a> (<a class="el" href="class_routing_entry.html">RoutingEntry</a> *entry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_4">deleteRoutingEntry</a> (<a class="el" href="class_routing_entry.html">RoutingEntry</a> *entry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_i_p_address.html">IPAddress</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#z46_5">gatherAddresses</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b0">configureLoopbackForIPv4</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b1">routingEntryMatches</a> (<a class="el" href="class_routing_entry.html">RoutingEntry</a> *entry, const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;target, const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;nmask, const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;gw, int metric, const char *dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b2">autoconfigRouterId</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b3">updateNetmaskRoutes</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b4">updateDisplayString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b5">numInitStages</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b6">initialize</a> (int stage)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#b7">handleMessage</a> (cMessage *)</td></tr>

<tr><td colspan="2"><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; <a class="el" href="class_routing_entry.html">RoutingEntry</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#y0">RouteVector</a></td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r0">ift</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r1">nb</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r2">_routerId</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r3">IPForward</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_table.html#y0">RouteVector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r4">routes</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_routing_table.html#y0">RouteVector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table.html#r5">multicastRoutes</a></td></tr>

</table>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y0" doxytag="RoutingTable::RouteVector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;<a class="el" href="class_routing_entry.html">RoutingEntry</a> *&gt; <a class="el" href="class_routing_table.html#y0">RoutingTable::RouteVector</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="RoutingTable::RoutingTable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RoutingTable::RoutingTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00088 {
00089 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="RoutingTable::~RoutingTable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RoutingTable::~<a class="el" href="class_routing_table.html">RoutingTable</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00092 {
00093     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table.html#r4">routes</a>.size(); i++)
00094         <span class="keyword">delete</span> <a class="code" href="class_routing_table.html#r4">routes</a>[i];
00095     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.size(); i++)
00096         <span class="keyword">delete</span> <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>[i];
00097 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z46_3" doxytag="RoutingTable::addRoutingEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::addRoutingEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a route to the routing table. <div class="fragment"><pre class="fragment">00392 {
00393     Enter_Method(<span class="stringliteral">"addRoutingEntry(...)"</span>);
00394 
00395     <span class="comment">// check for null address and default route</span>
00396     <span class="keywordflow">if</span> ((entry-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() || entry-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>()) &amp;&amp;
00397         (!entry-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() || !entry-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>()))
00398         error(<span class="stringliteral">"addRoutingEntry(): to add a default route, set both host and netmask to zero"</span>);
00399 
00400     <span class="comment">// fill in interface ptr from interface name</span>
00401     entry-&gt;<a class="code" href="class_routing_entry.html#o4">interfacePtr</a> = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a9">interfaceByName</a>(entry-&gt;<a class="code" href="class_routing_entry.html#o3">interfaceName</a>.c_str());
00402     <span class="keywordflow">if</span> (!entry-&gt;<a class="code" href="class_routing_entry.html#o4">interfacePtr</a>)
00403         error("addRoutingEntry(): interface `%s' doesn't exist", entry-&gt;interfaceName.c_str());
00404 
00405     <span class="comment">// add to tables</span>
00406     if (!entry-&gt;host.isMulticast())
00407     {
00408         <a class="code" href="class_routing_table.html#r4">routes</a>.push_back(entry);
00409     }
00410     <span class="keywordflow">else</span>
00411     {
00412         <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.push_back(entry);
00413     }
00414 
00415     <a class="code" href="class_routing_table.html#b4">updateDisplayString</a>();
00416 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="RoutingTable::autoconfigRouterId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::autoconfigRouterId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00154 {
00155     <span class="keywordflow">if</span> (<a class="code" href="class_routing_table.html#r2">_routerId</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>())  <span class="comment">// not yet configured</span>
00156     {
00157         <span class="keyword">const</span> <span class="keywordtype">char</span> *routerIdStr = par(<span class="stringliteral">"routerId"</span>).stringValue();
00158         <span class="keywordflow">if</span> (!strcmp(routerIdStr, <span class="stringliteral">"auto"</span>))  <span class="comment">// non-"auto" cases already handled in stage 1</span>
00159         {
00160             <span class="comment">// choose highest interface address as routerId</span>
00161             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); ++i)
00162             {
00163                 <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00164                 <span class="keywordflow">if</span> (!ie-&gt;<a class="code" href="class_interface_entry.html#a15">isLoopback</a>() &amp;&amp; ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>().<a class="code" href="class_i_p_address.html#a5">getInt</a>() &gt; <a class="code" href="class_routing_table.html#r2">_routerId</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a>())
00165                     <a class="code" href="class_routing_table.html#r2">_routerId</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>();
00166             }
00167         }
00168     }
00169     <span class="keywordflow">else</span> <span class="comment">// already configured</span>
00170     {
00171         <span class="comment">// if there is no interface with routerId yet, assign it to the loopback address;</span>
00172         <span class="comment">// TODO find out if this is a good practice, in which situations it is useful etc.</span>
00173         <span class="keywordflow">if</span> (<a class="code" href="class_routing_table.html#z40_1">interfaceByAddress</a>(_routerId)==NULL)
00174         {
00175             <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *lo0 = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a10">firstLoopbackInterface</a>();
00176             lo0-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a8">setInetAddress</a>(_routerId);
00177             lo0-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a9">setNetmask</a>(IPAddress::ALLONES_ADDRESS);
00178         }
00179     }
00180 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z40_0" doxytag="RoutingTable::configureInterfaceForIPv4"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::configureInterfaceForIPv4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ie</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00236 {
00237     <a class="code" href="class_i_pv4_interface_data.html">IPv4InterfaceData</a> *d = <span class="keyword">new</span> <a class="code" href="class_i_pv4_interface_data.html">IPv4InterfaceData</a>();
00238     ie-&gt;<a class="code" href="class_interface_entry.html#a37">setIPv4Data</a>(d);
00239 
00240     <span class="comment">// metric: some hints: OSPF cost (2e9/bps value), MS KB article Q299540, ...</span>
00241     d-&gt;<a class="code" href="class_i_pv4_interface_data.html#a10">setMetric</a>((<span class="keywordtype">int</span>)ceil(2e9/ie-&gt;<a class="code" href="class_interface_entry.html#a16">datarate</a>())); <span class="comment">// use OSPF cost as default</span>
00242 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="RoutingTable::configureLoopbackForIPv4"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::configureLoopbackForIPv4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00260 {
00261     <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a10">firstLoopbackInterface</a>();
00262 
00263     <span class="comment">// add IPv4 info. Set 127.0.0.1/8 as address by default --</span>
00264     <span class="comment">// we may reconfigure later it to be the routerId</span>
00265     <a class="code" href="class_i_pv4_interface_data.html">IPv4InterfaceData</a> *d = <span class="keyword">new</span> <a class="code" href="class_i_pv4_interface_data.html">IPv4InterfaceData</a>();
00266     d-&gt;<a class="code" href="class_i_pv4_interface_data.html#a8">setInetAddress</a>(IPAddress::LOOPBACK_ADDRESS);
00267     d-&gt;<a class="code" href="class_i_pv4_interface_data.html#a9">setNetmask</a>(IPAddress::LOOPBACK_NETMASK);
00268     d-&gt;<a class="code" href="class_i_pv4_interface_data.html#a10">setMetric</a>(1);
00269     ie-&gt;<a class="code" href="class_interface_entry.html#a37">setIPv4Data</a>(d);
00270 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z46_4" doxytag="RoutingTable::deleteRoutingEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RoutingTable::deleteRoutingEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the given routes from the routing table. Returns true if the route was deleted correctly, false if it was not in the routing table. <div class="fragment"><pre class="fragment">00420 {
00421     Enter_Method(<span class="stringliteral">"deleteRoutingEntry(...)"</span>);
00422 
00423     RouteVector::iterator i = <a class="code" href="_r_s_v_p___t_e_2_utils_8cc.html#a2">std::find</a>(<a class="code" href="class_routing_table.html#r4">routes</a>.begin(), <a class="code" href="class_routing_table.html#r4">routes</a>.end(), entry);
00424     <span class="keywordflow">if</span> (i!=<a class="code" href="class_routing_table.html#r4">routes</a>.end())
00425     {
00426         <a class="code" href="class_routing_table.html#r4">routes</a>.erase(i);
00427         <span class="keyword">delete</span> entry;
00428         <a class="code" href="class_routing_table.html#b4">updateDisplayString</a>();
00429         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00430     }
00431     i = <a class="code" href="_r_s_v_p___t_e_2_utils_8cc.html#a2">std::find</a>(<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.begin(), <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.end(), entry);
00432     <span class="keywordflow">if</span> (i!=<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.end())
00433     {
00434         <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.erase(i);
00435         <span class="keyword">delete</span> entry;
00436         <a class="code" href="class_routing_table.html#b4">updateDisplayString</a>();
00437         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00438     }
00439     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00440 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z42_1" doxytag="RoutingTable::findBestMatchingRoute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> * RoutingTable::findBestMatchingRoute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The routing function. <div class="fragment"><pre class="fragment">00304 {
00305     <span class="comment">// find best match (one with longest prefix)</span>
00306     <span class="comment">// default route has zero prefix length, so (if exists) it'll be selected as last resort</span>
00307     <a class="code" href="class_routing_entry.html">RoutingEntry</a> *bestRoute = NULL;
00308     <a class="code" href="_i_n_e_t_defs_8h.html#a6">uint32</a> longestNetmask = 0;
00309     <span class="keywordflow">for</span> (RouteVector::iterator i=<a class="code" href="class_routing_table.html#r4">routes</a>.begin(); i!=<a class="code" href="class_routing_table.html#r4">routes</a>.end(); ++i)
00310     {
00311         <a class="code" href="class_routing_entry.html">RoutingEntry</a> *e = *i;
00312         <span class="keywordflow">if</span> (IPAddress::maskedAddrAreEqual(dest, e-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>, e-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>) &amp;&amp;  <span class="comment">// match</span>
00313             (!bestRoute || e-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a>()&gt;longestNetmask))  <span class="comment">// longest so far</span>
00314         {
00315             bestRoute = e;
00316             longestNetmask = e-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a>();
00317         }
00318     }
00319     <span class="keywordflow">return</span> bestRoute;
00320 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z46_2" doxytag="RoutingTable::findRoutingEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> * RoutingTable::findRoutingEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>netmask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>gw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>metric</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dev</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find first routing entry with the given parameters. <div class="fragment"><pre class="fragment">00383 {
00384     <span class="keywordtype">int</span> n = <a class="code" href="class_routing_table.html#z46_0">numRoutingEntries</a>();
00385     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++)
00386         if (routingEntryMatches(routingEntry(i), target, netmask, gw, metric, dev))
00387             return routingEntry(i);
00388     return NULL;
00389 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z42_3" doxytag="RoutingTable::gatewayForDestAddr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a> RoutingTable::gatewayForDestAddr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Convenience function based on <a class="el" href="class_routing_table.html#z42_1">findBestMatchingRoute()</a>.<p>
Returns the gateway to send the destination. Returns null address if the destination is not in routing table or there is no gateway (local delivery). <div class="fragment"><pre class="fragment">00332 {
00333     Enter_Method(<span class="stringliteral">"gatewayForDestAddr(%s)=?"</span>, dest.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00334 
00335     <a class="code" href="class_routing_entry.html">RoutingEntry</a> *e = <a class="code" href="class_routing_table.html#z42_1">findBestMatchingRoute</a>(dest);
00336     <span class="keywordflow">if</span> (!e) return <a class="code" href="class_i_p_address.html">IPAddress</a>();
00337     return e-&gt;gateway;
00338 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z46_5" doxytag="RoutingTable::gatherAddresses"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_i_p_address.html">IPAddress</a> &gt; RoutingTable::gatherAddresses           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Utility function: Returns a vector of all addresses of the node. <div class="fragment"><pre class="fragment">00225 {
00226     std::vector&lt;IPAddress&gt; addressvector;
00227 
00228     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); ++i)
00229         addressvector.push_back(ift-&gt;interfaceAt(i)-&gt;ipv4()-&gt;inetAddress());
00230     return addressvector;
00231 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b7" doxytag="RoutingTable::handleMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::handleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Raises an error. <div class="fragment"><pre class="fragment">00196 {
00197     opp_error(<span class="stringliteral">"This module doesn't process messages"</span>);
00198 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b6" doxytag="RoutingTable::initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>stage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00100 {
00101     <span class="keywordflow">if</span> (stage==0)
00102     {
00103         <span class="comment">// get a pointer to the NotificationBoard module and InterfaceTable</span>
00104         <a class="code" href="class_routing_table.html#r1">nb</a> = <a class="code" href="class_notification_board_access.html">NotificationBoardAccess</a>().get();
00105         <a class="code" href="class_routing_table.html#r0">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().get();
00106 
00107         <a class="code" href="class_routing_table.html#r3">IPForward</a> = par(<span class="stringliteral">"IPForward"</span>).boolValue();
00108 
00109         WATCH_PTRVECTOR(routes);
00110         WATCH_PTRVECTOR(multicastRoutes);
00111         WATCH(IPForward);
00112         WATCH(_routerId);
00113     }
00114     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage==1)
00115     {
00116         <span class="comment">// L2 modules register themselves in stage 0, so we can only configure</span>
00117         <span class="comment">// the interfaces in stage 1.</span>
00118         <span class="keyword">const</span> <span class="keywordtype">char</span> *filename = par(<span class="stringliteral">"routingFile"</span>);
00119 
00120         <span class="comment">// At this point, all L2 modules have registered themselves (added their</span>
00121         <span class="comment">// interface entries). Create the per-interface IPv4 data structures.</span>
00122         <a class="code" href="class_interface_table.html">InterfaceTable</a> *interfaceTable = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().get();
00123         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;interfaceTable-&gt;numInterfaces(); ++i)
00124             configureInterfaceForIPv4(interfaceTable-&gt;interfaceAt(i));
00125         configureLoopbackForIPv4();
00126 
00127         <span class="comment">// read routing table file (and interface configuration)</span>
00128         <a class="code" href="class_routing_table_parser.html">RoutingTableParser</a> parser(ift, this);
00129         if (*filename &amp;&amp; parser.readRoutingTableFromFile(filename)==-1)
00130             error("Error reading routing table file %s", filename);
00131 
00132         <span class="comment">// set routerId if param is not "" (==no routerId) or "auto" (in which case we'll</span>
00133         <span class="comment">// do it later in stage 3, after network configurators configured the interfaces)</span>
00134         const <span class="keywordtype">char</span> *routerIdStr = par("routerId").stringValue();
00135         if (strcmp(routerIdStr, "") &amp;&amp; strcmp(routerIdStr, "auto"))
00136             _routerId = <a class="code" href="class_i_p_address.html">IPAddress</a>(routerIdStr);
00137     }
00138     else if (stage==3)
00139     {
00140         <span class="comment">// routerID selection must be after stage==2 when network autoconfiguration</span>
00141         <span class="comment">// assigns interface addresses</span>
00142         <a class="code" href="class_routing_table.html#b2">autoconfigRouterId</a>();
00143 
00144         <span class="comment">// we don't use notifications during initialize(), so we do it manually.</span>
00145         <span class="comment">// Should be in stage=3 because autoconfigurator runs in stage=2.</span>
00146         <a class="code" href="class_routing_table.html#b3">updateNetmaskRoutes</a>();
00147 
00148         <span class="comment">//printIfconfig();</span>
00149         <span class="comment">//printRoutingTable();</span>
00150     }
00151 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z40_1" doxytag="RoutingTable::interfaceByAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> * RoutingTable::interfaceByAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns an interface given by its address. Returns NULL if not found. <div class="fragment"><pre class="fragment">00245 {
00246     Enter_Method(<span class="stringliteral">"interfaceByAddress(%s)=?"</span>, addr.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00247     <span class="keywordflow">if</span> (addr.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>())
00248         <span class="keywordflow">return</span> NULL;
00249     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); ++i)
00250     {
00251         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00252         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>()==addr)
00253             <span class="keywordflow">return</span> ie;
00254     }
00255     <span class="keywordflow">return</span> NULL;
00256 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z42_2" doxytag="RoutingTable::interfaceForDestAddr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> * RoutingTable::interfaceForDestAddr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Convenience function based on <a class="el" href="class_routing_table.html#z42_1">findBestMatchingRoute()</a>.<p>
Returns the interface Id to send the packets with dest as destination address, or -1 if destination is not in routing table. <div class="fragment"><pre class="fragment">00323 {
00324     Enter_Method(<span class="stringliteral">"interfaceForDestAddr(%s)=?"</span>, dest.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00325 
00326     <a class="code" href="class_routing_entry.html">RoutingEntry</a> *e = <a class="code" href="class_routing_table.html#z42_1">findBestMatchingRoute</a>(dest);
00327     <span class="keywordflow">if</span> (!e) return NULL;
00328     return e-&gt;interfacePtr;
00329 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="RoutingTable::ipForward"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RoutingTable::ipForward           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="class_i_p.html">IP</a> forwarding on/off <div class="fragment"><pre class="fragment">00221 {<span class="keywordflow">return</span> <a class="code" href="class_routing_table.html#r3">IPForward</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z42_0" doxytag="RoutingTable::localDeliver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RoutingTable::localDeliver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if the address is a local one, i.e. one of the host's. <div class="fragment"><pre class="fragment">00275 {
00276     Enter_Method(<span class="stringliteral">"localDeliver(%s) y/n"</span>, dest.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00277 
00278     <span class="comment">// check if we have an interface with this address</span>
00279     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); i++)
00280     {
00281         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00282         <span class="keywordflow">if</span> (dest==ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>())
00283             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00284     }
00285     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00286 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z44_0" doxytag="RoutingTable::multicastLocalDeliver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RoutingTable::multicastLocalDeliver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if the address is in one of the local multicast group address list. <div class="fragment"><pre class="fragment">00289 {
00290     Enter_Method(<span class="stringliteral">"multicastLocalDeliver(%s) y/n"</span>, dest.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00291 
00292     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); i++)
00293     {
00294         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00295         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0; j &lt; ie-&gt;ipv4()-&gt;multicastGroups().size(); j++)
00296             if (dest.equals(ie-&gt;ipv4()-&gt;multicastGroups()[j]))
00297                 return true;
00298     }
00299     return false;
00300 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z44_1" doxytag="RoutingTable::multicastRoutesFor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="_routing_table_8h.html#a0">MulticastRoutes</a> RoutingTable::multicastRoutesFor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dest</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns routes for a multicast address. <div class="fragment"><pre class="fragment">00342 {
00343     Enter_Method(<span class="stringliteral">"multicastRoutesFor(%s)=?"</span>, dest.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str());
00344 
00345     <a class="code" href="_routing_table_8h.html#a0">MulticastRoutes</a> res;
00346     res.reserve(16);
00347     <span class="keywordflow">for</span> (RouteVector::iterator i=<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.begin(); i!=<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.end(); ++i)
00348     {
00349         <a class="code" href="class_routing_entry.html">RoutingEntry</a> *e = *i;
00350         <span class="keywordflow">if</span> (IPAddress::maskedAddrAreEqual(dest, e-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>, e-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>))
00351         {
00352             <a class="code" href="struct_multicast_route.html">MulticastRoute</a> r;
00353             r.<a class="code" href="struct_multicast_route.html#o0">interf</a> = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a9">interfaceByName</a>(e-&gt;<a class="code" href="class_routing_entry.html#o3">interfaceName</a>.c_str()); <span class="comment">// Ughhhh</span>
00354             r.<a class="code" href="struct_multicast_route.html#o1">gateway</a> = e-&gt;<a class="code" href="class_routing_entry.html#o2">gateway</a>;
00355             res.push_back(r);
00356         }
00357     }
00358     <span class="keywordflow">return</span> res;
00359 
00360 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b5" doxytag="RoutingTable::numInitStages"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int RoutingTable::numInitStages           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00187 {<span class="keywordflow">return</span> 4;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z46_0" doxytag="RoutingTable::numRoutingEntries"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int RoutingTable::numRoutingEntries           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Total number of routing entries (unicast, multicast entries and default route). <div class="fragment"><pre class="fragment">00364 {
00365     <span class="keywordflow">return</span> <a class="code" href="class_routing_table.html#r4">routes</a>.size()+<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.size();
00366 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z38_0" doxytag="RoutingTable::printIfconfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::printIfconfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z38_1" doxytag="RoutingTable::printRoutingTable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::printRoutingTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00214 {
00215     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"-- Routing table --\n"</span>;
00216     ev.printf(<span class="stringliteral">"%-16s %-16s %-16s %-3s %s\n"</span>,
00217               <span class="stringliteral">"Destination"</span>, <span class="stringliteral">"Gateway"</span>, <span class="stringliteral">"Netmask"</span>, <span class="stringliteral">"Iface"</span>);
00218 
00219     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table.html#z46_0">numRoutingEntries</a>(); i++)
00220         EV &lt;&lt; routingEntry(i)-&gt;detailedInfo() &lt;&lt; "\n";
00221     EV &lt;&lt; "\n";
00222 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="RoutingTable::receiveChangeNotification"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::receiveChangeNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>cPolymorphic *&nbsp;</td>
          <td class="mdname" nowrap> <em>details</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change of a category occurs to which this client has subscribed. 
<p>
Implements <a class="el" href="class_i_notifiable.html#a1">INotifiable</a>.<div class="fragment"><pre class="fragment">00201 {
00202     Enter_Method_Silent();
00203     <a class="code" href="_notifier_consts_8cc.html#a1">printNotificationBanner</a>(category, details);
00204 
00205     <span class="keywordflow">if</span> (category==NF_IPv4_INTERFACECONFIG_CHANGED)
00206     {
00207         <span class="comment">// if anything IPv4-related changes in the interfaces, interface netmask</span>
00208         <span class="comment">// based routes have to be re-built.</span>
00209         <a class="code" href="class_routing_table.html#b3">updateNetmaskRoutes</a>();
00210     }
00211 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="RoutingTable::routerId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a> RoutingTable::routerId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns routerId. <div class="fragment"><pre class="fragment">00226 {<span class="keywordflow">return</span> <a class="code" href="class_routing_table.html#r2">_routerId</a>;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z46_1" doxytag="RoutingTable::routingEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> * RoutingTable::routingEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>k</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return kth routing entry. <div class="fragment"><pre class="fragment">00369 {
00370     <span class="keywordflow">if</span> (k &lt; (<span class="keywordtype">int</span>)<a class="code" href="class_routing_table.html#r4">routes</a>.size())
00371         <span class="keywordflow">return</span> <a class="code" href="class_routing_table.html#r4">routes</a>[k];
00372     k -= <a class="code" href="class_routing_table.html#r4">routes</a>.size();
00373     <span class="keywordflow">if</span> (k &lt; (<span class="keywordtype">int</span>)<a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.size())
00374         <span class="keywordflow">return</span> <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>[k];
00375     <span class="keywordflow">return</span> NULL;
00376 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="RoutingTable::routingEntryMatches"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RoutingTable::routingEntryMatches           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_entry.html">RoutingEntry</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>nmask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>gw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>metric</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dev</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00449 {
00450     <span class="keywordflow">if</span> (!target.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() &amp;&amp; !target.<a class="code" href="class_i_p_address.html#a2">equals</a>(entry-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>))
00451         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00452     <span class="keywordflow">if</span> (!nmask.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() &amp;&amp; !nmask.<a class="code" href="class_i_p_address.html#a2">equals</a>(entry-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>))
00453         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00454     <span class="keywordflow">if</span> (!gw.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>() &amp;&amp; !gw.<a class="code" href="class_i_p_address.html#a2">equals</a>(entry-&gt;<a class="code" href="class_routing_entry.html#o2">gateway</a>))
00455         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00456     <span class="keywordflow">if</span> (metric &amp;&amp; metric!=entry-&gt;<a class="code" href="class_routing_entry.html#o7">metric</a>)
00457         return false;
00458     if (dev &amp;&amp; strcmp(dev, entry-&gt;interfaceName.c_str()))
00459         return false;
00460 
00461     return true;
00462 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="RoutingTable::setRouterId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::setRouterId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>a</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets routerId. <div class="fragment"><pre class="fragment">00231 {<a class="code" href="class_routing_table.html#r2">_routerId</a> = a;}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="RoutingTable::updateDisplayString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::updateDisplayString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00183 {
00184     <span class="keywordflow">if</span> (!ev.isGUI())
00185         <span class="keywordflow">return</span>;
00186 
00187     <span class="keywordtype">char</span> buf[80];
00188     <span class="keywordflow">if</span> (<a class="code" href="class_routing_table.html#r2">_routerId</a>.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>())
00189         sprintf(buf, <span class="stringliteral">"%d+%d routes"</span>, <a class="code" href="class_routing_table.html#r4">routes</a>.size(), <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.size());
00190     <span class="keywordflow">else</span>
00191         sprintf(buf, <span class="stringliteral">"routerId: %s\n%d+%d routes"</span>, <a class="code" href="class_routing_table.html#r2">_routerId</a>.<a class="code" href="class_i_p_address.html#a4">str</a>().c_str(), <a class="code" href="class_routing_table.html#r4">routes</a>.size(), <a class="code" href="class_routing_table.html#r5">multicastRoutes</a>.size());
00192     displayString().setTagArg(<span class="stringliteral">"t"</span>,0,buf);
00193 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="RoutingTable::updateNetmaskRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RoutingTable::updateNetmaskRoutes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00465 {
00466     <span class="comment">// first, delete all routes with src=IFACENETMASK</span>
00467     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="class_routing_table.html#r4">routes</a>.size(); k++)
00468         <span class="keywordflow">if</span> (routes[k]-&gt;source==RoutingEntry::IFACENETMASK)
00469             routes.erase(routes.begin()+(k--));  <span class="comment">// '--' is necessary because indices shift down</span>
00470 
00471     <span class="comment">// then re-add them, according to actual interface configuration</span>
00472     for (<span class="keywordtype">int</span> i=0; i&lt;ift-&gt;numInterfaces(); i++)
00473     {
00474         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table.html#r0">ift</a>-&gt;<a class="code" href="class_interface_table.html#a5">interfaceAt</a>(i);
00475         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a5">netmask</a>()!=<a class="code" href="class_i_p_address.html#z27_3">IPAddress::ALLONES_ADDRESS</a>)
00476         {
00477             <a class="code" href="class_routing_entry.html">RoutingEntry</a> *route = <span class="keyword">new</span> <a class="code" href="class_routing_entry.html">RoutingEntry</a>();
00478             route-&gt;<a class="code" href="class_routing_entry.html#o5">type</a> = <a class="code" href="class_routing_entry.html#w8w0">RoutingEntry::DIRECT</a>;
00479             route-&gt;<a class="code" href="class_routing_entry.html#o6">source</a> = <a class="code" href="class_routing_entry.html#w9w3">RoutingEntry::IFACENETMASK</a>;
00480             route-&gt;<a class="code" href="class_routing_entry.html#o0">host</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a4">inetAddress</a>();
00481             route-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a5">netmask</a>();
00482             route-&gt;<a class="code" href="class_routing_entry.html#o2">gateway</a> = <a class="code" href="class_i_p_address.html">IPAddress</a>();
00483             route-&gt;<a class="code" href="class_routing_entry.html#o7">metric</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a33">ipv4</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#a6">metric</a>();
00484             route-&gt;<a class="code" href="class_routing_entry.html#o3">interfaceName</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a5">name</a>();
00485             route-&gt;<a class="code" href="class_routing_entry.html#o4">interfacePtr</a> = ie;
00486             <a class="code" href="class_routing_table.html#r4">routes</a>.push_back(route);
00487         }
00488     }
00489 
00490     <a class="code" href="class_routing_table.html#b4">updateDisplayString</a>();
00491 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r2" doxytag="RoutingTable::_routerId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a> <a class="el" href="class_routing_table.html#r2">RoutingTable::_routerId</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="RoutingTable::ift"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_interface_table.html">InterfaceTable</a>* <a class="el" href="class_routing_table.html#r0">RoutingTable::ift</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="RoutingTable::IPForward"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="class_routing_table.html#r3">RoutingTable::IPForward</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="RoutingTable::multicastRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_table.html#y0">RouteVector</a> <a class="el" href="class_routing_table.html#r5">RoutingTable::multicastRoutes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="RoutingTable::nb"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_routing_table.html#r1">RoutingTable::nb</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="RoutingTable::routes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_routing_table.html#y0">RouteVector</a> <a class="el" href="class_routing_table.html#r4">RoutingTable::routes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_routing_table_8h.html">RoutingTable.h</a><li><a class="el" href="_routing_table_8cc.html">RoutingTable.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:28 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
