<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>INET Framework for OMNeT++/OMNEST: OSPF::Router Class Reference</title>
<link href="opp.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="namespace_o_s_p_f.html">OSPF</a>::<a class="el" href="class_o_s_p_f_1_1_router.html">Router</a></div>
<h1>OSPF::Router Class Reference</h1><code>#include &lt;OSPFRouter.h&gt;</code>
<p>
<a href="class_o_s_p_f_1_1_router-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Represents the full <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure as laid out in RFC2328. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a0">Router</a> (<a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a> id, cSimpleModule *containingModule)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a1">~Router</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a2">SetRouterID</a> (<a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a> id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a3">GetRouterID</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a4">SetRFC1583Compatibility</a> (bool compatibility)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a5">GetRFC1583Compatibility</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a6">GetAreaCount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a7">GetMessageHandler</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a8">GetASExternalLSACount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a9">GetASExternalLSA</a> (unsigned long i)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a10">GetASExternalLSA</a> (unsigned long i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a11">GetASBoundaryRouter</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a12">GetRoutingTableEntryCount</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a13">GetRoutingTableEntry</a> (unsigned long i)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a14">GetRoutingTableEntry</a> (unsigned long i) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a15">AddRoutingTableEntry</a> (<a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *entry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a16">AddWatches</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a17">AddArea</a> (<a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> *area)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a18">GetArea</a> (<a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> areaID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a19">GetArea</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> address)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a20">GetNonVirtualInterface</a> (unsigned char ifIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a21">InstallLSA</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *lsa, <a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> areaID=<a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a22">FindLSA</a> (<a class="el" href="_o_s_p_f_packet__m_8h.html#a54">LSAType</a> lsaType, <a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey, <a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> areaID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a23">AgeDatabase</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a24">AnyNeighborInStates</a> (int states) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a25">RemoveFromAllRetransmissionLists</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a26">IsOnAnyRetransmissionList</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *lsa, <a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a> areaID=<a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a>, <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf=NULL, <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *neighbor=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a28">IsLocalAddress</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> address) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a29">HasAddressRange</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> addressRange) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a30">DestinationIsUnreachable</a> (<a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *lsa) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a31">Lookup</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> destination, std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; *table=NULL) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a32">RebuildRoutingTable</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a33">GetContainingAddressRange</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> addressRange, bool *advertise=NULL) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a34">UpdateExternalRoute</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> networkAddress, const <a class="el" href="class_o_s_p_f_a_s_external_l_s_a_contents.html">OSPFASExternalLSAContents</a> &amp;externalRouteContents, int ifIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a35">RemoveExternalRoute</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a> networkAddress)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#a36">GetPreferredEntry</a> (const <a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> &amp;lsa, bool skipSelfOriginated, std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; *fromRoutingTable=NULL)</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d0">InstallASExternalLSA</a> (<a class="el" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a> *lsa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d1">FindASExternalLSA</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d2">FindASExternalLSA</a> (<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a> lsaKey) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d3">OriginateASExternalLSA</a> (<a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *lsa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">LinkStateID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d4">GetUniqueLinkStateID</a> (<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">IPv4AddressRange</a> destination, <a class="el" href="namespace_o_s_p_f.html#a0">Metric</a> destinationCost, <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> *&amp;lsaToReoriginate, bool externalMetricIsType2=false) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d5">CalculateASExternalRoutes</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;newRoutingTable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d6">NotifyAboutRoutingTableChanges</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;oldRoutingTable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d7">HasRouteToASBoundaryRouter</a> (const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;inRoutingTable, <a class="el" href="namespace_o_s_p_f.html#a1">OSPF::RouterID</a> <a class="el" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d8">GetRoutesToASBoundaryRouter</a> (const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;fromRoutingTable, <a class="el" href="namespace_o_s_p_f.html#a1">OSPF::RouterID</a> <a class="el" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d9">PruneASBoundaryRouterEntries</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;asbrEntries) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#d10">SelectLeastCostRoutingEntry</a> (std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;entries) const </td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r0">routerID</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The router ID assigned by the <a class="el" href="class_i_p.html">IP</a> layer.  <a href="#r0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>, <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A map of the contained areas with the AreaID as key.  <a href="#r1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r2">areas</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A list of the contained areas.  <a href="#r2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> *,<br>
 <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A map of the ASExternalLSAs advertised by this router.  <a href="#r3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A list of the ASExternalLSAs advertised by this router.  <a href="#r4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::map&lt; <a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>, <a class="el" href="class_o_s_p_f_a_s_external_l_s_a_contents.html">OSPFASExternalLSAContents</a>,<br>
 <a class="el" href="class_o_s_p_f_1_1_i_pv4_address___less.html">IPv4Address_Less</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A map of the external route advertised by this router.  <a href="#r5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Database age timer - fires every second.  <a href="#r6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <a class="el" href="namespace_o_s_p_f.html">OSPF</a> routing table - contains more information than the one in the <a class="el" href="class_i_p.html">IP</a> layer.  <a href="#r7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The message dispatcher class.  <a href="#r8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_router.html#r9">rfc1583Compatibility</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decides whether to handle the preferred routing table entry to an AS boundary router as defined in RFC1583 or not.  <a href="#r9"></a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="OSPF::Router::Router"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OSPF::Router::Router           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">OSPF::RouterID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>cSimpleModule *&nbsp;</td>
          <td class="mdname" nowrap> <em>containingModule</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. Initializes internal variables, adds a <a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a> and starts the Database Age timer. <div class="fragment"><pre class="fragment">00011                                                                     :
00012     <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a> (<span class="keywordtype">id</span>),
00013     <a class="code" href="class_o_s_p_f_1_1_router.html#r9">rfc1583Compatibility</a> (<span class="keyword">false</span>)
00014 {
00015     <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a> = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_message_handler.html">OSPF::MessageHandler</a> (<span class="keyword">this</span>, containingModule);
00016     <a class="code" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a> = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_timer.html">OSPFTimer</a>;
00017     <a class="code" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a>-&gt;<a class="code" href="class_o_s_p_f_timer.html#a8">setTimerKind</a> (DatabaseAgeTimer);
00018     <a class="code" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a>-&gt;setContextPointer (<span class="keyword">this</span>);
00019     <a class="code" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a>-&gt;setName (<span class="stringliteral">"OSPF::Router::DatabaseAgeTimer"</span>);
00020     <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a>-&gt;StartTimer (ageTimer, 1.0);
00021 }

</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="OSPF::Router::~Router"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OSPF::Router::~<a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. Clears all LSA lists and kills the Database Age timer. <div class="fragment"><pre class="fragment">00029 {
00030     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00031     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00032         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i];
00033     }
00034     <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.size ();
00035     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> j = 0; j &lt; lsaCount; j++) {
00036         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[j];
00037     }
00038     <span class="keywordtype">long</span> routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
00039     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> k = 0; k &lt; routeCount; k++) {
00040         <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[k];
00041     }
00042     <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a>-&gt;ClearTimer (ageTimer);
00043     <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r6">ageTimer</a>;
00044     <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a>;
00045 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a17" doxytag="OSPF::Router::AddArea"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::AddArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>area</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a new <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> to the <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> list. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>area</em>&nbsp;</td><td>[in] The <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> to add. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00064 {
00065 
00066     area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a17">SetRouter</a> (<span class="keyword">this</span>);
00067     <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>[area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a3">GetAreaID</a> ()] = area;
00068     <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.push_back (area);
00069 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="OSPF::Router::AddRoutingTableEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::AddRoutingTableEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00053 { <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.push_back (entry); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="OSPF::Router::AddWatches"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::AddWatches           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds OMNeT++ watches for the routerID, the list of Areas and the list of AS External LSAs. <div class="fragment"><pre class="fragment">00052 {
00053     WATCH (routerID);
00054     WATCH_PTRVECTOR (areas);
00055     WATCH_PTRVECTOR (asExternalLSAs);
00056 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="OSPF::Router::AgeDatabase"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::AgeDatabase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ages the LSAs in the Router's database. This method is called on every firing of the DatabaseAgeTimer (every second). <dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 14. </dd></dl>
<div class="fragment"><pre class="fragment">00348 {
00349     <span class="keywordtype">long</span> lsaCount            = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.size ();
00350     <span class="keywordtype">bool</span> rebuildRoutingTable = <span class="keyword">false</span>;
00351 
00352     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; lsaCount; i++) {
00353         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>       lsAge          = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i]-&gt;getHeader ().getLsAge ();
00354         <span class="keywordtype">bool</span>                 selfOriginated = (<a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i]-&gt;getHeader ().getAdvertisingRouter ().getInt () == <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>);
00355         <span class="keywordtype">bool</span>                 unreachable    = <a class="code" href="class_o_s_p_f_1_1_router.html#a30">DestinationIsUnreachable</a> (asExternalLSAs[i]);
00356         <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* lsa            = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i];
00357 
00358         <span class="keywordflow">if</span> ((selfOriginated &amp;&amp; (lsAge &lt; (LS_REFRESH_TIME - 1))) || (!selfOriginated &amp;&amp; (lsAge &lt; (MAX_AGE - 1)))) {
00359             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (lsAge + 1);
00360             <span class="keywordflow">if</span> ((lsAge + 1) % CHECK_AGE == 0) {
00361                 <span class="keywordflow">if</span> (!lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html#a6">ValidateLSChecksum</a> ()) {
00362                     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Invalid LS checksum. Memory error detected!\n"</span>;
00363                 }
00364             }
00365             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00366         }
00367         <span class="keywordflow">if</span> (selfOriginated &amp;&amp; (lsAge == (LS_REFRESH_TIME - 1))) {
00368             <span class="keywordflow">if</span> (unreachable) {
00369                 lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00370                 <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsa, OSPF::BackboneAreaID);
00371                 lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00372             } <span class="keywordflow">else</span> {
00373                 <span class="keywordtype">long</span> sequenceNumber = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00374                 <span class="keywordflow">if</span> (sequenceNumber == MAX_SEQUENCE_NUMBER) {
00375                     lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00376                     <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsa, OSPF::BackboneAreaID);
00377                     lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00378                 } <span class="keywordflow">else</span> {
00379                     <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* newLSA = <a class="code" href="class_o_s_p_f_1_1_router.html#d3">OriginateASExternalLSA</a> (lsa);
00380 
00381                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (sequenceNumber + 1);
00382                     newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00383                     rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html#a7">Update</a> (newLSA);
00384                     <span class="keyword">delete</span> newLSA;
00385 
00386                     <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsa, OSPF::BackboneAreaID);
00387                 }
00388             }
00389         }
00390         <span class="keywordflow">if</span> (!selfOriginated &amp;&amp; (lsAge == MAX_AGE - 1)) {
00391             lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
00392             <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsa, OSPF::BackboneAreaID);
00393             lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a4">IncrementInstallTime</a> ();
00394         }
00395         <span class="keywordflow">if</span> (lsAge == MAX_AGE) {
00396             <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00397 
00398             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00399             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00400 
00401             <span class="keywordflow">if</span> (!IsOnAnyRetransmissionList (lsaKey) &amp;&amp;
00402                 !AnyNeighborInStates (OSPF::Neighbor::ExchangeState | OSPF::Neighbor::LoadingState))
00403             {
00404                 <span class="keywordflow">if</span> (!selfOriginated || unreachable) {
00405                     <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.erase (lsaKey);
00406                     <span class="keyword">delete</span> lsa;
00407                     <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i] = NULL;
00408                     rebuildRoutingTable = <span class="keyword">true</span>;
00409                 } <span class="keywordflow">else</span> {
00410                     <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html#a4">GetPurgeable</a> ()) {
00411                         <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.erase (lsaKey);
00412                         <span class="keyword">delete</span> lsa;
00413                         <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i] = NULL;
00414                         rebuildRoutingTable = <span class="keyword">true</span>;
00415                     } <span class="keywordflow">else</span> {
00416                         <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* newLSA              = <a class="code" href="class_o_s_p_f_1_1_router.html#d3">OriginateASExternalLSA</a> (lsa);
00417                         <span class="keywordtype">long</span>                 sequenceNumber      = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
00418 
00419                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
00420                         newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
00421                         rebuildRoutingTable |= lsa-&gt;<a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html#a7">Update</a> (newLSA);
00422                         <span class="keyword">delete</span> newLSA;
00423 
00424                         <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsa, OSPF::BackboneAreaID);
00425                     }
00426                 }
00427             }
00428         }
00429     }
00430 
00431     std::vector&lt;ASExternalLSA*&gt;::iterator it = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.begin ();
00432     <span class="keywordflow">while</span> (it != <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.end ()) {
00433         <span class="keywordflow">if</span> ((*it) == NULL) {
00434             it = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.erase (it);
00435         } <span class="keywordflow">else</span> {
00436             it++;
00437         }
00438     }
00439 
00440     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00441     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> j = 0; j &lt; areaCount; j++) {
00442         <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[j]-&gt;AgeDatabase ();
00443     }
00444     <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a>-&gt;StartTimer (ageTimer, 1.0);
00445 
00446     <span class="keywordflow">if</span> (rebuildRoutingTable) {
00447         <a class="code" href="class_o_s_p_f_1_1_router.html#a32">RebuildRoutingTable</a> ();
00448     }
00449 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="OSPF::Router::AnyNeighborInStates"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::AnyNeighborInStates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>states</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if any <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> on any <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> in any of the Router's Areas is in any of the input states, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>states</em>&nbsp;</td><td>[in] A bitfield combination of NeighborStateType values. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00458 {
00459     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00460     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00461         <span class="keywordflow">if</span> (areas[i]-&gt;AnyNeighborInStates (states)) {
00462             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00463         }
00464     }
00465     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00466 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="OSPF::Router::CalculateASExternalRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::CalculateASExternalRoutes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>newRoutingTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculate the AS External Routes from the ASExternalLSAs in the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>newRoutingTable</em>&nbsp;</td><td>[in/out] Push the new RoutingTableEntries into this routing table, and also use this for path calculations. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 16.4. </dd></dl>
<div class="fragment"><pre class="fragment">01079 {
01080     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lsaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.size ();
01081     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;
01082 
01083     <span class="keywordflow">for</span> (i = 0; i &lt; lsaCount; i++) {
01084         <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* currentLSA        = <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i];
01085         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;       currentHeader     = currentLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01086         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>       externalCost      = currentLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a11">getRouteCost</a> ();
01087         OSPF::RouterID       originatingRouter = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01088 
01089         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* preferredEntry = <a class="code" href="class_o_s_p_f_1_1_router.html#a36">GetPreferredEntry</a> (*currentLSA, <span class="keyword">true</span>, &amp;newRoutingTable);
01090         <span class="keywordflow">if</span> (preferredEntry == NULL) {
01091             <span class="keywordflow">continue</span>;
01092         }
01093 
01094         <a class="code" href="class_i_p_address.html">IPAddress</a> destination = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; currentLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01095 
01096         <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a>                   preferredCost    = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
01097         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* destinationEntry = <a class="code" href="class_o_s_p_f_1_1_router.html#a31">Lookup</a> (destination, &amp;newRoutingTable);   <span class="comment">// (5)</span>
01098         <span class="keywordflow">if</span> (destinationEntry == NULL) {
01099             <span class="keywordtype">bool</span>                     type2ExternalMetric = currentLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a9">getE_ExternalMetricType</a> ();
01100             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>             nextHopCount        = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a25">GetNextHopCount</a> ();
01101             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* newEntry            = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
01102 
01103             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (destination);
01104             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (currentLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01105             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> ());
01106             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (type2ExternalMetric ? OSPF::RoutingTableEntry::Type2External : OSPF::RoutingTableEntry::Type1External);
01107             <span class="keywordflow">if</span> (type2ExternalMetric) {
01108                 newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (preferredCost);
01109                 newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a19">SetType2Cost</a> (externalCost);
01110             } <span class="keywordflow">else</span> {
01111                 newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (preferredCost + externalCost);
01112             }
01113             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
01114             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
01115             newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a21">SetLinkStateOrigin</a> (currentLSA);
01116 
01117             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; nextHopCount; j++) {
01118                 NextHop nextHop = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j);
01119 
01120                 nextHop.advertisingRouter = originatingRouter;
01121                 newEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (nextHop);
01122             }
01123 
01124             newRoutingTable.push_back (newEntry);
01125         } <span class="keywordflow">else</span> {
01126             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5">OSPF::RoutingTableEntry::RoutingPathType</a> destinationPathType = destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> ();
01127             <span class="keywordtype">bool</span>                                     type2ExternalMetric = currentLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a9">getE_ExternalMetricType</a> ();
01128             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                             nextHopCount        = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a25">GetNextHopCount</a> ();
01129 
01130             <span class="keywordflow">if</span> ((destinationPathType == OSPF::RoutingTableEntry::IntraArea) ||
01131                 (destinationPathType == OSPF::RoutingTableEntry::InterArea))   <span class="comment">// (6) (a)</span>
01132             {
01133                 <span class="keywordflow">continue</span>;
01134             }
01135 
01136             <span class="keywordflow">if</span> (((destinationPathType == OSPF::RoutingTableEntry::Type1External) &amp;&amp;
01137                  (type2ExternalMetric)) ||
01138                 ((destinationPathType == OSPF::RoutingTableEntry::Type2External) &amp;&amp;
01139                  (type2ExternalMetric) &amp;&amp;
01140                  (destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a20">GetType2Cost</a> () &lt; externalCost))) <span class="comment">// (6) (b)</span>
01141             {
01142                 <span class="keywordflow">continue</span>;
01143             }
01144 
01145             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* destinationPreferredEntry = <a class="code" href="class_o_s_p_f_1_1_router.html#a36">GetPreferredEntry</a> (*(destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a22">GetLinkStateOrigin</a> ()), <span class="keyword">false</span>, &amp;newRoutingTable);
01146             <span class="keywordflow">if</span> ((!rfc1583Compatibility) &amp;&amp;
01147                 (destinationPreferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) &amp;&amp;
01148                 (destinationPreferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () != OSPF::BackboneAreaID) &amp;&amp;
01149                 ((preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () != <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) ||
01150                  (preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () == OSPF::BackboneAreaID)))
01151             {
01152                 <span class="keywordflow">continue</span>;
01153             }
01154 
01155             <span class="keywordflow">if</span> ((((destinationPathType == OSPF::RoutingTableEntry::Type1External) &amp;&amp;
01156                   (!type2ExternalMetric) &amp;&amp;
01157                   (destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &lt; preferredCost + externalCost))) ||
01158                 ((destinationPathType == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w4">OSPF::RoutingTableEntry::Type2External</a>) &amp;&amp;
01159                  (type2ExternalMetric) &amp;&amp;
01160                  (destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a20">GetType2Cost</a> () == externalCost) &amp;&amp;
01161                  (destinationPreferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () &lt; preferredCost)))
01162             {
01163                 <span class="keywordflow">continue</span>;
01164             }
01165 
01166             <span class="keywordflow">if</span> (((destinationPathType == OSPF::RoutingTableEntry::Type1External) &amp;&amp;
01167                  (!type2ExternalMetric) &amp;&amp;
01168                  (destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () == (preferredCost + externalCost))) ||
01169                 ((destinationPathType == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w4">OSPF::RoutingTableEntry::Type2External</a>) &amp;&amp;
01170                  (type2ExternalMetric) &amp;&amp;
01171                  (destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a20">GetType2Cost</a> () == externalCost) &amp;&amp;
01172                  (destinationPreferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> () == preferredCost)))   <span class="comment">// equal cost</span>
01173             {
01174                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; nextHopCount; j++) {
01175                     <span class="comment">// TODO: merge next hops, not add</span>
01176                     NextHop nextHop = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j);
01177 
01178                     nextHop.advertisingRouter = originatingRouter;
01179                     destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (nextHop);
01180                 }
01181                 <span class="keywordflow">continue</span>;
01182             }
01183 
01184             <span class="comment">// LSA is better</span>
01185             destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> ());
01186             destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (type2ExternalMetric ? OSPF::RoutingTableEntry::Type2External : OSPF::RoutingTableEntry::Type1External);
01187             <span class="keywordflow">if</span> (type2ExternalMetric) {
01188                 destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (preferredCost);
01189                 destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a19">SetType2Cost</a> (externalCost);
01190             } <span class="keywordflow">else</span> {
01191                 destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a17">SetCost</a> (preferredCost + externalCost);
01192             }
01193             destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
01194             destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a11">SetOptionalCapabilities</a> (currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a8">getLsOptions</a> ());
01195             destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a24">ClearNextHops</a> ();
01196 
01197             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; nextHopCount; j++) {
01198                 NextHop nextHop = preferredEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a26">GetNextHop</a> (j);
01199 
01200                 nextHop.advertisingRouter = originatingRouter;
01201                 destinationEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a23">AddNextHop</a> (nextHop);
01202             }
01203         }
01204     }
01205 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="OSPF::Router::DestinationIsUnreachable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::DestinationIsUnreachable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the destination described by the input lsa is in the routing table, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA which describes the destination to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00596 {
00597     <a class="code" href="class_i_p_address.html">IPAddress</a> destination = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00598 
00599     <a class="code" href="class_o_s_p_f_router_l_s_a.html">OSPFRouterLSA</a>* routerLSA         = dynamic_cast&lt;OSPFRouterLSA*&gt; (lsa);
00600     <a class="code" href="class_o_s_p_f_network_l_s_a.html">OSPFNetworkLSA</a>* networkLSA       = dynamic_cast&lt;OSPFNetworkLSA*&gt; (lsa);
00601     <a class="code" href="class_o_s_p_f_summary_l_s_a.html">OSPFSummaryLSA</a>* summaryLSA       = dynamic_cast&lt;OSPFSummaryLSA*&gt; (lsa);
00602     <a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a>* asExternalLSA = dynamic_cast&lt;OSPFASExternalLSA*&gt; (lsa);
00603     <span class="comment">// TODO: verify</span>
00604     <span class="keywordflow">if</span> (routerLSA != NULL) {
00605         <a class="code" href="class_o_s_p_f_1_1_routing_info.html">OSPF::RoutingInfo</a>* routingInfo = check_and_cast&lt;OSPF::RoutingInfo*&gt; (routerLSA);
00606         <span class="keywordflow">if</span> (routerLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () == <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>) { <span class="comment">// this is spfTreeRoot</span>
00607             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00608         }
00609 
00610         <span class="comment">// get the interface address pointing backwards on the shortest path tree</span>
00611         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     linkCount   = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a15">getLinksArraySize</a> ();
00612         <a class="code" href="class_o_s_p_f_1_1_router_l_s_a.html">OSPF::RouterLSA</a>* toRouterLSA = dynamic_cast&lt;OSPF::RouterLSA*&gt; (routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a10">GetParent</a> ());
00613         <span class="keywordflow">if</span> (toRouterLSA != NULL) {
00614             <span class="keywordtype">bool</span>      destinationFound           = <span class="keyword">false</span>;
00615             <span class="keywordtype">bool</span>      unnumberedPointToPointLink = <span class="keyword">false</span>;
00616             <a class="code" href="class_i_p_address.html">IPAddress</a> firstNumberedIfAddress;
00617 
00618             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; linkCount; i++) {
00619                 <a class="code" href="class_link.html">Link</a>&amp; link = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
00620 
00621                 <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a11">PointToPointLink</a>) {
00622                     <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == toRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) {
00623                         <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a9">getLinkData</a> () &amp; 0xFF000000) == 0) {
00624                             unnumberedPointToPointLink = <span class="keyword">true</span>;
00625                             <span class="keywordflow">if</span> (!firstNumberedIfAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a> ()) {
00626                                 <span class="keywordflow">break</span>;
00627                             }
00628                         } <span class="keywordflow">else</span> {
00629                             destination = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00630                             destinationFound = <span class="keyword">true</span>;
00631                             <span class="keywordflow">break</span>;
00632                         }
00633                     } <span class="keywordflow">else</span> {
00634                         <span class="keywordflow">if</span> (((link.<a class="code" href="class_link.html#a9">getLinkData</a> () &amp; 0xFF000000) != 0) &amp;&amp;
00635                              firstNumberedIfAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a> ())
00636                         {
00637                             firstNumberedIfAddress = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00638                         }
00639                     }
00640                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>) {
00641                     <span class="keywordflow">if</span> (firstNumberedIfAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a> ()) {
00642                         firstNumberedIfAddress = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00643                     }
00644                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a14">VirtualLink</a>) {
00645                     <span class="keywordflow">if</span> (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == toRouterLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()) {
00646                         destination = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00647                         destinationFound = <span class="keyword">true</span>;
00648                         <span class="keywordflow">break</span>;
00649                     } <span class="keywordflow">else</span> {
00650                         <span class="keywordflow">if</span> (firstNumberedIfAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a> ()) {
00651                             firstNumberedIfAddress = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00652                         }
00653                     }
00654                 }
00655                 <span class="comment">// There's no way to get an interface address for the router from a StubLink</span>
00656             }
00657             <span class="keywordflow">if</span> (unnumberedPointToPointLink) {
00658                 <span class="keywordflow">if</span> (!firstNumberedIfAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a> ()) {
00659                     destination = firstNumberedIfAddress;
00660                 } <span class="keywordflow">else</span> {
00661                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00662                 }
00663             }
00664             <span class="keywordflow">if</span> (!destinationFound) {
00665                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00666             }
00667         } <span class="keywordflow">else</span> {
00668             <a class="code" href="class_o_s_p_f_1_1_network_l_s_a.html">OSPF::NetworkLSA</a>* toNetworkLSA = dynamic_cast&lt;OSPF::NetworkLSA*&gt; (routingInfo-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_info.html#a10">GetParent</a> ());
00669             <span class="keywordflow">if</span> (toNetworkLSA != NULL) {
00670                 <span class="comment">// get the interface address pointing backwards on the shortest path tree</span>
00671                 <span class="keywordtype">bool</span> destinationFound = <span class="keyword">false</span>;
00672                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; linkCount; i++) {
00673                     <a class="code" href="class_link.html">Link</a>&amp; link = routerLSA-&gt;<a class="code" href="class_o_s_p_f_router_l_s_a.html#a16">getLinks</a> (i);
00674 
00675                     <span class="keywordflow">if</span> ((link.<a class="code" href="class_link.html#a11">getType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a55a12">TransitLink</a>) &amp;&amp;
00676                         (link.<a class="code" href="class_link.html#a6">getLinkID</a> () == toNetworkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ()))
00677                     {
00678                         destination = link.<a class="code" href="class_link.html#a9">getLinkData</a> ();
00679                         destinationFound = <span class="keyword">true</span>;
00680                         <span class="keywordflow">break</span>;
00681                     }
00682                 }
00683                 <span class="keywordflow">if</span> (!destinationFound) {
00684                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00685                 }
00686             } <span class="keywordflow">else</span> {
00687                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00688             }
00689         }
00690     }
00691     <span class="keywordflow">if</span> (networkLSA != NULL) {
00692         destination = networkLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; networkLSA-&gt;<a class="code" href="class_o_s_p_f_network_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00693     }
00694     <span class="keywordflow">if</span> ((summaryLSA != NULL) &amp;&amp; (summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>)) {
00695         destination = summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00696     }
00697     <span class="keywordflow">if</span> (asExternalLSA != NULL) {
00698         destination = asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> () &amp; asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00699     }
00700 
00701     <span class="keywordflow">if</span> (Lookup (destination) == NULL) {
00702         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00703     } <span class="keywordflow">else</span> {
00704         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00705     }
00706 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="OSPF::Router::FindASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> * OSPF::Router::FindASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the AS External LSA identified by the input lsaKey in the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsaKey</em>&nbsp;</td><td>[in] Look for the AS External LSA which is identified by this key. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The const pointer to the AS External LSA if it was found, NULL otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00332 {
00333     std::map&lt;OSPF::LSAKeyType, OSPF::ASExternalLSA*, OSPF::LSAKeyType_Less&gt;::const_iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.find (lsaKey);
00334     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.end ()) {
00335         <span class="keywordflow">return</span> lsaIt-&gt;second;
00336     } <span class="keywordflow">else</span> {
00337         <span class="keywordflow">return</span> NULL;
00338     }
00339 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="OSPF::Router::FindASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> * OSPF::Router::FindASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the AS External LSA identified by the input lsaKey in the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsaKey</em>&nbsp;</td><td>[in] Look for the AS External LSA which is identified by this key. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The pointer to the AS External LSA if it was found, NULL otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00316 {
00317     std::map&lt;OSPF::LSAKeyType, OSPF::ASExternalLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.find (lsaKey);
00318     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.end ()) {
00319         <span class="keywordflow">return</span> lsaIt-&gt;second;
00320     } <span class="keywordflow">else</span> {
00321         <span class="keywordflow">return</span> NULL;
00322     }
00323 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="OSPF::Router::FindLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> * OSPF::Router::FindLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="_o_s_p_f_packet__m_8h.html#a54">LSAType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lsaType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lsaKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a2">OSPF::AreaID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>areaID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the LSA identified by the input lsaKey in the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsaType</em>&nbsp;</td><td>[in] Look for an LSA of this type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lsaKey</em>&nbsp;</td><td>[in] Look for the LSA which is identified by this key. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>areaID</em>&nbsp;</td><td>[in] In case of <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>, Network and Summary LSAs, look in the Area's database identified by this parameter. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The pointer to the LSA if it was found, NULL otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00270 {
00271     <span class="keywordflow">switch</span> (lsaType) {
00272         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a6">RouterLSAType</a>:
00273             {
00274                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00275                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00276                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;FindRouterLSA (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>);
00277                 }
00278             }
00279             <span class="keywordflow">break</span>;
00280         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a7">NetworkLSAType</a>:
00281             {
00282                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00283                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00284                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;FindNetworkLSA (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>);
00285                 }
00286             }
00287             <span class="keywordflow">break</span>;
00288         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>:
00289         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a9">SummaryLSA_ASBoundaryRoutersType</a>:
00290             {
00291                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00292                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00293                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;FindSummaryLSA (lsaKey);
00294                 }
00295             }
00296             <span class="keywordflow">break</span>;
00297         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a10">ASExternalLSAType</a>:
00298             {
00299                 <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#d1">FindASExternalLSA</a> (lsaKey);
00300             }
00301             <span class="keywordflow">break</span>;
00302         <span class="keywordflow">default</span>:
00303             ASSERT (<span class="keyword">false</span>);
00304             <span class="keywordflow">break</span>;
00305     }
00306     <span class="keywordflow">return</span> NULL;
00307 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="OSPF::Router::FloodLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::FloodLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a2">OSPF::AreaID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>areaID</em> = <code><a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a></code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>intf</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>neighbor</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Floods out the input lsa on a set of Interfaces. <dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 13.3. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA to be flooded out. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>areaID</em>&nbsp;</td><td>[in] If the lsa is a <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>, Network or Summary LSA, then flood it only in this <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>intf</em>&nbsp;</td><td>[in] The <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> this LSA arrived on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>neighbor</em>&nbsp;</td><td>[in] The Nieghbor this LSA arrived from. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if the LSA was floooded back out on the receiving <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a>, false otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00510 {
00511     <span class="keywordtype">bool</span> floodedBackOut = <span class="keyword">false</span>;
00512 
00513     <span class="keywordflow">if</span> (lsa != NULL) {
00514         <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> () == <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a10">ASExternalLSAType</a>) {
00515             <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00516             <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00517                 <span class="keywordflow">if</span> (areas[i]-&gt;GetExternalRoutingCapability ()) {
00518                     <span class="keywordflow">if</span> (areas[i]-&gt;FloodLSA (lsa, intf, neighbor)) {
00519                         floodedBackOut = <span class="keyword">true</span>;
00520                     }
00521                 }
00522             }
00523         } <span class="keywordflow">else</span> {
00524             std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00525             <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00526                 floodedBackOut = areaIt-&gt;second-&gt;FloodLSA (lsa, intf, neighbor);
00527             }
00528         }
00529     }
00530 
00531     <span class="keywordflow">return</span> floodedBackOut;
00532 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="OSPF::Router::GetArea"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a> * OSPF::Router::GetArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> pointer from the <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> list which contains the input <a class="el" href="class_i_p.html">IP</a> address, NULL if there's no such area connected to the <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>[in] The <a class="el" href="class_i_p.html">IP</a> address whose containing <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> we're looking for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00095 {
00096     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00097     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00098         <span class="keywordflow">if</span> (areas[i]-&gt;ContainsAddress (address)) {
00099             <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i];
00100         }
00101     }
00102     <span class="keywordflow">return</span> NULL;
00103 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="OSPF::Router::GetArea"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a> * OSPF::Router::GetArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a2">OSPF::AreaID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>areaID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the pointer to the <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> identified by the input areaID, if it's on the <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> list, NULL otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>areaID</em>&nbsp;</td><td>[in] The <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a> identifier. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00078 {
00079     std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00080     <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00081         <span class="keywordflow">return</span> (areaIt-&gt;second);
00082     }
00083     <span class="keywordflow">else</span> {
00084         <span class="keywordflow">return</span> NULL;
00085     }
00086 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="OSPF::Router::GetAreaCount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Router::GetAreaCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00041 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="OSPF::Router::GetASBoundaryRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::GetASBoundaryRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00048 { <span class="keywordflow">return</span> (<a class="code" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a>.size () &gt; 0); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="OSPF::Router::GetASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a>* OSPF::Router::GetASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00047 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="OSPF::Router::GetASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a>* OSPF::Router::GetASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00046 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="OSPF::Router::GetASExternalLSACount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Router::GetASExternalLSACount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00045 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="OSPF::Router::GetContainingAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> OSPF::Router::GetContainingAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>addressRange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool *&nbsp;</td>
          <td class="mdname" nowrap> <em>advertise</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Scans through the router's areas' preconfigured address ranges and returns the one containing the input addressRange. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressRange</em>&nbsp;</td><td>[in] The address range to look for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>advertise</em>&nbsp;</td><td>[out] Whether the advertise flag is set in the returned preconfigured address range. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The containing preconfigured address range if found, <a class="el" href="namespace_o_s_p_f.html#a10">OSPF::NullIPv4AddressRange</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01218 {
01219     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
01220     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
01221         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> containingAddressRange = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;GetContainingAddressRange (addressRange, advertise);
01222         <span class="keywordflow">if</span> (containingAddressRange != OSPF::NullIPv4AddressRange) {
01223             <span class="keywordflow">return</span> containingAddressRange;
01224         }
01225     }
01226     <span class="keywordflow">if</span> (advertise != NULL) {
01227         *advertise = <span class="keyword">false</span>;
01228     }
01229     <span class="keywordflow">return</span> OSPF::NullIPv4AddressRange;
01230 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="OSPF::Router::GetMessageHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a>* OSPF::Router::GetMessageHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00043 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r8">messageHandler</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="OSPF::Router::GetNonVirtualInterface"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> * OSPF::Router::GetNonVirtualInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ifIndex</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the pointer of the physical <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> identified by the input interface index, NULL if the <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> doesn't have such an interface. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ifIndex</em>&nbsp;</td><td>[in] The interface index to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00112 {
00113     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00114     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00115         <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;GetInterface (ifIndex);
00116         <span class="keywordflow">if</span> (intf != NULL) {
00117             <span class="keywordflow">return</span> intf;
00118         }
00119     }
00120     <span class="keywordflow">return</span> NULL;
00121 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="OSPF::Router::GetPreferredEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * OSPF::Router::GetPreferredEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>skipSelfOriginated</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; *&nbsp;</td>
          <td class="mdname" nowrap> <em>fromRoutingTable</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Selects the preferred routing table entry for the input LSA (which is either an <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> or a <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a>) according to the algorithm defined in RFC2328 Section 16.4. points (1) through (3). This method is used when calculating the AS external routes and also when originating an <a class="el" href="class_o_s_p_f_1_1_summary_l_s_a.html">SummaryLSA</a> for an AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA describing the destination for which the preferred Routing Entry is sought for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>skipSelfOriginated</em>&nbsp;</td><td>[in] Whether to disregard this LSA if it was self-originated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fromRoutingTable</em>&nbsp;</td><td>[in] The Routing Table from which to select the preferred <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a>. If it is NULL then the router's current routing table is used instead. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The preferred <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a>, or NULL if no such entry exists. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 16.4. points (1) through (3) <p>
<a class="el" href="class_o_s_p_f_1_1_area.html#a54">OSPF::Area::OriginateSummaryLSA</a> </dd></dl>
<div class="fragment"><pre class="fragment">01020 {
01021     <span class="keywordflow">if</span> (fromRoutingTable == NULL) {
01022         fromRoutingTable = &amp;<a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>;
01023     }
01024 
01025     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;     lsaHeader         = lsa.<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01026     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a>* asExternalLSA     = dynamic_cast&lt;const OSPFASExternalLSA*&gt; (&amp;lsa);
01027     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            externalCost      = (asExternalLSA != NULL) ? asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a11">getRouteCost</a> () : 0;
01028     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>           lsAge             = lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a6">getLsAge</a> ();
01029     OSPF::RouterID           originatingRouter = lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
01030     <span class="keywordtype">bool</span>                     selfOriginated    = (originatingRouter == <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>);
01031     <a class="code" href="class_i_p_address.html">IPAddress</a>                forwardingAddress; <span class="comment">// 0.0.0.0</span>
01032 
01033     <span class="keywordflow">if</span> (asExternalLSA != NULL) {
01034         forwardingAddress = asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a13">getForwardingAddress</a> ();
01035     }
01036 
01037     <span class="keywordflow">if</span> ((externalCost == LS_INFINITY) || (lsAge == MAX_AGE) || (skipSelfOriginated &amp;&amp; selfOriginated)) { <span class="comment">// (1) and (2)</span>
01038         <span class="keywordflow">return</span> NULL;
01039     }
01040 
01041     <span class="keywordflow">if</span> (!HasRouteToASBoundaryRouter (*fromRoutingTable, originatingRouter)) { <span class="comment">// (3)</span>
01042         <span class="keywordflow">return</span> NULL;
01043     }
01044 
01045     <span class="keywordflow">if</span> (forwardingAddress.<a class="code" href="class_i_p_address.html#a1">isUnspecified</a>()) {   <span class="comment">// (3)</span>
01046         std::vector&lt;OSPF::RoutingTableEntry*&gt; asbrEntries = <a class="code" href="class_o_s_p_f_1_1_router.html#d8">GetRoutesToASBoundaryRouter</a> (*fromRoutingTable, originatingRouter);
01047         <span class="keywordflow">if</span> (!rfc1583Compatibility) {
01048             <a class="code" href="class_o_s_p_f_1_1_router.html#d9">PruneASBoundaryRouterEntries</a> (asbrEntries);
01049         }
01050         <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#d10">SelectLeastCostRoutingEntry</a> (asbrEntries);
01051     } <span class="keywordflow">else</span> {
01052         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* forwardEntry = <a class="code" href="class_o_s_p_f_1_1_router.html#a31">Lookup</a> (forwardingAddress, fromRoutingTable);
01053 
01054         <span class="keywordflow">if</span> (forwardEntry == NULL) {
01055             <span class="keywordflow">return</span> NULL;
01056         }
01057 
01058         <span class="keywordflow">if</span> ((forwardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () != <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) &amp;&amp;
01059             (forwardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () != <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w2">OSPF::RoutingTableEntry::InterArea</a>))
01060         {
01061             <span class="keywordflow">return</span> NULL;
01062         }
01063 
01064         <span class="keywordflow">return</span> forwardEntry;
01065     }
01066 
01067     <span class="keywordflow">return</span> NULL;
01068 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="OSPF::Router::GetRFC1583Compatibility"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::GetRFC1583Compatibility           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00040 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r9">rfc1583Compatibility</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="OSPF::Router::GetRouterID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a> OSPF::Router::GetRouterID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00038 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d8" doxytag="OSPF::Router::GetRoutesToASBoundaryRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * &gt; OSPF::Router::GetRoutesToASBoundaryRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>fromRoutingTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a1">OSPF::RouterID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>asbrRouterID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns an std::vector of routes leading to the AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> identified by asbrRouterID from the input fromRoutingTable. If there are no routes leading to the AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>, the returned std::vector is empty. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fromRoutingTable</em>&nbsp;</td><td>[in] The routing table to look in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asbrRouterID</em>&nbsp;</td><td>[in] The ID of the AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00921 {
00922     std::vector&lt;OSPF::RoutingTableEntry*&gt; results;
00923     <span class="keywordtype">long</span>                                  routeCount = fromRoutingTable.size ();
00924 
00925     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; routeCount; i++) {
00926         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = fromRoutingTable[i];
00927         <span class="keywordflow">if</span> (((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0) &amp;&amp;
00928             (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == asbrRouterID))
00929         {
00930             results.push_back (routingEntry);
00931         }
00932     }
00933     <span class="keywordflow">return</span> results;
00934 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="OSPF::Router::GetRoutingTableEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a>* OSPF::Router::GetRoutingTableEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00052 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="OSPF::Router::GetRoutingTableEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a>* OSPF::Router::GetRoutingTableEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00051 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i]; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="OSPF::Router::GetRoutingTableEntryCount"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long OSPF::Router::GetRoutingTableEntryCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00050 { <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size (); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="OSPF::Router::GetUniqueLinkStateID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a3">OSPF::LinkStateID</a> OSPF::Router::GetUniqueLinkStateID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a0">OSPF::Metric</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destinationCost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lsaToReoriginate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>externalMetricIsType2</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generates a unique LinkStateID for a given destination. This may require the reorigination of an LSA already in the database (with a different LinkStateID). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>[in] The destination for which a unique LinkStateID is required. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destinationCost</em>&nbsp;</td><td>[in] The path cost to the destination. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lsaToReoriginate</em>&nbsp;</td><td>[out] The LSA to reoriginate (which was already in the database, and had to be changed). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>externalMetricIsType2</em>&nbsp;</td><td>[in] True if the destinationCost is given as a Type2 external metric. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the LinkStateID for the destination. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>RFC2328 Appendix E. <p>
<a class="el" href="class_o_s_p_f_1_1_area.html#d4">OSPF::Area::GetUniqueLinkStateID</a> </dd></dl>
<div class="fragment"><pre class="fragment">01252 {
01253     <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01254         <span class="keyword">delete</span> lsaToReoriginate;
01255         lsaToReoriginate = NULL;
01256     }
01257 
01258     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
01259 
01260     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>);
01261     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01262 
01263     <span class="keyword">const</span> <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* foundLSA = <a class="code" href="class_o_s_p_f_1_1_router.html#d1">FindASExternalLSA</a> (lsaKey);
01264 
01265     <span class="keywordflow">if</span> (foundLSA == NULL) {
01266         <span class="keywordflow">return</span> lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>;
01267     } <span class="keywordflow">else</span> {
01268         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a> existingMask = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (foundLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ());
01269 
01270         <span class="keywordflow">if</span> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> &gt;= existingMask) {
01271             <span class="keywordflow">return</span> (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> | (~(<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>))));
01272         } <span class="keywordflow">else</span> {
01273             <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* asExternalLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> (*foundLSA);
01274 
01275             <span class="keywordtype">long</span> sequenceNumber = asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a18">getLsSequenceNumber</a> ();
01276 
01277             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01278             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> ((sequenceNumber == MAX_SEQUENCE_NUMBER) ? INITIAL_SEQUENCE_NUMBER : sequenceNumber + 1);
01279             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a8">setNetworkMask</a> (ULongFromIPv4Address (destination.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>));
01280             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a10">setE_ExternalMetricType</a> (externalMetricIsType2);
01281             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a12">setRouteCost</a> (destinationCost);
01282             asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01283 
01284             lsaToReoriginate = asExternalLSA;
01285 
01286             <span class="keywordflow">return</span> (lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> | (~(<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (existingMask))));
01287         }
01288     }
01289 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="OSPF::Router::HasAddressRange"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::HasAddressRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>addressRange</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if one of the Router's Areas the same <a class="el" href="class_i_p.html">IP</a> address range configured as the input <a class="el" href="class_i_p.html">IP</a> address range, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressRange</em>&nbsp;</td><td>[in] The <a class="el" href="class_i_p.html">IP</a> address range to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00558 {
00559     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00560     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00561         <span class="keywordflow">if</span> (areas[i]-&gt;HasAddressRange (addressRange)) {
00562             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00563         }
00564     }
00565     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00566 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="OSPF::Router::HasRouteToASBoundaryRouter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::HasRouteToASBoundaryRouter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>inRoutingTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a1">OSPF::RouterID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>asbrRouterID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if there is a route to the AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> identified by asbrRouterID in the input inRoutingTable, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inRoutingTable</em>&nbsp;</td><td>[in] The routing table to look in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asbrRouterID</em>&nbsp;</td><td>[in] The ID of the AS Boundary <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00899 {
00900     <span class="keywordtype">long</span> routeCount = inRoutingTable.size ();
00901     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; routeCount; i++) {
00902         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = inRoutingTable[i];
00903         <span class="keywordflow">if</span> (((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () &amp; <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s2">OSPF::RoutingTableEntry::ASBoundaryRouterDestination</a>) != 0) &amp;&amp;
00904             (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () == asbrRouterID))
00905         {
00906             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00907         }
00908     }
00909     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00910 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="OSPF::Router::InstallASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::InstallASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Installs a new AS External LSA into the Router's database. It tries to install keep one of multiple functionally equivalent AS External LSAs in the database. (See the comment in the method implementation.) <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA to install. It will be copied into the database. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if the routing table needs to be updated, false otherwise.</dd></dl>
<p>
From RFC2328 Section 12.4.4.1.: "If two routers, both reachable from one another, originate functionally equivalent AS-External-LSAs (i.e., same destination, cost and non-zero forwarding address), then the LSA originated by the router having the highest <a class="el" href="namespace_o_s_p_f.html">OSPF</a> <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> ID is used. The router having the lower <a class="el" href="namespace_o_s_p_f.html">OSPF</a> <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> ID can then flush its LSA." The problem is: how do we tell whether two routers are reachable from one another based on a <a class="el" href="class_link.html">Link</a> State Update packet? 0. We can assume that if this LSA reached this router, then this router is reachable from the other router. But what about the other direction? 1. The update packet is most likely not sent by the router originating the functionally equivalent AS-External-LSA, so we cannot use the <a class="el" href="class_i_p.html">IP</a> packet source address. 2. The AS-External-LSA contains only the <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> ID of the advertising router, so we can only look up "router" type routing entries in the routing table (these contain the <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> ID as their Destination ID). However these entries are only inserted into the routing table for intra-area routers... <div class="fragment"><pre class="fragment">00185 {
00203      <span class="comment">// TODO: how to solve this problem?</span>
00204 
00205     OSPF::RouterID advertisingRouter = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a15">getAdvertisingRouter</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00206     <span class="keywordtype">bool</span>           reachable         = <span class="keyword">false</span>;
00207     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   routeCount        = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
00208 
00209     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; routeCount; i++) {
00210         <span class="keywordflow">if</span> ((((routingTable[i]-&gt;GetDestinationType () &amp; OSPF::RoutingTableEntry::AreaBorderRouterDestination) != 0) ||
00211              ((routingTable[i]-&gt;GetDestinationType () &amp; OSPF::RoutingTableEntry::ASBoundaryRouterDestination) != 0)) &amp;&amp;
00212             (routingTable[i]-&gt;GetDestinationID ().getInt () == advertisingRouter))
00213         {
00214             reachable = <span class="keyword">true</span>;
00215             <span class="keywordflow">break</span>;
00216         }
00217     }
00218 
00219     <span class="keywordtype">bool</span>             ownLSAFloodedOut = <span class="keyword">false</span>;
00220     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
00221 
00222     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
00223     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
00224 
00225     std::map&lt;OSPF::LSAKeyType, OSPF::ASExternalLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.find (lsaKey);
00226     <span class="keywordflow">if</span> ((lsaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.end ()) &amp;&amp;
00227         reachable &amp;&amp;
00228         (lsaIt-&gt;second-&gt;getContents ().getE_ExternalMetricType () == lsa-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a9">getE_ExternalMetricType</a> ()) &amp;&amp;
00229         (lsaIt-&gt;second-&gt;getContents ().getRouteCost () == lsa-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a11">getRouteCost</a> ()) &amp;&amp;
00230         (lsa-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a13">getForwardingAddress</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () != 0) &amp;&amp;   <span class="comment">// forwarding address != 0.0.0.0</span>
00231         (lsaIt-&gt;second-&gt;getContents ().getForwardingAddress () == lsa-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a6">getContents</a> ().<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a13">getForwardingAddress</a> ()))
00232     {
00233         <span class="keywordflow">if</span> (routerID &gt; advertisingRouter) {
00234             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00235         } <span class="keywordflow">else</span> {
00236             lsaIt-&gt;second-&gt;getHeader ().setLsAge (MAX_AGE);
00237             <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsaIt-&gt;second, OSPF::BackboneAreaID);
00238             lsaIt-&gt;second-&gt;IncrementInstallTime ();
00239             ownLSAFloodedOut = <span class="keyword">true</span>;
00240         }
00241     }
00242 
00243     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = advertisingRouter;
00244 
00245     lsaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.find (lsaKey);
00246     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.end ()) {
00247         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00248         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00249             <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;RemoveFromAllRetransmissionLists (lsaKey);
00250         }
00251         <span class="keywordflow">return</span> ((lsaIt-&gt;second-&gt;Update (lsa)) | ownLSAFloodedOut);
00252     } <span class="keywordflow">else</span> {
00253         <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* lsaCopy = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> (*lsa);
00254         <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>[lsaKey] = lsaCopy;
00255         <a class="code" href="class_o_s_p_f_1_1_router.html#r4">asExternalLSAs</a>.push_back (lsaCopy);
00256         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00257     }
00258 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="OSPF::Router::InstallLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::InstallLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="namespace_o_s_p_f.html#a2">OSPF::AreaID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>areaID</em> = <code><a class="el" href="namespace_o_s_p_f.html#a5">BackboneAreaID</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Installs a new LSA into the <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> database. Checks the input LSA's type and installs it into either the selected Area's database, or if it's an AS External LSA then into the Router's common asExternalLSAs list. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA to install. It will be copied into the database. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>areaID</em>&nbsp;</td><td>[in] Identifies the input <a class="el" href="class_o_s_p_f_1_1_router.html">Router</a>, Network and Summary LSA's <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if the routing table needs to be updated, false otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00133 {
00134     <span class="keywordflow">switch</span> (lsa-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a11">getLsType</a> ()) {
00135         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a6">RouterLSAType</a>:
00136             {
00137                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00138                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00139                     <a class="code" href="class_o_s_p_f_router_l_s_a.html">OSPFRouterLSA</a>* ospfRouterLSA = check_and_cast&lt;OSPFRouterLSA*&gt; (lsa);
00140                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;InstallRouterLSA (ospfRouterLSA);
00141                 }
00142             }
00143             <span class="keywordflow">break</span>;
00144         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a7">NetworkLSAType</a>:
00145             {
00146                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00147                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00148                     <a class="code" href="class_o_s_p_f_network_l_s_a.html">OSPFNetworkLSA</a>* ospfNetworkLSA = check_and_cast&lt;OSPFNetworkLSA*&gt; (lsa);
00149                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;InstallNetworkLSA (ospfNetworkLSA);
00150                 }
00151             }
00152             <span class="keywordflow">break</span>;
00153         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a8">SummaryLSA_NetworksType</a>:
00154         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a9">SummaryLSA_ASBoundaryRoutersType</a>:
00155             {
00156                 std::map&lt;OSPF::AreaID, OSPF::Area*&gt;::iterator areaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.find (areaID);
00157                 <span class="keywordflow">if</span> (areaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r1">areasByID</a>.end ()) {
00158                     <a class="code" href="class_o_s_p_f_summary_l_s_a.html">OSPFSummaryLSA</a>* ospfSummaryLSA = check_and_cast&lt;OSPFSummaryLSA*&gt; (lsa);
00159                     <span class="keywordflow">return</span> areaIt-&gt;second-&gt;InstallSummaryLSA (ospfSummaryLSA);
00160                 }
00161             }
00162             <span class="keywordflow">break</span>;
00163         <span class="keywordflow">case</span> <a class="code" href="_o_s_p_f_packet__m_8h.html#a54a10">ASExternalLSAType</a>:
00164             {
00165                 <a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html">OSPFASExternalLSA</a>* ospfASExternalLSA = check_and_cast&lt;OSPFASExternalLSA*&gt; (lsa);
00166                 <span class="keywordflow">return</span> <a class="code" href="class_o_s_p_f_1_1_router.html#d0">InstallASExternalLSA</a> (ospfASExternalLSA);
00167             }
00168             <span class="keywordflow">break</span>;
00169         <span class="keywordflow">default</span>:
00170             ASSERT (<span class="keyword">false</span>);
00171             <span class="keywordflow">break</span>;
00172     }
00173     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00174 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="OSPF::Router::IsLocalAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::IsLocalAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the input <a class="el" href="class_i_p.html">IP</a> address falls into any of the Router's Areas' configured <a class="el" href="class_i_p.html">IP</a> address ranges, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>[in] The <a class="el" href="class_i_p.html">IP</a> address to look for. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00541 {
00542     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00543     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00544         <span class="keywordflow">if</span> (areas[i]-&gt;IsLocalAddress (address)) {
00545             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00546         }
00547     }
00548     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00549 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="OSPF::Router::IsOnAnyRetransmissionList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool OSPF::Router::IsOnAnyRetransmissionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if there's at least one LSA on any Neighbor's retransmission list identified by the input lsaKey, false otherwise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsaKey</em>&nbsp;</td><td>[in] Identifies the LSAs to look for on the retransmission lists. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00489 {
00490     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00491     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00492         <span class="keywordflow">if</span> (areas[i]-&gt;IsOnAnyRetransmissionList (lsaKey)) {
00493             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00494         }
00495     }
00496     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00497 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="OSPF::Router::Lookup"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * OSPF::Router::Lookup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; *&nbsp;</td>
          <td class="mdname" nowrap> <em>table</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Do a lookup in either the input <a class="el" href="namespace_o_s_p_f.html">OSPF</a> routing table, or if it's NULL then in the Router's own routing table. <dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 11.1. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>[in] The destination to look up in the routing table. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>table</em>&nbsp;</td><td>[in] The routing table to do the lookup in. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> describing the input destination if there's one, false otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00717 {
00718     <span class="keyword">const</span> std::vector&lt;OSPF::RoutingTableEntry*&gt;&amp; rTable           = (table == NULL) ? <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a> : (*table);
00719     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                dest             = destination.<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00720     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                routingTableSize = rTable.size ();
00721     <span class="keywordtype">bool</span>                                         unreachable      = <span class="keyword">false</span>;
00722     std::vector&lt;OSPF::RoutingTableEntry*&gt;        discard;
00723     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                i;
00724 
00725     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00726     <span class="keywordflow">for</span> (i = 0; i &lt; areaCount; i++) {
00727         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> addressRangeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;GetAddressRangeCount ();
00728         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; addressRangeCount; j++) {
00729             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> range = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;GetAddressRange (j);
00730 
00731             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; routingTableSize; k++) {
00732                 <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry = rTable[k];
00733 
00734                 <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6">GetDestinationType</a> () != <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#s0">OSPF::RoutingTableEntry::NetworkDestination</a>) {
00735                     <span class="keywordflow">continue</span>;
00736                 }
00737                 <span class="keywordflow">if</span> (((entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) == <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) &amp;&amp;
00738                     (entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>))
00739                 {
00740                     <span class="comment">// active area address range</span>
00741                     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* discardEntry = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>;
00742                     discardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7">SetDestinationID</a> (ULongFromIPv4Address (range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>));
00743                     discardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a9">SetAddressMask</a> (ULongFromIPv4Address (range.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>));
00744                     discardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a5">SetDestinationType</a> (OSPF::RoutingTableEntry::NetworkDestination);
00745                     discardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a15">SetPathType</a> (OSPF::RoutingTableEntry::InterArea);
00746                     discardEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a13">SetArea</a> (areas[i]-&gt;GetAreaID ());
00747                     discard.push_back (discardEntry);
00748                     <span class="keywordflow">break</span>;
00749                 }
00750             }
00751         }
00752     }
00753 
00754     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* bestMatch = NULL;
00755     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            longestMatch = 0;
00756 
00757     <span class="keywordflow">for</span> (i = 0; i &lt; routingTableSize; i++) {
00758         <span class="keywordflow">if</span> (rTable[i]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) {
00759             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry        = rTable[i];
00760             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryAddress = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00761             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryMask    = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00762 
00763             <span class="keywordflow">if</span> ((entryAddress &amp; entryMask) == (dest &amp; entryMask)) {
00764                 <span class="keywordflow">if</span> ((dest &amp; entryMask) &gt; longestMatch) {
00765                     longestMatch = (dest &amp; entryMask);
00766                     bestMatch    = entry;
00767                 }
00768             }
00769         }
00770     }
00771 
00772     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> discardCount = discard.size ();
00773     <span class="keywordflow">if</span> (bestMatch == NULL) {
00774         unreachable = <span class="keyword">true</span>;
00775     } <span class="keywordflow">else</span> {
00776         <span class="keywordflow">for</span> (i = 0; i &lt; discardCount; i++) {
00777             <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* entry        = discard[i];
00778             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryAddress = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a8">GetDestinationID</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00779             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>            entryMask    = entry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a10">GetAddressMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ();
00780 
00781             <span class="keywordflow">if</span> ((entryAddress &amp; entryMask) == (dest &amp; entryMask)) {
00782                 <span class="keywordflow">if</span> ((dest &amp; entryMask) &gt; longestMatch) {
00783                     unreachable = <span class="keyword">true</span>;
00784                     <span class="keywordflow">break</span>;
00785                 }
00786             }
00787         }
00788     }
00789 
00790     <span class="keywordflow">for</span> (i = 0; i &lt; discardCount; i++) {
00791         <span class="keyword">delete</span> discard[i];
00792     }
00793 
00794     <span class="keywordflow">if</span> (unreachable) {
00795         <span class="keywordflow">return</span> NULL;
00796     } <span class="keywordflow">else</span> {
00797         <span class="keywordflow">return</span> bestMatch;
00798     }
00799 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="OSPF::Router::NotifyAboutRoutingTableChanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::NotifyAboutRoutingTableChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>oldRoutingTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
After a routing table rebuild the changes in the routing table are identified and new SummaryLSAs are originated or old ones are flooded out in each area as necessary. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oldRoutingTable</em>&nbsp;</td><td>[in] The previous version of the routing table (which is then compared with the one in routingTable). </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 12.4. points (5) through (6). </dd></dl>
<div class="fragment"><pre class="fragment">01302 {
01303     <span class="keywordflow">if</span> (<a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size () &lt;= 1) {
01304         <span class="keywordflow">return</span>;
01305     }
01306 
01307     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                 routeCount = oldRoutingTable.size ();
01308     std::map&lt;unsigned long, RoutingTableEntry*&gt;   oldTableMap;
01309     std::map&lt;unsigned long, RoutingTableEntry*&gt;   newTableMap;
01310     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                 i, j, k;
01311 
01312     <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
01313         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> destination = oldRoutingTable[i]-&gt;GetDestinationID ().getInt () &amp; oldRoutingTable[i]-&gt;GetAddressMask ().getInt ();
01314         oldTableMap[destination] = oldRoutingTable[i];
01315     }
01316 
01317     routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
01318     <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
01319         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   destination = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i]-&gt;GetDestinationID ().getInt () &amp; <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i]-&gt;GetAddressMask ().getInt ();
01320         newTableMap[destination] = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i];
01321     }
01322 
01323     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
01324     <span class="keywordflow">for</span> (i = 0; i &lt; areaCount; i++) {
01325         std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt; originatedLSAMap;
01326         std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt; deletedLSAMap;
01327         <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>                                        lsaKey;
01328 
01329         routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
01330         <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {
01331             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                         destination = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[j]-&gt;GetDestinationID ().getInt () &amp; <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[j]-&gt;GetAddressMask ().getInt ();
01332             std::map&lt;unsigned long, RoutingTableEntry*&gt;::iterator destIt      = oldTableMap.find (destination);
01333             <span class="keywordflow">if</span> (destIt == oldTableMap.end ()) { <span class="comment">// new routing entry</span>
01334                 <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* lsaToReoriginate = NULL;
01335                 <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* newLSA           = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;OriginateSummaryLSA (routingTable[j], originatedLSAMap, lsaToReoriginate);
01336 
01337                 <span class="keywordflow">if</span> (newLSA != NULL) {
01338                     <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01339                         <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;InstallSummaryLSA (lsaToReoriginate);
01340 <span class="comment">//                        FloodLSA (lsaToReoriginate, OSPF::BackboneAreaID);</span>
01341                         <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsaToReoriginate, areas[i]-&gt;GetAreaID ());
01342 
01343                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = lsaToReoriginate-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01344                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01345                         originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01346 
01347                         <span class="keyword">delete</span> lsaToReoriginate;
01348                     }
01349 
01350                     <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;InstallSummaryLSA (newLSA);
01351 <span class="comment">//                    FloodLSA (newLSA, OSPF::BackboneAreaID);</span>
01352                     <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (newLSA, areas[i]-&gt;GetAreaID ());
01353 
01354                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01355                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01356                     originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01357 
01358                     <span class="keyword">delete</span> newLSA;
01359                 }
01360             } <span class="keywordflow">else</span> {
01361                 <span class="keywordflow">if</span> (*(routingTable[j]) != *(destIt-&gt;second)) {  <span class="comment">// modified routing entry</span>
01362                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* lsaToReoriginate = NULL;
01363                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* newLSA           = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;OriginateSummaryLSA (routingTable[j], originatedLSAMap, lsaToReoriginate);
01364 
01365                     <span class="keywordflow">if</span> (newLSA != NULL) {
01366                         <span class="keywordflow">if</span> (lsaToReoriginate != NULL) {
01367                             <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;InstallSummaryLSA (lsaToReoriginate);
01368 <span class="comment">//                            FloodLSA (lsaToReoriginate, OSPF::BackboneAreaID);</span>
01369                             <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsaToReoriginate, areas[i]-&gt;GetAreaID ());
01370 
01371                             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = lsaToReoriginate-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01372                             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01373                             originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01374 
01375                             <span class="keyword">delete</span> lsaToReoriginate;
01376                         }
01377 
01378                         <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;InstallSummaryLSA (newLSA);
01379 <span class="comment">//                        FloodLSA (newLSA, OSPF::BackboneAreaID);</span>
01380                         <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (newLSA, areas[i]-&gt;GetAreaID ());
01381 
01382                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = newLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a13">getLinkStateID</a> ();
01383                         lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01384                         originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01385 
01386                         <span class="keyword">delete</span> newLSA;
01387                     } <span class="keywordflow">else</span> {
01388                         <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destinationAddressRange;
01389 
01390                         destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (routingTable[j]-&gt;GetDestinationID ().getInt ());
01391                         destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (routingTable[j]-&gt;GetAddressMask ().getInt ());
01392 
01393                         <span class="keywordflow">if</span> ((routingTable[j]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) &amp;&amp;
01394                             ((routingTable[j]-&gt;GetPathType () == OSPF::RoutingTableEntry::IntraArea) ||
01395                              (routingTable[j]-&gt;GetPathType () == OSPF::RoutingTableEntry::InterArea)))
01396                         {
01397                             <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> containingAddressRange = <a class="code" href="class_o_s_p_f_1_1_router.html#a33">GetContainingAddressRange</a> (destinationAddressRange);
01398                             <span class="keywordflow">if</span> (containingAddressRange != OSPF::NullIPv4AddressRange) {
01399                                 destinationAddressRange = containingAddressRange;
01400                             }
01401                         }
01402 
01403                         <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a> maxRangeCost = 0;
01404                         <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a> oneLessCost  = 0;
01405 
01406                         <span class="keywordflow">for</span> (k = 0; k &lt; routeCount; k++) {
01407                             <span class="keywordflow">if</span> ((routingTable[k]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) &amp;&amp;
01408                                 (routingTable[k]-&gt;GetPathType () == OSPF::RoutingTableEntry::IntraArea) &amp;&amp;
01409                                 ((routingTable[k]-&gt;GetDestinationID ().getInt () &amp; routingTable[k]-&gt;GetAddressMask ().getInt () &amp; ULongFromIPv4Address (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) ==
01410                                  <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) &amp;&amp;
01411                                 (routingTable[k]-&gt;GetCost () &gt; maxRangeCost))
01412                             {
01413                                 oneLessCost  = maxRangeCost;
01414                                 maxRangeCost = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[k]-&gt;GetCost ();
01415                             }
01416                         }
01417 
01418                         <span class="keywordflow">if</span> (maxRangeCost == routingTable[j]-&gt;GetCost ()) {  <span class="comment">// this entry gives the range's cost</span>
01419                             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>);
01420                             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01421 
01422                             <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;FindSummaryLSA (lsaKey);
01423 
01424                             <span class="keywordflow">if</span> (summaryLSA != NULL) {
01425                                 <span class="keywordflow">if</span> (oneLessCost != 0) { <span class="comment">// there's an other entry in this range</span>
01426                                     summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (oneLessCost);
01427 <span class="comment">//                                    FloodLSA (summaryLSA, OSPF::BackboneAreaID);</span>
01428                                     <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (summaryLSA, areas[i]-&gt;GetAreaID ());
01429 
01430                                     originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01431                                 } <span class="keywordflow">else</span> {    <span class="comment">// no more entries in this range -&gt; delete it</span>
01432                                     std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt;::const_iterator deletedIt = deletedLSAMap.find (lsaKey);
01433                                     <span class="keywordflow">if</span> (deletedIt == deletedLSAMap.end ()) {
01434                                         summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
01435 <span class="comment">//                                        FloodLSA (summaryLSA, OSPF::BackboneAreaID);</span>
01436                                         <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (summaryLSA, areas[i]-&gt;GetAreaID ());
01437 
01438                                         deletedLSAMap[lsaKey]    = <span class="keyword">true</span>;
01439                                     }
01440                                 }
01441                             }
01442                         }
01443                     }
01444                 }
01445             }
01446         }
01447 
01448         routeCount = oldRoutingTable.size ();
01449         <span class="keywordflow">for</span> (j = 0; j &lt; routeCount; j++) {
01450             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                                         destination = oldRoutingTable[j]-&gt;GetDestinationID ().getInt () &amp; oldRoutingTable[j]-&gt;GetAddressMask ().getInt ();
01451             std::map&lt;unsigned long, RoutingTableEntry*&gt;::iterator destIt      = newTableMap.find (destination);
01452             <span class="keywordflow">if</span> (destIt == newTableMap.end ()) { <span class="comment">// deleted routing entry</span>
01453                 <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> destinationAddressRange;
01454 
01455                 destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (oldRoutingTable[j]-&gt;GetDestinationID ().getInt ());
01456                 destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a54">IPv4AddressFromULong</a> (oldRoutingTable[j]-&gt;GetAddressMask ().getInt ());
01457 
01458                 <span class="keywordflow">if</span> ((oldRoutingTable[j]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) &amp;&amp;
01459                     ((oldRoutingTable[j]-&gt;GetPathType () == OSPF::RoutingTableEntry::IntraArea) ||
01460                      (oldRoutingTable[j]-&gt;GetPathType () == OSPF::RoutingTableEntry::InterArea)))
01461                 {
01462                     <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> containingAddressRange = <a class="code" href="class_o_s_p_f_1_1_router.html#a33">GetContainingAddressRange</a> (destinationAddressRange);
01463                     <span class="keywordflow">if</span> (containingAddressRange != OSPF::NullIPv4AddressRange) {
01464                         destinationAddressRange = containingAddressRange;
01465                     }
01466                 }
01467 
01468                 <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a> maxRangeCost = 0;
01469 
01470                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> newRouteCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
01471                 <span class="keywordflow">for</span> (k = 0; k &lt; newRouteCount; k++) {
01472                     <span class="keywordflow">if</span> ((routingTable[k]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) &amp;&amp;
01473                         (routingTable[k]-&gt;GetPathType () == OSPF::RoutingTableEntry::IntraArea) &amp;&amp;
01474                         ((routingTable[k]-&gt;GetDestinationID ().getInt () &amp; routingTable[k]-&gt;GetAddressMask ().getInt () &amp; ULongFromIPv4Address (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) ==
01475                          <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a> &amp; destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o1">mask</a>)) &amp;&amp;
01476                         (routingTable[k]-&gt;GetCost () &gt; maxRangeCost))
01477                     {
01478                         maxRangeCost = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[k]-&gt;GetCost ();
01479                     }
01480                 }
01481 
01482                 <span class="keywordflow">if</span> (maxRangeCost &lt; oldRoutingTable[j]-&gt;GetCost ()) {  <span class="comment">// the range's cost will change</span>
01483                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a>       = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (destinationAddressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#o0">address</a>);
01484                     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01485 
01486                     <a class="code" href="class_o_s_p_f_1_1_summary_l_s_a.html">OSPF::SummaryLSA</a>* summaryLSA = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;FindSummaryLSA (lsaKey);
01487 
01488                     <span class="keywordflow">if</span> (summaryLSA != NULL) {
01489                         <span class="keywordflow">if</span> (maxRangeCost &gt; 0) { <span class="comment">// there's an other entry in this range</span>
01490                             summaryLSA-&gt;<a class="code" href="class_o_s_p_f_summary_l_s_a.html#a10">setRouteCost</a> (maxRangeCost);
01491                             <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (summaryLSA, OSPF::BackboneAreaID);
01492 
01493                             originatedLSAMap[lsaKey] = <span class="keyword">true</span>;
01494                         } <span class="keywordflow">else</span> {    <span class="comment">// no more entries in this range -&gt; delete it</span>
01495                             std::map&lt;OSPF::LSAKeyType, bool, OSPF::LSAKeyType_Less&gt;::const_iterator deletedIt = deletedLSAMap.find (lsaKey);
01496                             <span class="keywordflow">if</span> (deletedIt == deletedLSAMap.end ()) {
01497                                 summaryLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ().<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (MAX_AGE);
01498                                 <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (summaryLSA, OSPF::BackboneAreaID);
01499 
01500                                 deletedLSAMap[lsaKey]    = <span class="keyword">true</span>;
01501                             }
01502                         }
01503                     }
01504                 }
01505             }
01506         }
01507     }
01508 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="OSPF::Router::OriginateASExternalLSA"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> * OSPF::Router::OriginateASExternalLSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsa</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Originates a new AS External LSA based on the input lsa. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsa</em>&nbsp;</td><td>[in] The LSA whose contents should be copied into the newly originated LSA. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The newly originated LSA. </dd></dl>
<div class="fragment"><pre class="fragment">00575 {
00576     <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* asExternalLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a> (*lsa);
00577     <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp; lsaHeader = asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
00578     <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>    lsaOptions;
00579 
00580     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
00581     memset (&amp;lsaOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
00582     lsaOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <span class="keyword">true</span>;
00583     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsaOptions);
00584     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
00585     asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
00586 
00587     <span class="keywordflow">return</span> asExternalLSA;
00588 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d9" doxytag="OSPF::Router::PruneASBoundaryRouterEntries"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::PruneASBoundaryRouterEntries           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>asbrEntries</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Prunes the input std::vector of RoutingTableEntries according to the RFC2328 Section 16.4.1. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>asbrEntries</em>&nbsp;</td><td>[in/out] The list of RoutingTableEntries to prune. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 16.4.1. </dd></dl>
<div class="fragment"><pre class="fragment">00944 {
00945     <span class="keywordtype">bool</span> hasNonBackboneIntraAreaPath = <span class="keyword">false</span>;
00946     <span class="keywordflow">for</span> (std::vector&lt;OSPF::RoutingTableEntry*&gt;::iterator it = asbrEntries.begin (); it != asbrEntries.end (); it++) {
00947         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* routingEntry = *it;
00948         <span class="keywordflow">if</span> ((routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a16">GetPathType</a> () == <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) &amp;&amp;
00949             (routingEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> () != OSPF::BackboneAreaID))
00950         {
00951             hasNonBackboneIntraAreaPath = <span class="keyword">true</span>;
00952             <span class="keywordflow">break</span>;
00953         }
00954     }
00955 
00956     <span class="keywordflow">if</span> (hasNonBackboneIntraAreaPath) {
00957         std::vector&lt;OSPF::RoutingTableEntry*&gt;::iterator it = asbrEntries.begin ();
00958         <span class="keywordflow">while</span> (it != asbrEntries.end ()) {
00959             <span class="keywordflow">if</span> (((*it)-&gt;GetPathType () != <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#w5w1">OSPF::RoutingTableEntry::IntraArea</a>) ||
00960                 ((*it)-&gt;GetArea () == OSPF::BackboneAreaID))
00961             {
00962                 it = asbrEntries.erase (it);
00963             } <span class="keywordflow">else</span> {
00964                 it++;
00965             }
00966         }
00967     }
00968 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="OSPF::Router::RebuildRoutingTable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::RebuildRoutingTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Rebuilds the routing table from scratch (based on the LSA database). <dl compact><dt><b>See also:</b></dt><dd>RFC2328 Section 16. </dd></dl>
<div class="fragment"><pre class="fragment">00807 {
00808     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                         areaCount       = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00809     <span class="keywordtype">bool</span>                                  hasTransitAreas = <span class="keyword">false</span>;
00810     std::vector&lt;OSPF::RoutingTableEntry*&gt; newTable;
00811     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                         i;
00812 
00813     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Rebuilding routing table:\n"</span>;
00814 
00815     <span class="keywordflow">for</span> (i = 0; i &lt; areaCount; i++) {
00816         <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;CalculateShortestPathTree (newTable);
00817         <span class="keywordflow">if</span> (areas[i]-&gt;GetTransitCapability ()) {
00818             hasTransitAreas = <span class="keyword">true</span>;
00819         }
00820     }
00821     <span class="keywordflow">if</span> (areaCount &gt; 1) {
00822         <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* backbone = <a class="code" href="class_o_s_p_f_1_1_router.html#a18">GetArea</a> (OSPF::BackboneAreaID);
00823         <span class="keywordflow">if</span> (backbone != NULL) {
00824             backbone-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a56">CalculateInterAreaRoutes</a> (newTable);
00825         }
00826     } <span class="keywordflow">else</span> {
00827         <span class="keywordflow">if</span> (areaCount == 1) {
00828             <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[0]-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a56">CalculateInterAreaRoutes</a> (newTable);
00829         }
00830     }
00831     <span class="keywordflow">if</span> (hasTransitAreas) {
00832         <span class="keywordflow">for</span> (i = 0; i &lt; areaCount; i++) {
00833             <span class="keywordflow">if</span> (areas[i]-&gt;GetTransitCapability ()) {
00834                 <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a57">ReCheckSummaryLSAs</a> (newTable);
00835             }
00836         }
00837     }
00838     <a class="code" href="class_o_s_p_f_1_1_router.html#d5">CalculateASExternalRoutes</a> (newTable);
00839 
00840     <span class="comment">// backup the routing table</span>
00841     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                         routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
00842     std::vector&lt;OSPF::RoutingTableEntry*&gt; oldTable;
00843 
00844     oldTable.assign (<a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.begin (), <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.end ());
00845     <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.clear ();
00846     <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.assign (newTable.begin (), newTable.end ());
00847 
00848     <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a>         routingTableAccess;
00849     std::vector&lt;RoutingEntry*&gt; eraseEntries;
00850     <a class="code" href="class_routing_table.html">RoutingTable</a>*              simRoutingTable    = routingTableAccess.<a class="code" href="class_module_access.html#a1">get</a> ();
00851     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              routingEntryNumber = simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_0">numRoutingEntries</a> ();
00852     <span class="comment">// remove entries from the IP routing table inserted by the OSPF module</span>
00853     <span class="keywordflow">for</span> (i = 0; i &lt; routingEntryNumber; i++) {
00854         <a class="code" href="class_routing_entry.html">RoutingEntry</a>*            entry     = simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_1">routingEntry</a> (i);
00855         <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* ospfEntry = dynamic_cast&lt;OSPF::RoutingTableEntry*&gt; (entry);
00856         <span class="keywordflow">if</span> (ospfEntry != NULL) {
00857             eraseEntries.push_back (entry);
00858         }
00859     }
00860 
00861     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> eraseCount = eraseEntries.size ();
00862     <span class="keywordflow">for</span> (i = 0; i &lt; eraseCount; i++) {
00863         simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_4">deleteRoutingEntry</a> (eraseEntries[i]);
00864     }
00865 
00866     <span class="comment">// add the new routing entries</span>
00867     routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
00868     <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
00869         <span class="keywordflow">if</span> (routingTable[i]-&gt;GetDestinationType () == OSPF::RoutingTableEntry::NetworkDestination) {
00870             simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_3">addRoutingEntry</a> (<span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> (*(routingTable[i])));
00871         }
00872     }
00873 
00874     <a class="code" href="class_o_s_p_f_1_1_router.html#d6">NotifyAboutRoutingTableChanges</a> (oldTable);
00875 
00876     routeCount = oldTable.size ();
00877     <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
00878         <span class="keyword">delete</span> (oldTable[i]);
00879     }
00880 
00881     <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; <span class="stringliteral">"Routing table was rebuilt.\n"</span>
00882        &lt;&lt; <span class="stringliteral">"Results:\n"</span>;
00883 
00884     routeCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>.size ();
00885     <span class="keywordflow">for</span> (i = 0; i &lt; routeCount; i++) {
00886         <a class="code" href="_i_n_e_t_defs_8h.html#a1">EV</a> &lt;&lt; *<a class="code" href="class_o_s_p_f_1_1_router.html#r7">routingTable</a>[i]
00887            &lt;&lt; <span class="stringliteral">"\n"</span>;
00888     }
00889 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="OSPF::Router::RemoveExternalRoute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::RemoveExternalRoute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>networkAddress</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes an AS External Route from the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>networkAddress</em>&nbsp;</td><td>[in] The network address of the external route which needs to be removed. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01582 {
01583     <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>     lsaKey;
01584 
01585     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o0">linkStateID</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (networkAddress);
01586     lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#o1">advertisingRouter</a> = <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a>;
01587 
01588     std::map&lt;OSPF::LSAKeyType, OSPF::ASExternalLSA*, OSPF::LSAKeyType_Less&gt;::iterator lsaIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.find (lsaKey);
01589     <span class="keywordflow">if</span> (lsaIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r3">asExternalLSAsByID</a>.end ()) {
01590         lsaIt-&gt;second-&gt;getHeader ().setLsAge (MAX_AGE);
01591         lsaIt-&gt;second-&gt;SetPurgeable ();
01592         <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (lsaIt-&gt;second, OSPF::BackboneAreaID);
01593     }
01594 
01595     std::map&lt;OSPF::IPv4Address, OSPFASExternalLSAContents, OSPF::IPv4Address_Less&gt;::iterator externalIt = <a class="code" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a>.find (networkAddress);
01596     <span class="keywordflow">if</span> (externalIt != <a class="code" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a>.end ()) {
01597         <a class="code" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a>.erase (externalIt);
01598     }
01599 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="OSPF::Router::RemoveFromAllRetransmissionLists"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::RemoveFromAllRetransmissionLists           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lsaKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes all LSAs from all Neighbor's retransmission lists which are identified by the input lsaKey. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lsaKey</em>&nbsp;</td><td>[in] Identifies the LSAs to remove from the retransmission lists. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00475 {
00476     <span class="keywordtype">long</span> areaCount = <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>.size ();
00477     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; areaCount; i++) {
00478         <a class="code" href="class_o_s_p_f_1_1_router.html#r2">areas</a>[i]-&gt;RemoveFromAllRetransmissionLists (lsaKey);
00479     }
00480 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d10" doxytag="OSPF::Router::SelectLeastCostRoutingEntry"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a> * OSPF::Router::SelectLeastCostRoutingEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entries</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Selects the least cost <a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a> from the input std::vector of RoutingTableEntries. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>entries</em>&nbsp;</td><td>[in] The RoutingTableEntries to choose the least cost one from. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The least cost entry or NULL if entries is empty. </dd></dl>
<div class="fragment"><pre class="fragment">00978 {
00979     <span class="keywordflow">if</span> (entries.empty ()) {
00980         <span class="keywordflow">return</span> NULL;
00981     }
00982 
00983     <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>* leastCostEntry = entries[0];
00984     <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a>                   leastCost      = leastCostEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
00985     <span class="keywordtype">long</span>                     routeCount     = entries.size ();
00986 
00987     <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 1; i &lt; routeCount; i++) {
00988         <a class="code" href="namespace_o_s_p_f.html#a0">Metric</a> currentCost = entries[i]-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a18">GetCost</a> ();
00989         <span class="keywordflow">if</span> ((currentCost &lt; leastCost) ||
00990             ((currentCost == leastCost) &amp;&amp; (entries[i]-&gt;GetArea () &gt; leastCostEntry-&gt;<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a14">GetArea</a> ())))
00991         {
00992             leastCostEntry = entries[i];
00993             leastCost = currentCost;
00994         }
00995     }
00996 
00997     <span class="keywordflow">return</span> leastCostEntry;
00998 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="OSPF::Router::SetRFC1583Compatibility"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::SetRFC1583Compatibility           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>compatibility</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00039 { <a class="code" href="class_o_s_p_f_1_1_router.html#r9">rfc1583Compatibility</a> = compatibility; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="OSPF::Router::SetRouterID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::SetRouterID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00037 { <a class="code" href="class_o_s_p_f_1_1_router.html#r0">routerID</a> = id; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="OSPF::Router::UpdateExternalRoute"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void OSPF::Router::UpdateExternalRoute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">OSPF::IPv4Address</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>networkAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="class_o_s_p_f_a_s_external_l_s_a_contents.html">OSPFASExternalLSAContents</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>externalRouteContents</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ifIndex</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores information on an AS External Route in externalRoutes and intalls (or updates) a new <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a> into the database. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>networkAddress</em>&nbsp;</td><td>[in] The external route's network address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>externalRouteContents</em>&nbsp;</td><td>[in] Route configuration data for the external route. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ifIndex</em>&nbsp;</td><td>[in] </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01519 {
01520     <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>* asExternalLSA = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">OSPF::ASExternalLSA</a>;
01521     <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp;       lsaHeader     = asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a6">getHeader</a> ();
01522     <a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>          lsaOptions;
01523     <span class="comment">//OSPF::LSAKeyType     lsaKey;</span>
01524 
01525     <a class="code" href="class_routing_table.html">RoutingTable</a>*      simRoutingTable    = <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a> ().get ();
01526     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>      routingEntryNumber = simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_0">numRoutingEntries</a> ();
01527     <span class="keywordtype">bool</span>               inRoutingTable     = <span class="keyword">false</span>;
01528     <span class="comment">// add the external route to the routing table if it was not added by another module</span>
01529     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; routingEntryNumber; i++) {
01530         <a class="code" href="class_routing_entry.html">RoutingEntry</a>* entry = simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_1">routingEntry</a> (i);
01531         <span class="keywordflow">if</span> ((entry-&gt;<a class="code" href="class_routing_entry.html#o0">host</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a> () &amp; entry-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a>.<a class="code" href="class_i_p_address.html#a5">getInt</a> ()) ==
01532             (<a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (networkAddress) &amp; externalRouteContents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ().<a class="code" href="class_i_p_address.html#a5">getInt</a> ()))
01533         {
01534             inRoutingTable = <span class="keyword">true</span>;
01535         }
01536     }
01537     <span class="keywordflow">if</span> (!inRoutingTable) {
01538         <a class="code" href="class_routing_entry.html">RoutingEntry</a>* entry = <span class="keyword">new</span> <a class="code" href="class_routing_entry.html">RoutingEntry</a>;
01539         entry-&gt;<a class="code" href="class_routing_entry.html#o0">host</a> = <a class="code" href="_o_s_p_fcommon_8h.html#a55">ULongFromIPv4Address</a> (networkAddress);
01540         entry-&gt;<a class="code" href="class_routing_entry.html#o1">netmask</a> = externalRouteContents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a6">getNetworkMask</a> ();
01541         entry-&gt;<a class="code" href="class_routing_entry.html#o4">interfacePtr</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a> ().get ()-&gt;interfaceAt (ifIndex);
01542         entry-&gt;<a class="code" href="class_routing_entry.html#o3">interfaceName</a> = entry-&gt;<a class="code" href="class_routing_entry.html#o4">interfacePtr</a>-&gt;<a class="code" href="class_interface_entry.html#a5">name</a> ();
01543         entry-&gt;<a class="code" href="class_routing_entry.html#o5">type</a> = <a class="code" href="class_routing_entry.html#w8w1">RoutingEntry::REMOTE</a>;
01544         entry-&gt;<a class="code" href="class_routing_entry.html#o6">source</a> = <a class="code" href="class_routing_entry.html#w9w2">RoutingEntry::MANUAL</a>;
01545         entry-&gt;<a class="code" href="class_routing_entry.html#o7">metric</a> = externalRouteContents.<a class="code" href="class_o_s_p_f_a_s_external_l_s_a_contents.html#a11">getRouteCost</a> ();
01546         simRoutingTable-&gt;<a class="code" href="class_routing_table.html#z46_3">addRoutingEntry</a> (entry);   <span class="comment">// RoutingTable deletes entry pointer</span>
01547     }
01548 
01549     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a7">setLsAge</a> (0);
01550     memset (&amp;lsaOptions, 0, <span class="keyword">sizeof</span> (<a class="code" href="struct_o_s_p_f_options.html">OSPFOptions</a>));
01551     lsaOptions.<a class="code" href="struct_o_s_p_f_options.html#o1">E_ExternalRoutingCapability</a> = <span class="keyword">true</span>;
01552     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a10">setLsOptions</a> (lsaOptions);
01553     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a12">setLsType</a> (ASExternalLSAType);
01554     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a14">setLinkStateID</a> (ULongFromIPv4Address (networkAddress));   <span class="comment">// TODO: get unique LinkStateID</span>
01555     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a17">setAdvertisingRouter</a> (routerID);
01556     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a19">setLsSequenceNumber</a> (INITIAL_SEQUENCE_NUMBER);
01557 
01558     asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_a_s_external_l_s_a.html#a8">setContents</a> (externalRouteContents);
01559 
01560     lsaHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a21">setLsChecksum</a> (0);    <span class="comment">// TODO: calculate correct LS checksum</span>
01561 
01562     asExternalLSA-&gt;<a class="code" href="class_o_s_p_f_1_1_l_s_a_tracking_info.html#a2">SetSource</a> (OSPF::LSATrackingInfo::Originated);
01563 
01564     <a class="code" href="class_o_s_p_f_1_1_router.html#r5">externalRoutes</a>[networkAddress] = externalRouteContents;
01565 
01566     <span class="keywordtype">bool</span> rebuild = <a class="code" href="class_o_s_p_f_1_1_router.html#d0">InstallASExternalLSA</a> (asExternalLSA);
01567     <a class="code" href="class_o_s_p_f_1_1_router.html#a27">FloodLSA</a> (asExternalLSA, OSPF::BackboneAreaID);
01568     <span class="keyword">delete</span> asExternalLSA;
01569 
01570     <span class="keywordflow">if</span> (rebuild) {
01571         <a class="code" href="class_o_s_p_f_1_1_router.html#a32">RebuildRoutingTable</a> ();
01572     }
01573 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r6" doxytag="OSPF::Router::ageTimer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_timer.html">OSPFTimer</a>* <a class="el" href="class_o_s_p_f_1_1_router.html#r6">OSPF::Router::ageTimer</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Database age timer - fires every second. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="OSPF::Router::areas"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_area.html">Area</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r2">OSPF::Router::areas</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A list of the contained areas. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="OSPF::Router::areasByID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="namespace_o_s_p_f.html#a2">AreaID</a>, <a class="el" href="class_o_s_p_f_1_1_area.html">Area</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r1">OSPF::Router::areasByID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A map of the contained areas with the AreaID as key. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="OSPF::Router::asExternalLSAs"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r4">OSPF::Router::asExternalLSAs</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A list of the ASExternalLSAs advertised by this router. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="OSPF::Router::asExternalLSAsByID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">LSAKeyType</a>, <a class="el" href="class_o_s_p_f_1_1_a_s_external_l_s_a.html">ASExternalLSA</a>*, <a class="el" href="class_o_s_p_f_1_1_l_s_a_key_type___less.html">LSAKeyType_Less</a>&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r3">OSPF::Router::asExternalLSAsByID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A map of the ASExternalLSAs advertised by this router. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="OSPF::Router::externalRoutes"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::map&lt;<a class="el" href="struct_o_s_p_f_1_1_i_pv4_address.html">IPv4Address</a>, <a class="el" href="class_o_s_p_f_a_s_external_l_s_a_contents.html">OSPFASExternalLSAContents</a>, <a class="el" href="class_o_s_p_f_1_1_i_pv4_address___less.html">IPv4Address_Less</a>&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r5">OSPF::Router::externalRoutes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A map of the external route advertised by this router. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r8" doxytag="OSPF::Router::messageHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_o_s_p_f_1_1_message_handler.html">MessageHandler</a>* <a class="el" href="class_o_s_p_f_1_1_router.html#r8">OSPF::Router::messageHandler</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The message dispatcher class. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r9" doxytag="OSPF::Router::rfc1583Compatibility"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="class_o_s_p_f_1_1_router.html#r9">OSPF::Router::rfc1583Compatibility</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Decides whether to handle the preferred routing table entry to an AS boundary router as defined in RFC1583 or not. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="OSPF::Router::routerID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespace_o_s_p_f.html#a1">RouterID</a> <a class="el" href="class_o_s_p_f_1_1_router.html#r0">OSPF::Router::routerID</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The router ID assigned by the <a class="el" href="class_i_p.html">IP</a> layer. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r7" doxytag="OSPF::Router::routingTable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::vector&lt;<a class="el" href="class_o_s_p_f_1_1_routing_table_entry.html">RoutingTableEntry</a>*&gt; <a class="el" href="class_o_s_p_f_1_1_router.html#r7">OSPF::Router::routingTable</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The <a class="el" href="namespace_o_s_p_f.html">OSPF</a> routing table - contains more information than the one in the <a class="el" href="class_i_p.html">IP</a> layer. 
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_o_s_p_f_router_8h.html">OSPFRouter.h</a><li><a class="el" href="_o_s_p_f_router_8cc.html">OSPFRouter.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 18:22:34 2006 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
